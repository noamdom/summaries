#LyX 2.2 created this file. For more info see http://www.lyx.org/
\lyxformat 508
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass article
\use_default_options true
\maintain_unincluded_children false
\language hebrew
\language_package default
\inputencoding auto
\fontencoding global
\font_roman "lmodern" "default"
\font_sans "cmss" "default"
\font_typewriter "lmtt" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing onehalf
\use_hyperref false
\papersize default
\use_geometry true
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification false
\use_refstyle 1
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 2cm
\topmargin 2cm
\rightmargin 2cm
\bottommargin 2cm
\headheight 2cm
\headsep 2cm
\secnumdepth 3
\tocdepth 3
\paragraph_separation skip
\defskip 2bp
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\argmax}{\underset{k=1,...,K}{\text{argmax}}}
\end_inset


\end_layout

\begin_layout Title

\series bold
\size large
מסדי נתונים
\end_layout

\begin_layout Author
מבוסס על מצגותיו של ד"ר עמוס עזריה
\end_layout

\begin_layout Standard
\align center
סיכום זה מבוסס על המצגות מהשיעורים.
 יש לקחת בערבון מוגבל
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\align center
לתיקונים/הערות/הארות -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
0508752542
\numeric off

\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\align center
בהצלחה לכולנו!!
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\align center
נעם דומוביץ
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_5_1.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section*
מסדי נתונים רלציונים
\end_layout

\begin_layout Standard
כל מסד נתונים רלציוני, פועל לפי
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
4
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
עקרונות:
\end_layout

\begin_layout Itemize
\begin_inset Formula $Atomicity$
\end_inset

 - כל פעולה )"שאילתא"( צריך להתבצע במלואה או לא להתבצע בכלל.
\end_layout

\begin_deeper
\begin_layout Itemize
הערה: עקרון זה עובד גם על 
\series bold
פעולות מורכבות
\series default
, ולא רק על פעולות אטומיות.
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $Consistency$
\end_inset

 - עקביות - ביצוע פעולה לא פוגע בחוקי המסד נתונים.
\end_layout

\begin_layout Itemize
\begin_inset Formula $Isolation$
\end_inset

 - פעולות שונות יכולות להתבצע במקביל ) או סדר שונה(, והתוצאה תהיה זהה.
\end_layout

\begin_layout Itemize
\begin_inset Formula $Durablitiy$
\end_inset

 - המשכיות - ישנה המשכיות לפעולות שהופרעו באמצע עבודתן )דוגמה לפתרון, גיבוי(.
\end_layout

\begin_layout Section
\begin_inset Formula $SQL$
\end_inset


\end_layout

\begin_layout Subsubsection*
\begin_inset Formula $SELECT$
\end_inset

 - שליפה מטבלה
\end_layout

\begin_layout Itemize
שליפה מטבלה: 
\begin_inset Formula $SELECT\ \boldsymbol{col\ }FROM\ \boldsymbol{table}$
\end_inset

 למשל: 
\begin_inset Formula $SELECT\ id\ FROM\ studnts$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $SELECT\ *$
\end_inset

 - מחזיר את כל העמודות
\end_layout

\begin_layout Itemize
\begin_inset Formula $SELECT\ DISTINCT$
\end_inset

 - מוריד כפילויות
\end_layout

\end_deeper
\begin_layout Itemize
הוספת תנאים - 
\begin_inset Formula $WHERE$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
שליפה עם תנאי: 
\begin_inset Formula $SELECT\ \boldsymbol{col\ }FROM\ \boldsymbol{table}\ WHERE\ \boldsymbol{condition}$
\end_inset

 
\end_layout

\begin_layout Itemize
למשל: 
\begin_inset Formula $SELECT\ id\ FROM\ studnts\ WHERE\ degree<2$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
סוגי תנאים:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $<,>,=,<=,...$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $AND,OR,NOT$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $BETWEEN\ x\ and\ y$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $IN(x,y,z)$
\end_inset

 למשל: 
\begin_inset Formula $SELECT\ id\ FROM\ studnts\ WHERE\ id\ IN(111,444)$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $LIKE(C\%)$
\end_inset

 למשל: 
\begin_inset Formula $SELECT\ id\ FROM\ studnts\ WHERE\ id\ LIKE(mo\%)$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $Nested\ Queries$
\end_inset

 :
\end_layout

\begin_deeper
\begin_layout Itemize
למשל:
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\end_layout

\begin_layout Itemize

\lang english
SELECT lecturer FROM courses WHERE id NOT IN (SELECT courseId FROM grades)
\end_layout

\begin_layout Itemize
איחוד טבלאות
\lang english
UNION :
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
, למשל:
\end_layout

\begin_layout Itemize

\lang english
(SELECT....)UNION (SELECT)
\end_layout

\begin_layout Itemize
הערות:
\end_layout

\begin_deeper
\begin_layout Itemize
צריך שמספר העמודות יהיה זהה
\end_layout

\begin_layout Itemize
צריך שסוג העמודות יהיה זהה
\end_layout

\end_deeper
\begin_layout Itemize
לא קיים ב 
\begin_inset Formula $MySQL$
\end_inset

 אבל יש גם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
INTERSECT,EXCEPT
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
, אך ניתן לממש בדרכים אחרות
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $NULL$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
תא ריק בטבלה.
\end_layout

\begin_layout Itemize
\begin_inset Formula $COALESCE(val1,val2,...)$
\end_inset

 - אם 
\begin_inset Formula $va1=Null$
\end_inset

 הוא יביא את 
\begin_inset Formula $val2$
\end_inset

 אם 
\begin_inset Formula $val2=Null$
\end_inset

 ....
\end_layout

\begin_layout Itemize
ניתן כך להוסיף ערך שירשם במקום 
\begin_inset Formula $Null$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Subsubsection*
\begin_inset Formula $INSERT$
\end_inset

 - הכנסה לטבלה
\end_layout

\begin_layout Itemize
הוספת רשומה )שורה( לטבלה: 
\begin_inset Formula $INSERET\ INTO\ \boldsymbol{table\ }(\boldsymbol{co1,co2,...})\ VALUES\ (\boldsymbol{val1,val2,...})$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $OEDER\ BY$
\end_inset

 
\end_layout

\begin_layout Itemize
למשל: 
\lang english
SELECT id,firstName FROM students ORDER BY id
\end_layout

\begin_layout Itemize
ניתן לסדר בסדר עולה -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
ASC
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
)דיפולטיבי(, ובסדר יורד -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
DESC
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
.
\end_layout

\begin_layout Itemize
ניתן להגדיר סדרים פנימיים )משני(
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection*
\begin_inset Formula $Aggregate\ Functions$
\end_inset

 
\end_layout

\begin_layout Itemize
למשל:
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
SELECT COUNT(*) FROM students
\end_layout

\begin_layout Itemize
\begin_inset Formula $count(*)$
\end_inset

 - מספר השורות בטבלה, 
\begin_inset Formula $count(\boldsymbol{col})$
\end_inset

 - מספר השורות ללא 
\begin_inset Formula $null$
\end_inset

 בעמודה זו.
\end_layout

\begin_layout Itemize
ממוצע - 
\begin_inset Formula $AVG()$
\end_inset

 , סכום - 
\begin_inset Formula $SUM()$
\end_inset

 , 
\begin_inset Formula $MAX(),MIN()$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $:GROUP\ BY$
\end_inset

 
\end_layout

\begin_layout Itemize
אם נרצה )למשל( לסכום משהו לפי קטגוריה , נשתמש ב 
\begin_inset Formula $GROUP\ BY$
\end_inset

 
\end_layout

\begin_layout Itemize

\lang english
SELECT year,COUNT(year) FROM courses GROUP BY year
\end_layout

\begin_layout Itemize

\lang english
SELECT name, COUNT (lecturer) FROM courses GOURP BY semester
\end_layout

\begin_layout Standard
\begin_inset Formula $HAVING$
\end_inset

 - תנאי על 
\begin_inset Formula $GROUP$
\end_inset

 
\end_layout

\begin_layout Itemize
למשל: 
\end_layout

\begin_layout Itemize

\lang english
SELECT year,COUNT(year) FROM courses GROUP BY year HAVING COUNT(year) >
 1
\end_layout

\begin_layout Itemize
כלל אצבע:
\end_layout

\begin_deeper
\begin_layout Itemize
התנאי 
\lang english
WHERE
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
יגיע 
\series bold
לפני
\family roman
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
ׂ
\lang english
GROUP
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 )לסנן רשומות(
\end_layout

\begin_layout Itemize
התנאי
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
HAVING
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
יגיע 
\series bold
אחרי
\family roman
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
ׂ
\lang english
GROUP
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 )לסנן קבוצות(
\end_layout

\end_deeper
\begin_layout Subsubsection*
סדר מימוש הפעולות:
\end_layout

\begin_layout Itemize

\lang english
SELECT coursId ,AVG(grade) FROM (SELECT * FROM grades) WHERE passed >) GROUP
 BY courseId HAVING AVG(grade) < 70
\end_layout

\begin_layout Enumerate
מבפנים החוצה
\end_layout

\begin_layout Enumerate
הטבלה שאחרי ה 
\begin_inset Formula $FROM$
\end_inset

 
\end_layout

\begin_layout Enumerate
תנאי ה 
\begin_inset Formula $WHERE$
\end_inset

 
\end_layout

\begin_layout Enumerate
חלוקה לפי 
\begin_inset Formula $GROUP\ BY$
\end_inset

 
\end_layout

\begin_layout Enumerate
תנאי ה 
\begin_inset Formula $HAVING$
\end_inset

 
\end_layout

\begin_layout Enumerate
בחירת העמודות המופיעות ב 
\begin_inset Formula $SELECT$
\end_inset


\end_layout

\begin_layout Subsubsection*
שליפה מ
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
טבלאות או יותר - 
\begin_inset Formula $JOIN...ON$
\end_inset

 
\end_layout

\begin_layout Itemize

\series bold
חיתוך
\series default
 בין
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
טבלאות )לפי עמודה מסויימת(
\end_layout

\begin_layout Itemize

\lang english
SELECT * FROM students INNER JOIN grades ON students.id = grades.studentId
\end_layout

\begin_layout Itemize
ניתן גם לצרף יותר מטבלה אחת.
\end_layout

\begin_layout Standard

\lang english
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection*
שיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
-
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
3/5/19
\end_layout

\begin_layout Standard
\begin_inset Formula $LEFT\backslash RIGHT\ OUTER\ JOIN$
\end_inset

 
\end_layout

\begin_layout Itemize
בנוסף לחיתוך מוסיף את העמודות שנמצאות בטבלה השמאלית/ימנית ולא נמצאות בטבלה
 הימנית/השמאלית
\end_layout

\begin_layout Standard
\begin_inset Formula $UPDATE$
\end_inset

 
\end_layout

\begin_layout Itemize
באופן כללי:
\end_layout

\begin_layout Itemize

\lang english
UPDATE 
\series bold
table
\series default
 SET 
\series bold
col1=val1,col2=val2....

\series default
 WHERE .....
\end_layout

\begin_layout Itemize

\lang english
UPDATE grades SET grade=78, passes = 1 WHERE studentId=111 AND courseId
 = 20 
\end_layout

\begin_layout Standard
\begin_inset Formula $DELETE$
\end_inset

 
\end_layout

\begin_layout Itemize

\lang english
DELETE FROM 
\series bold
table
\series default
 WHERE .....
\end_layout

\begin_layout Standard
\begin_inset Formula $CREATE$
\end_inset

 
\end_layout

\begin_layout Standard
נצור טבלה לחיות מחמד:
\end_layout

\begin_layout Itemize

\lang english
CREATE TABLE pet (name VARCHAR(20), owner VARCHAR(20), species VARCHAR(20),
 sex CHAR(1), birth DATE); 
\end_layout

\begin_layout Itemize
ניתן להגדיר ערכים לעמודות 
\begin_inset Formula $INT,REAL,BOOLEAN,XML,DATETIME...$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $char(x)$
\end_inset

 אורך הסטרינג
\end_layout

\begin_layout Standard
\begin_inset Formula $KEYS$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $PRIMARY\ KEY$
\end_inset

- עמודה /מספר עמודות שמגדירה את הגישה לטבלה
\end_layout

\begin_layout Itemize
\begin_inset Formula $UNIQUE\ KEY$
\end_inset

 - עמודה שאין בה כפילויות , אך יכולה להיות עם ערך 
\begin_inset Formula $null$
\end_inset

 )למשל מספר דרכון(
\end_layout

\begin_layout Itemize
\begin_inset Formula $INDEX$
\end_inset

 - גישה מהירה על פי עמודה
\end_layout

\begin_layout Standard
\begin_inset Formula $DROP$
\end_inset

 
\end_layout

\begin_layout Itemize
כלומר - 
\lang english
DROP TABLE 
\series bold
table
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\end_layout

\begin_layout Itemize
כדאי מאוד להזהר עם זה..
\end_layout

\begin_layout Standard
\begin_inset Formula $ALTER$
\end_inset

 
\end_layout

\begin_layout Itemize
הוספת/מחיקת עמודה לטבלה
\end_layout

\begin_layout Itemize

\series bold
\lang english
ALTER
\series default
 TABLE pet 
\series bold
ADD
\series default
 death DATE -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang hebrew
הוספת עמודה
\end_layout

\begin_layout Itemize

\series bold
\lang english
ALTER
\series default
 TABLE pet 
\series bold
DROP
\series default
 death -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang hebrew
מחיקת עמודה
\end_layout

\begin_layout Itemize

\series bold
\lang english
ALTER
\series default
 TABLE table_name MODIFY COLUMN column_name datatype;
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang hebrew
עדכון עמודה - 
\end_layout

\begin_layout Standard
\begin_inset Formula $CASE$
\end_inset

 
\end_layout

\begin_layout LyX-Code

\lang english
Select
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
case when condition_1 then value1
\end_layout

\begin_layout LyX-Code

\lang english
when condition_2 then value2
\end_layout

\begin_layout LyX-Code

\lang english
else value3
\end_layout

\begin_layout LyX-Code

\lang english
end as alias
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
from table; 
\end_layout

\begin_layout Standard
דוגמה: כתבו שאילתה המחזירה את כל המוצרים – 
\lang english
Id
\lang hebrew
, שם, ובמקום הקטגוריה ירשום 
\lang english
Yes
\lang hebrew
 אם המוצר שייך ל 
\lang english
Beverages
\lang hebrew
 או 
\lang english
Condiments
\lang hebrew
 ו 
\lang english
NO
\lang hebrew
 אחרת 
\end_layout

\begin_layout LyX-Code

\lang english
select p.ProductID, p.ProductName,
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
case when c.CategoryName in ('Beverages', 'Condiments’)
\end_layout

\begin_layout LyX-Code

\lang english
then ‘Yes'
\end_layout

\begin_layout LyX-Code

\lang english
else 'No’
\end_layout

\begin_layout LyX-Code

\lang english
end as category from Products as p, Categories as c 
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Formula $Variables$
\end_inset

 
\end_layout

\begin_layout Itemize

\lang english
SET @var:= val
\end_layout

\begin_layout Itemize
ניתן להצהיר על סוג המשתנה
\end_layout

\begin_layout Itemize

\lang english
DECLARE @var AS INT
\end_layout

\begin_layout Subsubsection*
טבלה זמנית
\end_layout

\begin_layout Standard

\lang english
CREATE TEMPRARY TABLE 
\series bold
tempTable
\end_layout

\begin_layout Standard

\lang english
INSERT INTO 
\series bold
tempTable...
\end_layout

\begin_layout Standard
\begin_inset Formula $ALIASES$
\end_inset

 
\end_layout

\begin_layout Itemize
נתינת שם אחר לטבלה או עמודה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\end_layout

\begin_layout Itemize

\lang english
SELECT * FROM students AS s......
\end_layout

\begin_layout Itemize
לשאילתה פנימית, חובה לתת שם ע"ׁי 
\begin_inset Formula $AS$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Formula $TRANSACTION$
\end_inset


\end_layout

\begin_layout Itemize
סט פעולות )שאנחנו מגדירים( שמונעות את בעיות הסנכרון שהזכרנו, ובעצם שומר
 על ה 
\begin_inset Formula $ACID$
\end_inset

 
\end_layout

\begin_layout Itemize
ב 
\begin_inset Formula $MySql$
\end_inset

 מספיק להגדיר 
\begin_inset Formula $START\ TRANSACTION$
\end_inset

 לפני הפעולות הדרשות, ו 
\begin_inset Formula $COMMIT$
\end_inset

 אחרי
\end_layout

\begin_layout Itemize
אם ארע 
\begin_inset Formula $ERROR$
\end_inset

 במהלך סט הפעולות, 
\begin_inset Formula $MySQL$
\end_inset

 הוא יחזיר מיד את המצב לקדמותו
\end_layout

\begin_layout Itemize
ב
\begin_inset Formula $WorkBench$
\end_inset

 צריך לכתוב 
\begin_inset Formula $ROLLBACK\ COMMIT$
\end_inset

 בסוף הסט, )בשביל להחזיר את המצב לקדמותו(
\end_layout

\begin_layout Itemize
דוגמה, הבעיה:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_3_1.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
כפי שאמרנו מחובתנו לשמור על ה 
\begin_inset Formula $ACID$
\end_inset

 , למשל אי אפשר שנמשוך רק מלקוח כסף ושתוכנה תקרוס באמצע בלי שלקוח קיבל את
 הכסף.
\end_layout

\begin_layout Itemize
מכיון שכל פעולה לכשעצמה מקימת את ה 
\begin_inset Formula $ACID$
\end_inset

 נאגוד את כל הסט כ
\begin_inset Formula $Trancation$
\end_inset

 , למשל:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_3_2.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection
\begin_inset Formula $STORED\ PROCEDURES$
\end_inset


\end_layout

\begin_layout Itemize
שמירה של שאילתה על השרת
\end_layout

\begin_layout Itemize
יתרונות: אם כמה קליינטים מנסים להריץ אותה, אז פשוט מריצים את המידע שקיים
 על השרת
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_3_3.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
פעולות אפשריות:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $\text{CALL student\_avg(111);}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $\text{DROP PROCEDURE student\_avg}$
\end_inset


\end_layout

\begin_layout Itemize
אין 
\begin_inset Formula $ALTER$
\end_inset

 , לשינוי צריך למחוק ולצור חדש
\end_layout

\end_deeper
\begin_layout Subsection
\begin_inset Formula $Triggers$
\end_inset

 
\end_layout

\begin_layout Itemize
נניח ואנחנו רוצים שתהיה עמודה עם ממוצע הציונים לתלמיד
\end_layout

\begin_layout Itemize
ונניח שביצענו שאילתה שעושה זאת, ישנה בעיה - והיא שהעמודה לא מתעדכנת, כלומר
 שינוי של ציוני של תלמיד לא ישפיע על העמודה של המומצע, לכן:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_3_4.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
וכעת כאשר יתבצע:
\end_layout

\begin_layout Itemize

\lang english
INSERT INTO grades (courseId, studentId, grade, passed) VALUES (50, 111,
 87, 1);
\end_layout

\begin_layout Itemize
הטריגר יופעל.
\end_layout

\begin_layout Itemize
מחיקה: 
\lang english
DROP TRIGGER new_grade_received;
\end_layout

\begin_layout Standard

\lang english
\begin_inset Formula $VIEW$
\end_inset

 
\end_layout

\begin_layout Itemize
יצירת טבלה המבוססת על טבלאות ב
\begin_inset Formula $DB$
\end_inset

 , לצורכי תצוגה בלבד )כלומר הטבלה לא באמת קיימת, ורק מחברת מידע הקיים בטבלאות
 השונות(,
\series bold
 אך ניתן להשתמש באופן רגיל לגמרי
\series default
.
 למשל ליצירה:
\end_layout

\begin_layout Itemize

\lang english
CREATE VIEW avg_grades_view AS 
\end_layout

\begin_deeper
\begin_layout Standard

\lang english
SELECT students.firstName, AVG(grade) AS average
\end_layout

\begin_layout Standard

\lang english
FROM grades
\end_layout

\begin_layout Standard

\lang english
INNER JOIN students ON grades.studentId = students.id GROUP BY studentId;
\end_layout

\end_deeper
\begin_layout Itemize
כעת קבלת נתונים: 
\lang english
SELECT * FROM avg_grades_view
\end_layout

\begin_layout Itemize
ועדכון: 
\lang english
UPDATE avg_grades_view SET average=75 WHERE firstName LIKE 'Chaya';
\end_layout

\begin_layout Itemize
הערה )ע"פ גוגל(: באמת ניתן להוסיף/לעדכן/למחוק כל עוד זוהי טבלה "פשוטה" .
 
\end_layout

\begin_deeper
\begin_layout Standard
אם ה
\begin_inset Formula $view$
\end_inset

 מורכב 
\begin_inset Formula $\text{Aggregate functions, DISTINCT,GROUP BY, JOIN , Subquery }$
\end_inset

, וכד' זה לא יתאפשר.
 ע"פ: 
\lang english
http://www.mysqltutorial.org/create-sql-updatable-views.aspx
\end_layout

\end_deeper
\begin_layout Section
אלגברה רלציוניות
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_2_1.png

\end_inset


\end_layout

\begin_layout Standard
נותן לנו אפשרות לכתוב שאילתות בצורה מתמטית, למשל:
\end_layout

\begin_layout Itemize

\lang english
SELECT firstName, id FROM students WHERE degree > 1 
\end_layout

\begin_layout Itemize

\lang english
\begin_inset Formula $\prod_{firstName,id}\left(\sigma_{(degree>1)}(Students)\right)$
\end_inset


\end_layout

\begin_layout Standard
נניח את מסד הנתונים הבא:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\begin{matrix}Person(name,age,gneder) &  & key=\left(name\right)\\
Frequnets(name,pizzeria) &  & key=\left(name,pizzeria\right)\\
Eats\left(name,pizze\right) &  & key=\left(name,pizze\right)\\
Serves\left(pizzeria,pizze,price\right) &  & key=\left(pizzeria,pizza\right)
\end{matrix}$
\end_inset


\end_layout

\begin_layout Itemize

\bar under
מצא מסעדות המבוקרות לפחות ע"י מבקר אחד בן פחות מ
\numeric on
18
\numeric off
:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
Select pizzeria from Frequnets 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
left join Person on Frequnets.name = Person.name
\end_layout

\begin_layout LyX-Code

\lang english
where Id < 18 
\end_layout

\end_deeper
\begin_layout Standard
\align center

\lang english
\begin_inset Formula $\prod_{pizzeria}\left(\sigma_{age<18}\left(Person\right)\bowtie Frequnts\right)$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize

\bar under
מצא את שמות כל הנשים שאכלו פיצה זיתים או נפולטינה או שניהם
\end_layout

\begin_layout LyX-Code

\lang english
Select name from Eats
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
left join Person on Frequnets.name = Person.name
\end_layout

\begin_layout LyX-Code

\lang english
where pizze in (
\begin_inset Quotes eld
\end_inset

olive
\begin_inset Quotes erd
\end_inset

 , 
\begin_inset Quotes eld
\end_inset

napolitana
\begin_inset Quotes erd
\end_inset

) and  gender in ('female')
\end_layout

\end_deeper
\begin_layout LyX-Code
\align center
\begin_inset Formula $\prod_{name}\left(\sigma_{gender='famle'\land(pizza=napolitana'\lor pizza='olives')}\left(Person\bowtie Eats\right)\right)$
\end_inset


\end_layout

\begin_layout Section
\begin_inset Formula $Normalization$
\end_inset


\end_layout

\begin_layout Subsection
\begin_inset Formula $Dependencies$
\end_inset

 :
\end_layout

\begin_layout Itemize
הגדרה: נאמר ש 
\begin_inset Formula $attribute$
\end_inset

 )או כמה( 
\begin_inset Formula $B$
\end_inset

 תלויים ב 
\begin_inset Formula $attribute$
\end_inset

 )או כמה( 
\begin_inset Formula $A$
\end_inset

 אם קיים קשר )=פונקציה( כך ש: 
\begin_inset Formula $A\rightarrow B$
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
במילים אחרות, בהנתן 
\begin_inset Formula $A$
\end_inset

 לא קיימים שני 
\begin_inset Formula $B$
\end_inset

 שונים כך ש: 
\begin_inset Formula $\cancel{\begin{matrix}A\rightarrow B\\
A\rightarrow B'
\end{matrix}}$
\end_inset

 )הגדרת פונקציה( 
\end_layout

\end_deeper
\begin_layout Itemize
דוגמאות:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $A=ID$
\end_inset

 , 
\begin_inset Formula $B=name$
\end_inset

 נאמר ש
\begin_inset Formula $B$
\end_inset

 תלוי פונקציונלית ב 
\begin_inset Formula $A$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_4_1.png
	scale 70

\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Subsection
\begin_inset Formula $KEYS$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Formula $candidte\ keys$
\end_inset

 - סט מינמלי ליצירת שורה/לפניה לשורה.
 לכן שאר ה 
\begin_inset Formula $attributes$
\end_inset

 
\series bold
תלויים
\series default
 בו.
\end_layout

\begin_layout Standard
לדוגמה:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_4_2.png

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $id$
\end_inset

 יכול להיות ה 
\begin_inset Formula $key$
\end_inset

 
\end_layout

\begin_layout Itemize
וגם 
\begin_inset Formula $\left\{ name,year,semster\right\} $
\end_inset

 - היות ויכול להיות קורס אחד מסוגו בסמסטר.
\end_layout

\begin_layout Itemize
בטבלה יכול להיות יותר ממפתח
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
אחד
\end_layout

\begin_layout Standard
\begin_inset Formula $Prime$
\end_inset

 - אם תכונה )עמודה( היא חלק מ 
\begin_inset Formula $candidtae-key$
\end_inset

 )סט מינימלי( כשלהו.
 , אחרת היא 
\begin_inset Formula $non-prime$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Formula $Super-Key$
\end_inset

 - כל סט שמגדיר שורה באופן יחיד )כמו 
\begin_inset Formula $candidate$
\end_inset

 בלי המינמלי(
\end_layout

\begin_layout Subsection
\begin_inset Formula $NF$
\end_inset

 
\end_layout

\begin_layout Subsubsection
\begin_inset Formula $1,2,3,3.5,4$
\end_inset


\end_layout

\begin_layout Subsubsection*
\begin_inset Formula $1-NF$
\end_inset

 
\end_layout

\begin_layout Itemize
כל רחיב הוא אטומי )
\begin_inset Formula $searchablity$
\end_inset

( , למשל טבלה שבה תהיה עמודה המחזיקה שם ושם משפחה יחדיו, אינה 
\begin_inset Formula $1-NF$
\end_inset

 כי לא נתין להגיע בחיפוש לשם משפחה )אלא על ידי עיבוד המידע המתקבל מהשיאלתה(
\end_layout

\begin_layout Subsubsection*
\begin_inset Formula $2-NF$
\end_inset


\end_layout

\begin_layout Itemize
חייבת להיות 
\begin_inset Formula $1NF$
\end_inset

 
\end_layout

\begin_layout Itemize
תכונה שהיא 
\begin_inset Formula $non-prime$
\end_inset

 אסור שתהיה תלויה בתת קבוצה חלקית של
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
candidate key
\end_layout

\begin_layout Itemize
)אם לא מפתח תלוי בחלק ממפתח - בעיה(
\end_layout

\begin_layout Itemize
דוגמה - למצוא טובה יותר
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $R(author,bookId,\#pages)$
\end_inset

 
\begin_inset Formula $\overset{\text{c.key }}{\Leftarrow}$
\end_inset


\begin_inset Formula $\left\{ auther,bookId\right\} $
\end_inset

 
\end_layout

\begin_layout Itemize
הבעיה: 
\begin_inset Formula $bookId\rightarrow\#pages$
\end_inset

 ו 
\begin_inset Formula $\left\{ bookId\right\} $
\end_inset

 אינו 
\begin_inset Formula $key$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Standard
פתרון לטבלה שיש לה עמודות תלויות שכאלה, הוא חלוקה ל
\numeric on
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
טבלאות.
 בדוגמה 
\begin_inset Formula $\begin{matrix}R1\left(auther,bookId\right)\\
R2\left(bookId,\#pages\right)
\end{matrix}$
\end_inset

 
\end_layout

\begin_layout Subsubsection*
\begin_inset Formula $3-NF$
\end_inset


\end_layout

\begin_layout Itemize
חייבת להיות 
\begin_inset Formula $2NF$
\end_inset

 
\end_layout

\begin_layout Itemize
תכונה שהיא 
\begin_inset Formula $non-prime$
\end_inset

 אסור שתהיה תלויה בתת קבוצה שאינה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
super-key
\end_layout

\begin_layout Itemize
דוגמה 
\begin_inset Formula $R1\left(studentId,courseId,grade,passed\right)$
\end_inset

 
\begin_inset Formula $\overset{\text{c.key }}{\Leftarrow}$
\end_inset


\begin_inset Formula $\left\{ studentId,courseId\right\} $
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
מתקיים ש: 
\begin_inset Formula $\begin{matrix}\left\{ studentId,courseId\right\} \rightarrow grade\\
\left\{ studentId,courseId\right\} \rightarrow passed\\
\left\{ courseId,grade\right\} \rightarrow passed
\end{matrix}$
\end_inset

 זה 
\begin_inset Formula $2-NF$
\end_inset

 כי אין עמודה התלויה בחלק ממפתח
\end_layout

\begin_layout Itemize
נשים לב ש 
\begin_inset Formula $passed\notin key$
\end_inset

 ולכן היא 
\begin_inset Formula $non-prime$
\end_inset

 
\end_layout

\begin_layout Itemize
מצד שני 
\begin_inset Formula $\left\{ courseId,grade\right\} \rightarrow passed$
\end_inset

 ו
\begin_inset Formula $\left\{ courseId,grade\right\} $
\end_inset

אינו 
\begin_inset Formula $super-key$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Subsubsection*
\begin_inset Formula $BCNF$
\end_inset

 = 
\begin_inset Formula $3.5NF$
\end_inset

 
\end_layout

\begin_layout Itemize
חייבת להיות 
\begin_inset Formula $3-NF$
\end_inset

 
\end_layout

\begin_layout Itemize
לכל שני סטים 
\begin_inset Formula $X,Y$
\end_inset

 כך ש 
\begin_inset Formula $Y\nsubseteq X$
\end_inset

 , 
\begin_inset Formula $X\rightarrow Y$
\end_inset

 , 
\begin_inset Formula $X$
\end_inset

 הוא 
\begin_inset Formula $super-key$
\end_inset

 
\end_layout

\begin_layout Standard

\bar under
וענה: 
\begin_inset Formula $3NF$
\end_inset

 עם 
\lang english
single candidate
\lang hebrew
 אז 
\begin_inset Formula $3.5NF$
\end_inset

 
\end_layout

\begin_layout Standard
הוכחה:
\end_layout

\begin_layout Itemize
אם 
\begin_inset Formula $x\rightarrow y$
\end_inset

 ו
\begin_inset Formula $y$
\end_inset

 
\begin_inset Formula $non-prime$
\end_inset

 סיימנו
\end_layout

\begin_layout Itemize
אחרת 
\begin_inset Formula $y$
\end_inset

 
\begin_inset Formula $prime$
\end_inset

 לכן הוא חלק מקבוצה שהיא
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
canditdae key
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
נניח שקבוצה זו היא 
\begin_inset Formula $\left\{ A,B,...,Y,..\right\} $
\end_inset

 
\end_layout

\begin_layout Itemize
מכיון ו 
\begin_inset Formula $x$
\end_inset

 קבוצה , ו 
\begin_inset Formula $x\rightarrow y$
\end_inset

 נוכל להחליף את 
\begin_inset Formula $y$
\end_inset

 בקבוצה, ולקבל סט 
\begin_inset Formula $\left\{ A,B,.x_{1},x_{2},x_{3},....\right\} $
\end_inset

, קבוצה זו היא 
\begin_inset Formula $super-key$
\end_inset

 
\end_layout

\begin_layout Itemize
מהגדרת ה
\begin_inset Formula $super-key$
\end_inset

 ניתן להופכו לסט מינמלי על ידי זריקת מפתחות, עד לקבלת 
\begin_inset Formula $key$
\end_inset

 לכן:
\begin_inset Formula $\left\{ A,\cancel{B},.\cancel{x_{1}},\cancel{x_{2}},\cancel{x_{3}},....\right\} $
\end_inset

 
\end_layout

\begin_layout Itemize
ובהכרח: 
\begin_inset Formula $\left\{ A,\cancel{B},.\cancel{x_{1}},\cancel{x_{2}},\cancel{x_{3}},....\right\} \neq\left\{ A,B,...,Y,..\right\} $
\end_inset

 - כי החלפנו את 
\begin_inset Formula $Y$
\end_inset

 
\end_layout

\begin_layout Itemize
וזו סתירה לנתון שיש 
\begin_inset Formula $single-candidtae$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection*
לסיכום:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $2NF:\underset{\text{connot be part of key}}{X}\longrightarrow\underset{\text{non-prime}}{Y}$
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $3NF:\underset{\text{super key}}{X}\longrightarrow\underset{\text{non-prime}}{Y}$
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $BCNF:\underset{\text{super key}}{X}\longrightarrow\underset{\text{any}}{Y}$
\end_inset


\end_layout

\begin_layout Standard

\bar under
במילים )מגיל לוי(:
\end_layout

\begin_layout Itemize
אם 
\begin_inset Formula $B$
\end_inset

 לא חלק ממפתח 
\begin_inset Formula $\leftarrow$
\end_inset

 
\begin_inset Formula $A$
\end_inset

 לא מוכל ממש במפתח
\end_layout

\begin_layout Itemize
אם 
\begin_inset Formula $B$
\end_inset

 לא חלק ממפתח 
\begin_inset Formula $\leftarrow$
\end_inset

 
\begin_inset Formula $A$
\end_inset

 מפתח 
\end_layout

\begin_layout Itemize
אם 
\begin_inset Formula $B$
\end_inset

 כלשהו 
\begin_inset Formula $\leftarrow$
\end_inset

 
\begin_inset Formula $A$
\end_inset

 מפתח
\end_layout

\begin_layout Itemize

\bar under
כללים למציאת מפתח:
\end_layout

\begin_deeper
\begin_layout Itemize
עמודה שנמצאת בצד ימין ולא בשמאל - בהכרח לא חלק מהמפתח
\end_layout

\begin_layout Itemize
עמודה שנמצאת בשמאל ולא בימין - בהכרח חלק מהמפתח )אין מי שיביא לי אותה(
\end_layout

\begin_layout Itemize
עוברים על השילובים האפשריים עם עמודה אחת, שתיים...
\end_layout

\end_deeper
\begin_layout Itemize
אם הכל 
\begin_inset Formula $Prime$
\end_inset

 אז 
\begin_inset Formula $2$
\end_inset

 ו 
\begin_inset Formula $3$
\end_inset

 מקבלים חינם
\end_layout

\begin_layout Itemize
אם יש רק 
\begin_inset Formula $key$
\end_inset

 אחד והטבלה היא כן
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit

\begin_inset Formula $3-NF$
\end_inset

 אז היא גם 
\begin_inset Formula $BCNF$
\end_inset

 
\end_layout

\begin_layout Itemize
)פסילת 
\begin_inset Formula $BCNF$
\end_inset

 מסתכלים על התלויות ובודקים אם יש עמודה המתקבלת ממשהו שהוא לא מפתח(
\end_layout

\begin_layout Subsubsection*
\begin_inset Formula $multivalued-dependency$
\end_inset

, הגדרה:
\end_layout

\begin_layout Itemize
יהיו 
\begin_inset Formula $A,B$
\end_inset

 סטים של תכונות, נאמר ש
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
A multidetermines B
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
ונסמן : 
\begin_inset Formula $A-->>B$
\end_inset

 אם:
\end_layout

\begin_deeper
\begin_layout Itemize
אם 
\begin_inset Formula $C=R\backslash\left(A\cup B\right)$
\end_inset

 )שאר התכונות(
\end_layout

\begin_layout Itemize
ויש לנו שתי שורות כך ש:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $x[A]=y[A]\ and$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $x[B]\neq y[B]\ and$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $x[C]\neq y[C]$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
ויש שורה כך ש:
\end_layout

\begin_layout Itemize
\begin_inset Formula $z[A]=x[A]\ and\ \left(=y[A]\right)\ and$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $z[B]=x[B]\ and$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $z[C]=y[C]$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\begin{array}{c|ccc}
 & A & B & C\\
\hline x & \underline{a_{1}} & b_{1} & c_{1}\\
y & \underline{a_{1}} & b_{2} & \underline{c_{2}}\\
z & \underline{a_{1}} & \underline{b_{1}} & \underline{c_{2}}\\
w
\end{array}$
\end_inset


\end_layout

\begin_layout Subsubsection*
\begin_inset Formula $NF-4$
\end_inset

 
\end_layout

\begin_layout Itemize
חייב להיות 
\begin_inset Formula $3.5NF$
\end_inset

 
\end_layout

\begin_layout Itemize
אסור שתהיה שורה המקיימת 
\begin_inset Formula $multivalued\ dependencies.$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_3_5.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
נתבונן בשלוש השורות האחרונות: ישנה שורה:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $x[id]=y[id]=111$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $x[Depar]=CS\neq Biology=y[Depar]$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $x[sprot]=Baseball\neq soccer=z[sport]$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
וקיימת שורה )הרביעית(:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $z[id]=x[id]=y[id]=111$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $z[Depar]=Biology=Biology=x[Depar]$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $x[sport]=Baseball=Baseball=y[sport]$
\end_inset


\end_layout

\end_deeper
\begin_layout Section
\begin_inset Formula $XML-JSON$
\end_inset

 
\end_layout

\begin_layout Subsection
\begin_inset Formula $XML(eXtensible-Markup-Language)$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $xml$
\end_inset

 לא "עושה"/"רץ" - זו רק דרך להעברת נתונים
\end_layout

\begin_layout Itemize
\begin_inset Formula $xml$
\end_inset

 תקין נקרא 
\begin_inset Formula $well\ formed$
\end_inset

 
\end_layout

\begin_layout Itemize
יש לו 
\begin_inset Formula $root-element$
\end_inset

 יחיד, והוא בנוי בצורה הררכית
\end_layout

\begin_layout Itemize
יש 
\begin_inset Formula $attribute$
\end_inset

, 
\begin_inset Formula $Case-snestive$
\end_inset


\end_layout

\begin_layout Itemize
סגירת 
\begin_inset Formula $element$
\end_inset

: 
\lang english
<element>....</element> 
\end_layout

\begin_layout Itemize
אוביקט ריק ניתן לסמן: 
\lang english
<Studnet / >
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
)רק סלאש בסוף, ללא אלמנט סוגר(
\end_layout

\begin_layout Itemize
\begin_inset Formula $Entity-References$
\end_inset

, לדוגמה 
\begin_inset Formula $<$
\end_inset

 = 
\begin_inset Formula $\&lt;$
\end_inset

 ועוד.
\end_layout

\begin_deeper
\begin_layout Itemize
דומה ל 
\begin_inset Formula $HTML$
\end_inset

 אבל שונה ממנו - 
\begin_inset Formula $XML$
\end_inset

 הוא לא 
\begin_inset Formula $HTML$
\end_inset

 , ו
\begin_inset Formula $HTML$
\end_inset

 הוא לא 
\begin_inset Formula $XML$
\end_inset

 
\end_layout

\begin_layout Itemize
הראנו איך לקרוא 
\begin_inset Formula $XML$
\end_inset

 בגאוה
\end_layout

\end_deeper
\begin_layout Subsection
\begin_inset Formula $XPath$
\end_inset


\end_layout

\begin_layout Itemize

\lang english
You can try using XPath (and XQuery) at: http://www.xpathtester.com/xpath
\end_layout

\begin_layout Itemize
הספירה מתחילה מ
\numeric on
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
)ולא מ
\numeric on
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
(
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
\align center

\lang english
\begin_inset Tabular
<lyxtabular version="3" rows="17" columns="2">
<features booktabs="true" islongtable="true" longtabularalignment="center">
<column alignment="center" valignment="top" width="7cm">
<column alignment="center" valignment="top" width="7cm">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
path exp'
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
Desc
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
/
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
בחירת ה 
\begin_inset Formula $root$
\end_inset

 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
/rootTag
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
בחירת התג שנקרא 
\begin_inset Formula $rootTag$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
//tagName
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
מצא את ה
\begin_inset Formula $tagName$
\end_inset

 שמסמך
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
text()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
קבלת הטקסט שב
\begin_inset Formula $node$
\end_inset

 הנבחר
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $@name$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
קבלת ה 
\begin_inset Formula $atriibute$
\end_inset

 , 
\begin_inset Formula $@name$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
..
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
קבלת האב
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\left[\right]$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
תנאי
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
avg,count,max,contains
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
פונקציות אגרגטיביות
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
University/Student/*
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
החזרת כל האלמנטים
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
University/Student/FirstName | /University/Student/Address
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
פעולת 
\begin_inset Formula $or$
\end_inset

 מסומנת 
\begin_inset Formula $|$
\end_inset

 - כל שמות וכתובות הסטודנטים 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
University//Street
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
החזרת כל הצאצאים )ולא בהכרח צאצא ישיר(
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
/doc/chapter[5]
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
פרק 
\numeric on
5
\numeric off
 תחת ה
\begin_inset Formula $doc$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
/body/p[last()]
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ה 
\begin_inset Formula $p$
\end_inset

 האחרון במסמך )פיסקה(
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
/body/p[@class='a']
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ה
\begin_inset Formula $p$
\end_inset

 עם 
\begin_inset Formula $class\ attribute$
\end_inset

 השווה ל 
\begin_inset Formula $a$
\end_inset

 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
//p[@class and @style]
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
כל ה 
\begin_inset Formula $p$
\end_inset

 במסמך שיש להם 
\begin_inset Formula $@class$
\end_inset

 ו 
\begin_inset Formula $@style$
\end_inset

 כ
\begin_inset Formula $atrribute$
\end_inset

 
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\end_layout

\begin_layout Subsection
\begin_inset Formula $Xquery$
\end_inset

 
\end_layout

\begin_layout Itemize

\lang english
from: https://www.w3schools.com/xml/xquery_intro.asp
\end_layout

\begin_layout Standard
נניח ויש לנו קובץ של חנות ספרים, המכיל מידע על הספרים: קטגוריה, שם, סופר,
 שנת יציאה, מחיר.
 לדוגמה:
\end_layout

\begin_layout LyX-Code

\lang english
<?xml version="1.0" encoding="UTF-8"?>
\end_layout

\begin_layout LyX-Code

\lang english
<bookstore>
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<book category="COOKING">
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<title lang="en">Everyday Italian</title>
\end_layout

\begin_layout LyX-Code

\lang english
<author>Giada De Laurentiis</author>
\end_layout

\begin_layout LyX-Code

\lang english
<year>2005</year>
\end_layout

\begin_layout LyX-Code

\lang english
<price>30.00</price>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</book>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
....
\end_layout

\begin_layout LyX-Code

\lang english
</bookstore>
\end_layout

\begin_layout Standard

\lang english
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $select$
\end_inset

 
\end_layout

\begin_layout Standard
כפי שהראנו ב 
\begin_inset Formula $XPAth$
\end_inset

 השורה הבאה תחזיר לנו את כל שמות הספרים 
\end_layout

\begin_layout LyX-Code

\lang english
doc("books.xml")/bookstore/book/title.text()
\end_layout

\begin_layout Standard
ובקשה :
\end_layout

\begin_layout LyX-Code

\lang english
doc("books.xml")/bookstore/book[price>30] 
\end_layout

\begin_layout Standard
תחזיר את כל 
\series bold
הספרים
\series default
 שמחירם גדול מ
\numeric on
30
\numeric off
 
\end_layout

\begin_layout Subsubsection

\series medium
\begin_inset Formula $FLWOR$
\end_inset

 
\end_layout

\begin_layout Itemize

\lang english
For - selects a sequence of nodes
\end_layout

\begin_layout Itemize

\lang english
Let - binds a sequence to a variable
\end_layout

\begin_layout Itemize

\lang english
Where - filters the nodes
\end_layout

\begin_layout Itemize

\lang english
Order by - sorts the nodes
\end_layout

\begin_layout Itemize

\lang english
Return - what to return (gets evaluated once for every node) 
\end_layout

\begin_layout Standard
עבור הדוגמה עם הספרים שמחירם גדול מ
\numeric on
30
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
נוכל לקבל את אותה תוצאה )נצמצם לקבלת ה 
\begin_inset Formula $title$
\end_inset

 ( ע"י:
\end_layout

\begin_layout LyX-Code

\lang english
for $x in doc("books.xml")/bookstore/book
\end_layout

\begin_layout LyX-Code

\lang english
where $x/price>30
\end_layout

\begin_layout LyX-Code

\lang english
return $x/title
\end_layout

\begin_layout Standard
היתרון שנוכל לסדר את התוצאות:
\end_layout

\begin_layout LyX-Code

\lang english
for $x in doc("books.xml")/bookstore/book
\end_layout

\begin_layout LyX-Code

\lang english
where $x/price>30
\end_layout

\begin_layout LyX-Code

\lang english
order by $x/title
\end_layout

\begin_layout LyX-Code

\lang english
return $x/title 
\end_layout

\begin_layout Standard

\lang english
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
אפשר גם להשתמש ב 
\begin_inset Formula $if-then-else$
\end_inset

 
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/t_4_1.png
	scale 70

\end_inset


\end_layout

\begin_layout Subsection
\begin_inset Formula $Validation$
\end_inset


\end_layout

\begin_layout Itemize
הראנו איך אנחנו מונעים חוסרים במסד נתונים רלציוני אבל איך נעשה זאת ב 
\begin_inset Formula $XML$
\end_inset

 ?
\end_layout

\begin_layout Subsubsection
\begin_inset Formula $DTD$
\end_inset

 
\end_layout

\begin_layout Itemize
מעט מיושן
\end_layout

\begin_layout Itemize
יחסית פשוט אבל חלש לעומת ה 
\begin_inset Formula $XSD$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<!DOCTYPE Name [.....]>
\end_layout

\begin_layout LyX-Code

\lang english
<!ELEMENT Name ContentSpecification> 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
EMPTY, ,ANY, ELEMENT CONTENT, MIXED CONTENT
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
#PCDATA = Parse Text Data
\end_layout

\end_deeper
\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="15" columns="3">
<features booktabs="true" islongtable="true" longtabularalignment="center">
<column alignment="center" valignment="top" width="3cm">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top" width="3cm">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
commands
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
example/pattern
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
explantion
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!DOCTYPE Name [.....]>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!DOCTYPE University [.....]>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
העטיפה של המסמך
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
יצירת 
\begin_inset Formula $elemnt$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!ELEMENT Name ContentSpecification>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ANY
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!ELEMENT WORLD ANY>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
EMPTY
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!ELEMENT IMG EMPTY>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
אובייקט תמונה ריק
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ELEMENT
\begin_inset Newline newline
\end_inset

CONTENT
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!ELEMENT Name (#PCDATA)>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
שם המכיל 
\begin_inset Formula $\#PCDATA$
\end_inset


\begin_inset Newline newline
\end_inset

)
\begin_inset Formula $string$
\end_inset

(
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
MIXED
\begin_inset Newline newline
\end_inset

CONTENT
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!ELEMENT CD (TITLE, ARTIST)>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
אובייקט בשם 
\begin_inset Formula $CD$
\end_inset

 שחייב להכיל 
\begin_inset Formula $TITLE$
\end_inset

 ו 
\begin_inset Formula $ARTIST$
\end_inset

 בסדר הזה
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!ELEMENT DWELLING (HOUSE|APATRMENT| TRAILER)>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
האובייקט מכיל 
\series bold
אחד 
\series default
מהשלושה שבסגוריים
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
מספר מופעים
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!ELEMENT student (FirstName, LastName+, Address*, id, age?)>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $?$
\end_inset

 = מופע
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
או
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
0
\numeric off
.
\begin_inset Newline newline
\end_inset

 
\begin_inset Formula $+$
\end_inset

 = לפחות מופע
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
.
\begin_inset Newline newline
\end_inset

 
\begin_inset Formula $*$
\end_inset

 = לפחות
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
מופעים )כרצוננו(
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
הוספת 
\begin_inset Formula $attribute$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!ATTLIST ElemName AttrName Type DefultDecl>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ֻ
\lang english
CDATA
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!ATTLIST PACKAGE status CDATA 
\begin_inset Quotes eld
\end_inset

OK
\begin_inset Quotes erd
\end_inset

>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Enumerated - one from a list
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!ATTLIST DWELLING type (house | apartment | trailer) >
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!ATTLIST PACKAGE ontime (yes | no ) #REQUIRED >
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ה
\begin_inset Formula $attribue$
\end_inset

 , 
\begin_inset Formula $ontime$
\end_inset

נצרך חייב, וערכו הוא 
\begin_inset Formula $\text{yes or no }$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!ATTLIST PACKAGE ontime (yes | no ) #IMPLIED >
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ה
\begin_inset Formula $attribue$
\end_inset

 לא הכרחי
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
<!ATTLIST PACKAGE ontime CDATA #FIXED 
\begin_inset Quotes eld
\end_inset

yes
\begin_inset Quotes erd
\end_inset

>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $ontime$
\end_inset

 יקבל את הערך 
\begin_inset Formula $yes$
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align left

\lang english
\begin_inset Graphics
	filename תמונות-מסדי/less_4_3.png
	scale 70

\end_inset

 
\begin_inset Graphics
	filename תמונות-מסדי/less_4_4.png
	scale 60

\end_inset


\end_layout

\begin_layout Subsubsection
\begin_inset Formula $XML-Schema$
\end_inset

 
\end_layout

\begin_layout Itemize
בעל יותר כח, למשל ניתן לשלוט כמה אלמנטים,
\end_layout

\begin_layout Itemize
תמיד יהיה קובץ נפרד
\end_layout

\begin_layout Itemize
יש להגדיר בהתחלה את 
\begin_inset Formula $namespace$
\end_inset

 שנשתמש בו בד"כ 
\begin_inset Formula $xs\backslash xsd$
\end_inset

: 
\end_layout

\begin_layout LyX-Code

\lang english
<xs:schema xmlns:
\series bold
xs
\series default
="http://www.w3.org/2001/XMLSchema"> 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<
\series bold
xs
\series default
:element name=
\begin_inset Quotes erd
\end_inset

elemName
\begin_inset Quotes erd
\end_inset

>
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
 
\lang hebrew

\begin_inset Formula $\vdots$
\end_inset


\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</
\series bold
xs
\series default
:element>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</xs:schema>
\end_layout

\begin_layout Itemize
הגדרת 
\begin_inset Formula $element$
\end_inset

 : 
\lang english
<xsd:element name type>
\end_layout

\begin_layout Itemize
הגדרת 
\begin_inset Formula $type$
\end_inset

 ע"י 
\lang english
xsd:string | boolean,| decimal | integer | sPositiveInteg | anyURy | date
 | ...
\end_layout

\begin_layout Itemize
למשל:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xsd:element name=
\begin_inset Quotes erd
\end_inset

MyElem
\begin_inset Quotes erd
\end_inset

 type=xsd:string>
\end_layout

\begin_layout LyX-Code

\lang english
</elemtn>
\end_layout

\end_deeper
\begin_layout Itemize
ניתן לשלוט במספר המופעים ע"י 
\begin_inset Formula $min\backslash max\ occuer$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Standard

\lang english
<xsd:element name=
\begin_inset Quotes erd
\end_inset

Friend
\begin_inset Quotes erd
\end_inset

 type=xsd:string minoccurs=
\begin_inset Quotes erd
\end_inset

1
\begin_inset Quotes erd
\end_inset

 maxoccurs=
\begin_inset Quotes erd
\end_inset

unbounded
\begin_inset Quotes erd
\end_inset

>
\end_layout

\begin_layout Itemize
באופן דיפולטיבי הם מוגדרים לאחד )=מופע אחד בדיוק(
\end_layout

\end_deeper
\begin_layout Itemize
ניתן להוסיף 
\begin_inset Formula $type$
\end_inset

 משלנו, ובכך לצור הגבלות המתאימות לצרכינו ע"י 
\begin_inset Formula $SimtpleType$
\end_inset

 ו 
\begin_inset Formula $restriction$
\end_inset


\end_layout

\begin_layout LyX-Code

\lang english
<xs:element name=
\begin_inset Quotes erd
\end_inset

dwelling
\begin_inset Quotes erd
\end_inset

>
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xsd:
\series bold
simptleType
\series default
>
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
</xsd:
\series bold
restriction
\series default
 base=
\begin_inset Quotes erd
\end_inset

xsd:string
\begin_inset Quotes erd
\end_inset

>
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xsd:enumeration value=
\begin_inset Quotes erd
\end_inset

house
\begin_inset Quotes erd
\end_inset

>
\end_layout

\begin_layout LyX-Code

\lang english
<xsd:enumeration value=
\begin_inset Quotes erd
\end_inset

apartment
\begin_inset Quotes erd
\end_inset

>
\end_layout

\begin_layout LyX-Code

\lang english
<xsd:enumeration value=
\begin_inset Quotes erd
\end_inset

trailer
\begin_inset Quotes erd
\end_inset

>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</xsd:
\series bold
restriction
\series default
>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</xsd:
\series bold
simpleType
\series default
>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</xsd:element>
\end_layout

\begin_layout Itemize
ניתן גם להגדיר 
\begin_inset Formula $restriction$
\end_inset

 על ידי 
\begin_inset Formula $regax$
\end_inset

 למשל: 
\lang english
<xsd:pattern value=
\begin_inset Quotes erd
\end_inset

[A-z]
\begin_inset Quotes erd
\end_inset

>
\end_layout

\begin_layout Itemize
\begin_inset Formula $anyType$
\end_inset

 - אובייקט ללא הגבלות בכלל.
\end_layout

\begin_layout Itemize
\begin_inset Formula $ComplexType$
\end_inset

 : 
\end_layout

\begin_deeper
\begin_layout Itemize
נגדיר אובייקט ריק כך:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xs:element name=
\begin_inset Quotes erd
\end_inset

dwelling
\begin_inset Quotes erd
\end_inset

>
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xsd:complexType>
\end_layout

\begin_layout LyX-Code

\lang english
</xsd:complexType>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</xsd:element>
\end_layout

\end_deeper
\begin_layout Itemize
נגדיר אובייקט מורכב כך:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xs:element name=
\begin_inset Quotes erd
\end_inset

dwelling
\begin_inset Quotes erd
\end_inset

>
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xsd:complexType 
\series bold
mixed=
\begin_inset Quotes erd
\end_inset

true
\begin_inset Quotes erd
\end_inset


\series default
>
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xsd:
\series bold
sequnce
\series default
>
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xsd:element name=
\begin_inset Quotes erd
\end_inset

title
\begin_inset Quotes erd
\end_inset

>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</xsd:sequnce>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</xsd:complexType>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</xsd:element>
\end_layout

\begin_layout Itemize
\begin_inset Formula $sequnce$
\end_inset

 - הרכיבים הפנימיים צריכים להופיע בסדר זה
\end_layout

\begin_layout Itemize
\begin_inset Formula $choice$
\end_inset

 - ניתן לבחור אחד מהרכיבים הפנימיים
\end_layout

\begin_layout Itemize
\begin_inset Formula $all$
\end_inset

 - הרכיבים יכולים להופיע בכל סדר שהוא
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
\begin_inset Formula $attribute$
\end_inset

 : 
\end_layout

\begin_deeper
\begin_layout Itemize
נגדיר
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
<xsd:attribute name type ?use?>
\end_layout

\begin_layout Itemize
תמיד יוגדר כ 
\begin_inset Formula $simpleType$
\end_inset

 , וה
\begin_inset Formula $type$
\end_inset

שלו כמו של 
\begin_inset Formula $elemnt$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $use$
\end_inset

 )לא חובה( - 
\begin_inset Formula $required\backslash optional\backslash prohibited\backslash defualt$
\end_inset


\end_layout

\begin_layout Itemize
צריך להופיע בסוף
\end_layout

\begin_layout Itemize
דוגמא
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xs:element name=
\begin_inset Quotes erd
\end_inset

myImg
\begin_inset Quotes erd
\end_inset

>
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xsd:complexType>
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xsd:attribute name=
\begin_inset Quotes erd
\end_inset

src
\begin_inset Quotes erd
\end_inset

 type=
\begin_inset Quotes erd
\end_inset

xsd:string
\begin_inset Quotes erd
\end_inset

 use=required>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</xsd:complexType>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</xsd:element>
\end_layout

\end_deeper
\begin_layout Itemize
דוגמה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xs:element name=
\begin_inset Quotes erd
\end_inset

Car
\begin_inset Quotes erd
\end_inset

>
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xsd:complexType>
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xsd:sequnce>
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
<xsd:element name=
\begin_inset Quotes erd
\end_inset

make
\begin_inset Quotes erd
\end_inset

 type=
\begin_inset Quotes erd
\end_inset

xsd:string
\begin_inset Quotes erd
\end_inset

>
\end_layout

\begin_layout LyX-Code

\lang english
<xsd:element name=
\begin_inset Quotes erd
\end_inset

model
\begin_inset Quotes erd
\end_inset

 type=
\begin_inset Quotes erd
\end_inset

xsd:string
\begin_inset Quotes erd
\end_inset

>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</xsd:sequnce>
\end_layout

\begin_layout LyX-Code

\lang english
<xsd:attribute name=
\begin_inset Quotes erd
\end_inset

year
\begin_inset Quotes erd
\end_inset

 type=
\begin_inset Quotes erd
\end_inset

xsd:string
\begin_inset Quotes erd
\end_inset

>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</xsd:complexType>
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
</xsd:element>
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
דוגמת הסטודנטים
\end_layout

\begin_layout Standard
\align left
\begin_inset Graphics
	filename תמונות-מסדי/less_4_5.png
	scale 60

\end_inset


\lang english

\begin_inset Graphics
	filename תמונות-מסדי/less_4_3.png
	scale 70

\end_inset

 
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout Subsection
\begin_inset Formula $JSON$
\end_inset


\end_layout

\begin_layout Itemize
פורמט פשוט, תוכנן עבור 
\begin_inset Formula $JavaScript$
\end_inset

 
\end_layout

\begin_layout Itemize
מבנה 
\begin_inset Formula $\left\{ "idex":"value\right\} $
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $Schema\backslash Path$
\end_inset

 - קיימים, לא נפוצים, לא הרחבנו.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
\begin_inset Formula $NoSQL$
\end_inset

 
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_5_2.png
	scale 40

\end_inset


\end_layout

\begin_layout Itemize
ידוע גם כן 
\begin_inset Formula $not-only-sql$
\end_inset

 כלומר לא להשתמש ב 
\begin_inset Formula $retaional-data-storage$
\end_inset

 
\end_layout

\begin_layout Itemize
משתדלים להמנע מ 
\begin_inset Formula $join$
\end_inset

 )שמכביד מאוד על כמות המידע(, יותר גמיש, ותומך ב 
\begin_inset Formula $big-data$
\end_inset

 
\end_layout

\begin_layout Itemize
למה זה טוב?
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $Scalabilty$
\end_inset

 )היכולת לגדול בקלות(
\end_layout

\begin_layout Itemize
כשרוצים 
\series bold
מבנה
\series default
 גמיש
\end_layout

\end_deeper
\begin_layout Itemize
המחיר
\end_layout

\begin_deeper
\begin_layout Itemize
השאילתות מוגבלות
\end_layout

\begin_layout Itemize
לא נוכל להבטיח קיום 
\begin_inset Formula $ACID$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Subsubsection
\begin_inset Formula $cap\ theorm$
\end_inset

 
\end_layout

\begin_layout Standard
טענה: אין מסד נתונים שיכול לקיים את שלושת התנאים הבאים במקביל:
\end_layout

\begin_layout Itemize
\begin_inset Formula $Consistency$
\end_inset

 - כל קריאה צריכה לקבל בחזרה ערך או טעות
\end_layout

\begin_layout Itemize
\begin_inset Formula $Availabilty$
\end_inset

 - כל קריאה צריכה לענות עם הערך האחרון
\end_layout

\begin_layout Itemize
\begin_inset Formula $Partition\ tolerance$
\end_inset

 - יכולת המערכת להגיב, לכמה מחשבים במקביל
\end_layout

\begin_layout Standard
מסד נתונים רלציוני - בוחר להצמד לשני העקרונות הראשונים.
 ואנו נלמד מסדי נתונים שבחרו לעקרנות אחרים
\end_layout

\begin_layout Standard
בציור:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_5_1.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
וכעת העקרון שינחו אותנו הוא 
\begin_inset Formula $BASE$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $basically-Avilable$
\end_inset

 : הנתונים זמינים לרוב
\end_layout

\begin_layout Itemize
\begin_inset Formula $soft-State$
\end_inset

 :המצבים יכולים להשתנות , גם ללא עדכון )כי עדכון ישן עדיין רץ(
\end_layout

\begin_layout Itemize
\begin_inset Formula $Eventual-consistency$
\end_inset

: בשלב סופי כלשהו ה 
\begin_inset Formula $data$
\end_inset

 תהיה עקבית
\end_layout

\begin_layout Subsection
\begin_inset Formula $\boldsymbol{redis}$
\end_inset

 
\end_layout

\begin_layout Itemize
למעשה זהו 
\begin_inset Formula $hash-map$
\end_inset

 גדול
\end_layout

\begin_layout Itemize
לשים לב ב 
\begin_inset Formula $redis$
\end_inset

 מקבלים את ה 
\begin_inset Formula $"value"$
\end_inset

 בשלמותו )אין 
\begin_inset Formula $select$
\end_inset

שמחזיר רק חלק מה
\begin_inset Formula $node$
\end_inset

 (
\end_layout

\begin_layout Itemize

\lang english
You can try it online at: https://try.redis.io/
\end_layout

\begin_layout Standard
להלן הפקודות ב 
\begin_inset Formula $redis$
\end_inset

:
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="32" columns="3">
<features booktabs="true" islongtable="true" longtabularalignment="center">
<column alignment="center" valignment="top" width="2.5cm">
<column alignment="right" valignment="top" width="7cm">
<column alignment="center" valignment="top" width="3cm">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
command
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
example
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
הסבר
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\bar under
פעולות כלליות
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
set
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

set name 
\begin_inset Quotes eld
\end_inset

David
\begin_inset Quotes erd
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
הכנסת "רשומה"
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
get
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

get name
\begin_inset Newline newline
\end_inset


\begin_inset Quotes eld
\end_inset

David
\begin_inset Quotes erd
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
קבלת "רשומה
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
getset
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

 getset name 
\begin_inset Quotes eld
\end_inset

Dan
\begin_inset Quotes erd
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Quotes eld
\end_inset

David
\begin_inset Quotes erd
\end_inset


\lang hebrew
)בגלל ה 
\begin_inset Formula $get$
\end_inset

( 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
קבלת רשומה ועדכונה
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
mset/mget
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

set name 
\begin_inset Quotes eld
\end_inset

Dan
\begin_inset Quotes erd
\end_inset

 pass 
\begin_inset Quotes eld
\end_inset

aaa
\begin_inset Quotes erd
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
השמה/קבלה של מספר רכיבים
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
del
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
del name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
מחיקה
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
exist
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

 exist name
\begin_inset Newline newline
\end_inset

0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
קיים 
\begin_inset Formula $1$
\end_inset

 אחרת
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
0
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
incr
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

 SET bottles 5 
\begin_inset Formula $\vartriangleright$
\end_inset


\bar under
INCR
\bar default
 bottles
\begin_inset Newline newline
\end_inset

(integer) 6 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
כמו
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
x++
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
INCRBY key x
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

INCRBY bottles -3
\begin_inset Newline newline
\end_inset

(integer) 3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
כמו
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
x+= 3
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
expire
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

EXPIRE user:302 100
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ימחק לאחר
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
100
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
שניות
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\bar under
\lang english
Hashes
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
hmset
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

HMSET user:302 degree 3 gender "female"
\begin_inset Newline newline
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
יצירת 
\begin_inset Formula $user:302$
\end_inset

 כ
\begin_inset Formula $HashMap$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
hset
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

HSET user:302 last_name "Cohen"
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
עדכון ערך יחיד
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
hgetall
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

HGETALL user:302
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
קבלת כל 
\begin_inset Formula $user:302$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
hmget
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
קבלת מספר ערכים
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
hget
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

HGET user:302 first_name
\begin_inset Newline newline
\end_inset

"Tamar"
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
קבלת ערך יחיד
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
hexsit
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

hexsit user:302 address
\begin_inset Newline newline
\end_inset

0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
האם קיים
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\bar under
\lang english
lists
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Rpush
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
RPUSH user:571:items "chair" "table" "water"
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
מוסיף לסוף
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Lpush
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
LPUSH user:571:items "cup"
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
מוסיף להתחלה
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
lrange
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

 LRANGE user:571:items 1 2
\begin_inset Newline newline
\end_inset

(1) 
\begin_inset Quotes eld
\end_inset

chair" (2) "table"
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
מחזיר את הערכים שבטווח.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
 LRANGE user:571:items 0 -1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
מחזיר מהראשון עד האחרון )
\begin_inset Formula $-2$
\end_inset

 יחזיר עד לפני אחרון, וכו'(
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
lpop/rpop
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

LPOP user:571:items
\begin_inset Newline newline
\end_inset


\begin_inset Quotes eld
\end_inset

cup
\begin_inset Quotes erd
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
שולף את הראשון
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\bar under
\lang english
Sets
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
sadd
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
SADD mySet x y
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
סט עם ערכים 
\begin_inset Formula $x,y$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
srem
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
SREM mySet y 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
מחיקת הערך 
\begin_inset Formula $y$
\end_inset

 מהסט
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
sismember
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
SISMEMBER mySet y
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
האם שייך לסט
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
smember
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
מחזיר את מה שבסט
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
SUNIOUN
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
מחזיר את איחוד הסטים
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ZADD x val y 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
(add item y with score val to sorted set x)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ZRANGE x y z 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
(return z items from x, starting at y)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\bar under
\begin_inset Formula $SET,GET,DEL$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $get$
\end_inset

 על מפתח לא קיים
\end_layout

\begin_deeper
\begin_layout Standard

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

GET "world" 
\end_layout

\begin_layout Standard

\lang english
(nil)
\end_layout

\end_deeper
\begin_layout Itemize
נהוג להכניס את הערך עם ה 
\begin_inset Formula $id$
\end_inset

 + אפשר להכניס 
\begin_inset Formula $string$
\end_inset

 מורכבים
\end_layout

\begin_deeper
\begin_layout Standard

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

 SET user:1001 "<user><first_name>Joel</first_name> <last_name>Cohen</last_name>
</user>" 
\end_layout

\begin_layout Standard

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

GET user:1001
\end_layout

\begin_layout Standard

\lang english
"<user><first_name>Joel</first_name><last_name>Cohen</last_name> </user>"
 
\end_layout

\end_deeper
\begin_layout Standard

\bar under
\begin_inset Formula $INCER,INCRBY$
\end_inset

 :
\end_layout

\begin_layout Itemize
\begin_inset Formula $incr$
\end_inset

 לא על 
\begin_inset Formula $integer$
\end_inset

 :
\end_layout

\begin_layout Standard

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

INCR name1 
\end_layout

\begin_layout Standard

\lang english
(error) ERR - can't increment string
\end_layout

\begin_layout Standard

\bar under
קבלת 
\begin_inset Formula $KEYS$
\end_inset

 על ידי 
\begin_inset Formula $pattern$
\end_inset


\end_layout

\begin_layout Standard
נניח שיש לנו רשימה של 
\begin_inset Formula $user:1000,user:1001,user:1002,....$
\end_inset


\end_layout

\begin_layout Standard
ניתן לרשום:
\end_layout

\begin_layout Standard

\lang english
\begin_inset Formula $\vartriangleright$
\end_inset

Keys user:100?
\end_layout

\begin_layout Standard

\lang english
1) 
\begin_inset Quotes erd
\end_inset

user:1000
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard

\lang english
2)
\begin_inset Quotes erd
\end_inset

user:1001
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard

\lang english
3) 
\begin_inset Quotes erd
\end_inset

user:1003
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard

\lang english
...
\end_layout

\begin_layout Standard
ואם נרשום:
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
Keys user:*
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
, נקבל את כל המפתחות עם 
\begin_inset Formula $user$
\end_inset

 
\end_layout

\begin_layout Subsection
\begin_inset Formula $\boldsymbol{cassandra}$
\end_inset

 
\end_layout

\begin_layout Standard
לב הרעיון, שיותר חשוב לנו לקרוא מידע מהר, מאשר לכתוב אותו מהר.
\end_layout

\begin_layout Itemize
לקסנדרה יש מנגנון
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
replicition
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
- ש"מגבה" לנו את המידע" באופן חסכוני במקום
\end_layout

\begin_layout Itemize
ה
\lang english
syntax
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
מאוד דומה ל
\lang english
sql
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
, עם הגבלות : אין 
\begin_inset Formula $join$
\end_inset

 ואין 
\begin_inset Formula $nested-queries$
\end_inset

 , נקרא 
\begin_inset Formula $cql$
\end_inset

 
\end_layout

\begin_layout Itemize
למשל חיפוש שלא לפי מפתח מצריך בקשת
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
allow
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
ומאוד לא מומלץ להתשמש בזה )צריך לזכור שמדובר ב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
big data
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
(
\end_layout

\begin_layout Itemize
בחיפוש חייבים לתת את ה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
partition key
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
במלואו ולהתייחס אליו עם =
\end_layout

\begin_layout Itemize
ה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
clustring key
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
יכול לקבל אי-שיוון וגם זה מהסוף להתחלה
\end_layout

\begin_layout Standard
תכונות:
\end_layout

\begin_layout Itemize
\begin_inset Formula $No-fixed-shcema$
\end_inset

 :ל
\begin_inset Formula $cassndra$
\end_inset

 אין 
\begin_inset Formula $schame$
\end_inset

 ולכן אורך השורות בטבלה לא חייב להיות זהה
\end_layout

\begin_layout Itemize
\begin_inset Formula $eventually-consistent$
\end_inset

 , בזמן נתון יכול להיות שהמידע לא יהיה זהה בכל ה
\begin_inset Formula $raplica$
\end_inset

של הטבלאות.
\end_layout

\begin_layout Itemize
\begin_inset Formula $partition\ key$
\end_inset

 - מגדיר את ה 
\begin_inset Formula $node$
\end_inset

 ב 
\begin_inset Formula $cluster$
\end_inset

 כאשר ניגשים ל"שורה"
\end_layout

\begin_layout Itemize
\begin_inset Formula $clustering\ column$
\end_inset

 - מגדירה את הסדר בו השורות מאוחסנות
\end_layout

\begin_layout Itemize
\begin_inset Formula $Nodes$
\end_inset

 - 
\begin_inset Formula $server$
\end_inset

 ב 
\begin_inset Formula $cassandra\ cluster$
\end_inset

 נקרא 
\begin_inset Formula $node$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $Wide-Column-Store$
\end_inset

 
\end_layout

\begin_layout Itemize
כל 
\begin_inset Formula $key$
\end_inset

 מזוהה עם שורה בעלת מספר אלמנטים.
 לכן ניתן לזה כאל מילון, 
\begin_inset Formula $key$
\end_inset

 מפנה לערכים שלו.
\end_layout

\begin_layout Itemize
לכן ניתן להסתכל על זה כעל מעין טבלה, אך בפועל כל 
\begin_inset Formula $key$
\end_inset

 מחזיק מספר משתנה של עמודות
\end_layout

\begin_layout Standard
\begin_inset Formula $RMDB-Habit$
\end_inset

 
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="8" columns="2">
<features booktabs="true" tabularvalignment="middle">
<column alignment="center" valignment="top" width="8cm">
<column alignment="center" valignment="top" width="8cm">
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
Cassandra 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
RDBMS
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Cassandra is used to deal with unstructured data.
 
\begin_inset Newline newline
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
RDBMS is used to deal with structured data.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Cassandra has flexible schema.
 
\begin_inset Newline newline
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
RDBMS has fixed schema.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
In Cassandra, a table is a list of "nested key-value pairs".
 (Row x Column Key x Column value) 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
In RDBMS, a table is an array of arrays.
 (Row x Column)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
In Cassandra, keyspace is the outermost container which contains data correspond
ing to an application.
 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
In RDBMS, database is the outermost container which contains data corresponding
 to an application.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
In Cassandra, tables or column families are the entity of a keyspace.
 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
In RDBMS, tables are the entities of a database.
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
In Cassandra, row is a unit of replication
\begin_inset Newline newline
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
.
 In RDBMS, row is an individual record.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
In Cassandra, relationships are represented using collections.
 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
In RDBMS, there are concept of foreign keys, joins etc.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center

\lang english
from: https://www.javatpoint.com/rdbms-vs-cassandra
\end_layout

\begin_layout Itemize
בעקרון 
\begin_inset Formula $RMND$
\end_inset

 נרצה שב
\begin_inset Formula $db$
\end_inset

 נכתוב מה שפחות )ונחסוך זכרון(, ב 
\begin_inset Formula $cassandra$
\end_inset

 נעדיף לכתוב יותר על מנת לקרוא מהר
\end_layout

\begin_layout Itemize
ב
\begin_inset Formula $RMDB$
\end_inset

 נרצה שב
\begin_inset Formula $db$
\end_inset

 לא יהיו כפילויות, ב 
\begin_inset Formula $cassandra$
\end_inset

 בכוונה משכפלים 
\begin_inset Formula $\left(replication\right)$
\end_inset

 על מנת לקרוא מהר.
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $partition\ key$
\end_inset

 
\end_layout

\begin_layout Itemize
יכול לכלול יותר מ"עמודה" אחת
\end_layout

\begin_layout Itemize
תהליך עדכון מידע: מחפשים את ה
\begin_inset Formula $partition\ key$
\end_inset

 ב
\begin_inset Formula $hashMap$
\end_inset

 
\begin_inset Formula $\leftarrow$
\end_inset

 מעדכנים את המידע ב 
\begin_inset Formula $node$
\end_inset

 שהתקבל )וב 
\begin_inset Formula $replicas$
\end_inset

 שלו(
\end_layout

\begin_layout Itemize
בחיפוש חובה לציין את 
\series bold
כל
\series default
 ה 
\begin_inset Formula $partition\ key$
\end_inset

 )אלא אם בקשנו את כל הטבלה( -בשביל ש
\begin_inset Formula $cassandra$
\end_inset

 תדע היכן לחפש.
\end_layout

\begin_layout Standard
\begin_inset Formula $clustering\ key$
\end_inset

 
\end_layout

\begin_layout Itemize
כל מי שמגיע אחרי ה
\begin_inset Formula $partition$
\end_inset

 ב
\begin_inset Formula $parimary\,key$
\end_inset

 
\end_layout

\begin_layout Itemize
אחראים לסידור המידע ב"שורה"
\end_layout

\begin_layout Itemize
ברירת המחדל הוא בסדר עולה
\end_layout

\begin_layout Standard
פעולות
\end_layout

\begin_layout Itemize
\begin_inset Formula $top-level-space$
\end_inset

 נקרא 
\begin_inset Formula $KeySpace$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
כאשר נגדיר את ה 
\begin_inset Formula $Keyspace$
\end_inset

 נצטרך להגדיר גם אסטרטגית ה 
\begin_inset Formula $replication$
\end_inset

, ומס' העתקים
\end_layout

\begin_layout Itemize
\begin_inset Formula $'SimpleStrategy'$
\end_inset

- יוצר העתקים כמספר שצוין, עם מרכז אחד
\end_layout

\begin_layout Itemize
\begin_inset Formula $'NetworkTopologyStrategy'$
\end_inset

 - יוצר העתקים כמספר שצוין, אחך מחלק אותם במספר מרכזים.
\end_layout

\begin_layout Standard

\bar under
יצירת מסד נתונים :
\end_layout

\begin_layout LyX-Code

\lang english
CREATE 
\series bold
KEYSPACE
\series default
 university 
\end_layout

\begin_layout LyX-Code

\lang english
WITH REPLICATION = {'class':'SimpleStrategy', 'replication_factor':2};
\end_layout

\begin_layout Standard
הערות:
\end_layout

\begin_layout Itemize
\begin_inset Formula $'SimpleStrategy'$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 - מתאים ל 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
single data center only
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\end_layout

\begin_deeper
\begin_layout Itemize
בנוסף יש: 
\lang english
NetworkTopologyStrategy
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
, שמתאים למספר מרכזים?
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $'replication-factor$
\end_inset

: מספר השכפולים שנעשה
\end_layout

\end_deeper
\begin_layout Itemize
לא ניתן למיין את המידע בשאילתה, יש להגדיר את הסדר ביצירת הטבלה ע"י:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
WITH CLUSTERING ORDER BY (col ASC|DESC)
\end_layout

\begin_layout Standard
כעת נצור 
\bar under
טבלת 
\begin_inset Formula $students$
\end_inset

 :
\end_layout

\begin_layout LyX-Code

\lang english
USE university;
\end_layout

\begin_layout LyX-Code

\lang english
CREATE TABLE students 
\end_layout

\begin_layout LyX-Code

\lang english
(id INT 
\series bold
PRIMARY KEY
\series default
, firstName VARCHAR, lastName VARCHAR, age INT);
\end_layout

\begin_layout Itemize
חשוב להגדיר את ה 
\begin_inset Formula $key$
\end_inset

!
\end_layout

\begin_layout Itemize
\begin_inset Formula $varchar$
\end_inset

 כמו ב 
\begin_inset Formula $sql$
\end_inset

 רק שלא צריך להגדיר אורך
\end_layout

\begin_layout Standard

\bar under
דוגמה נוספת
\end_layout

\begin_layout LyX-Code

\lang english
CREATE TABLE crossfit_gyms_by_location(
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
country_code text, state_province text,
\end_layout

\begin_layout LyX-Code

\lang english
city text, gym_name text,
\end_layout

\begin_layout LyX-Code

\lang english
PRIMARY KEY (country_code, state_province, city, gym_name)
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
) WITH CLUSTERING ORDER BY (state_province ASC, city DESC, gym_name ASC);
\end_layout

\begin_layout Itemize
כפי שהסברנו , 
\begin_inset Formula $partition\ key$
\end_inset

 הוא 
\begin_inset Formula $country\_code$
\end_inset

 
\end_layout

\begin_layout Itemize
ה 
\begin_inset Formula $clustering$
\end_inset

 הם 
\begin_inset Formula $state,city,gum$
\end_inset

 על פי סדר זה, וכאשר נבקש את המידע נקבל אותו על פי:
\end_layout

\begin_deeper
\begin_layout Itemize
ה 
\begin_inset Formula $state$
\end_inset

 בסדר 
\series bold
עולה
\end_layout

\begin_layout Itemize
לאחריו ה 
\begin_inset Formula $city$
\end_inset

 בסדר 
\series bold
יורד
\end_layout

\begin_layout Itemize
ולאחריו 
\begin_inset Formula $gum\_name$
\end_inset

 בסדר 
\series bold
עולה
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
\begin_inset Formula $insert$
\end_inset

 :
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
INSERT INTO students (id, firstName, lastName, age) VALUES (111, 'Chaya',
 'Glass', 21);
\end_layout

\begin_layout Itemize
חובה 
\begin_inset Formula $single-quotes$
\end_inset

 
\begin_inset Formula $\left('Glass'\right)$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $select$
\end_inset

 :
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
SELECT * from students
\end_layout

\end_deeper
\begin_layout Itemize
כעת אם נבצע 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
SELECT * from students WHERE id=111
\end_layout

\begin_layout Standard
נקבל את 
\begin_inset Formula $'Chya\ Glass'$
\end_inset

 כרגיל, אבל אם נבצע: 
\end_layout

\begin_layout LyX-Code

\lang english
SELECT * from students WHERE lastname='Glass';
\end_layout

\begin_layout Standard
נקבל שגיאה, כיון ש 
\begin_inset Formula $cassandra$
\end_inset

 לא מסנן בכלל על בסיס הנתונים 
\series bold
אלא
\series default
 רק על ידי ה 
\begin_inset Formula $id$
\end_inset

 
\end_layout

\begin_layout Itemize
הערה - 
\bar under
וממש 
\series bold
לא
\series default
 מומלץ להשתמש: 
\bar default
להוסיף 
\begin_inset Formula $Allow-Filtering$
\end_inset

)בסוף השאילתה(
\end_layout

\end_deeper
\begin_layout Itemize
שגיאה נוספת:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
SELECT * from students WHERE id > 100;
\end_layout

\begin_layout Itemize
זהו ניסיון להשוות ביחס ל 
\begin_inset Formula $partition-key$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
באופן כללי ניתן לחשוב על חיפוש כחיפוש 
\begin_inset Formula $path$
\end_inset

 של קובץ, לכן, עבור:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
Table T with Primary keys: x as the partition key and y, z as clustering
 keys
\end_layout

\begin_layout Itemize

\bar under
שאילתות תקינות:
\end_layout

\begin_deeper
\begin_layout Standard
טווח רק בשלב האחרון - אם השאילתה תקינה, הסדר לא משנה
\end_layout

\begin_layout LyX-Code

\lang english
SELECT * FROM T WHERE x = 5;
\end_layout

\begin_layout LyX-Code

\lang english
SELECT * FROM T WHERE x = 5 AND y < 6 AND y > 0;
\end_layout

\begin_layout LyX-Code

\lang english
SELECT * FROM T WHERE x =2 AND z < 4 AND y = 3; 
\end_layout

\end_deeper
\begin_layout Itemize

\bar under
לא תקינות
\end_layout

\begin_deeper
\begin_layout Standard
לא על פי סדר + אסור לדלג
\end_layout

\begin_layout LyX-Code

\lang english
SELECT * FROM T WHERE y = 5;
\end_layout

\begin_layout LyX-Code

\lang english
SELECT * FROM T WHERE x = 5 AND z = 7
\end_layout

\begin_layout Standard
ניתן לחפש בטווח רק "בשלב האחרון":
\end_layout

\end_deeper
\begin_layout LyX-Code

\end_layout

\begin_layout LyX-Code

\lang english
SELECT * FROM T WHERE x = 5 AND y < 3 AND z > 0;
\end_layout

\begin_layout LyX-Code

\lang english
SELECT * FROM T WHERE x = 5 AND z = 4 AND y > 0; 
\end_layout

\end_deeper
\begin_layout Subsection
\begin_inset Formula $MongoDB$
\end_inset

 
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/t_5_1.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard

\bar under
\begin_inset Formula $use$
\end_inset

 
\bar default
- מחליף ל 
\begin_inset Formula $mydb$
\end_inset

 הדרוש, אם לא קיים יוצר כזה, למשל :
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
use University
\end_layout

\begin_layout Standard
ב
\begin_inset Formula $mongoDB$
\end_inset

 לטבלה קוראים 
\begin_inset Formula $collection$
\end_inset

 
\end_layout

\begin_layout Standard

\bar under
\begin_inset Formula $drop$
\end_inset

 
\bar default
- בשביל למחוק: 
\begin_inset Formula $db.dropDatabase()$
\end_inset

 
\end_layout

\begin_layout Standard

\bar under
\begin_inset Formula $create$
\end_inset


\bar default
 - 
\begin_inset Formula $collection$
\end_inset

 
\end_layout

\begin_layout Itemize
נצור על ידי הקריאה:
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
db.createCollection(
\begin_inset Quotes eld
\end_inset

students
\begin_inset Quotes erd
\end_inset

)
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
, המגדירה באופן אוטומטי את ה
\begin_inset Formula $collection$
\end_inset

 
\end_layout

\begin_layout Itemize
ניתן גם להגדיר מראש פרמטרים כך:
\end_layout

\begin_deeper
\begin_layout Standard

\lang english
db.createCollection("students", { capped : true, size : 6142800, max : 10000,
 autoIndexID : true } )
\end_layout

\begin_layout Itemize
\begin_inset Formula $capped$
\end_inset

 יוצר את 
\begin_inset Formula $room$
\end_inset

 
\bar under
ריק
\bar default
 ל
\begin_inset Formula $collection$
\end_inset

 - אם השתמשנו ב 
\begin_inset Formula $capped$
\end_inset

 אז חובה להגדיר 
\begin_inset Formula $size$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $size$
\end_inset

 בבתים 
\end_layout

\begin_layout Itemize
\begin_inset Formula $max$
\end_inset

 : של רשומות )סטודנטים(
\end_layout

\begin_layout Itemize
\begin_inset Formula $autoIndexID$
\end_inset

 - 
\begin_inset Formula $true$
\end_inset

 זו הברירת מחדל, כיון שהגדרנו את הגודל
\end_layout

\end_deeper
\begin_layout Standard

\bar under
\begin_inset Formula $insert$
\end_inset


\end_layout

\begin_layout LyX-Code

\lang english
db.students.insert({
\end_layout

\begin_layout LyX-Code

\lang english
"FirstName": "Chaya", 
\end_layout

\begin_layout LyX-Code

\lang english
"LastName": "Glass", 
\end_layout

\begin_layout LyX-Code

\lang english
"id": "111", 
\end_layout

\begin_layout LyX-Code

\lang english
"age": "21",
\end_layout

\begin_layout LyX-Code

\lang english
"Address": {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
"Street": "Hatamr 5",
\end_layout

\begin_layout LyX-Code

\lang english
"City": "Ariel",
\end_layout

\begin_layout LyX-Code

\lang english
"Zip": "40792"
\end_layout

\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}) 
\end_layout

\begin_layout Itemize
נשים לב שהפורמט הוא 
\begin_inset Formula $json$
\end_inset

 
\end_layout

\begin_layout Itemize
ניתן להכניס "רכיב בתוך רכיב" ) כמו ה 
\begin_inset Formula $Address$
\end_inset

 (
\end_layout

\begin_layout Itemize
הכנסה של כמה ביחד היא הכנסה של מערך ולכן צריך לעטוף ב
\begin_inset Formula $\left[\text{...,...}\right]$
\end_inset

 
\end_layout

\begin_layout Standard

\bar under
\begin_inset Formula $find()$
\end_inset


\end_layout

\begin_layout Itemize
חיפוש/קבלת כל הערכים ש:
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
db.students.find()
\end_layout

\begin_deeper
\begin_layout Itemize
הדפסה יפה: 
\lang english
db.students.find().pretty();
\end_layout

\end_deeper
\begin_layout Itemize
מציאת ערך מסוים: 
\lang english
db.students.find({
\begin_inset Quotes erd
\end_inset

FirstName
\begin_inset Quotes erd
\end_inset

: 
\begin_inset Quotes eld
\end_inset

Tal
\begin_inset Quotes erd
\end_inset

})
\end_layout

\begin_layout Itemize
רכיב בתוך רכיב: 
\lang english
db.students.find({
\begin_inset Quotes erd
\end_inset

Adress.
\series bold
City
\series default

\begin_inset Quotes erd
\end_inset

: 
\begin_inset Quotes eld
\end_inset

Ariel
\begin_inset Quotes erd
\end_inset

})
\end_layout

\begin_layout Itemize
\begin_inset Formula $and$
\end_inset

 : 
\lang english
db.students.find(
\series bold
$and:
\series default
 
\series bold
[
\series default
{
\begin_inset Quotes erd
\end_inset

FirstName
\begin_inset Quotes erd
\end_inset

: 
\begin_inset Quotes eld
\end_inset

Tal
\begin_inset Quotes erd
\end_inset

},{
\begin_inset Quotes erd
\end_inset

LastName
\begin_inset Quotes erd
\end_inset

: 
\begin_inset Quotes eld
\end_inset

Negav
\begin_inset Quotes erd
\end_inset

}
\series bold
]
\series default
)
\end_layout

\begin_deeper
\begin_layout Itemize
או בקיצור : 
\begin_inset Formula $[condition1,condtion2,...]$
\end_inset

 )בלי ה 
\begin_inset Formula $\$and$
\end_inset

 (
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $or$
\end_inset

 : 
\lang english
db.students.find(
\series bold
 $or
\series default
: [{"LastName":"Negev"},{"LastName":"Glow"}
\series bold
]
\series default
)
\end_layout

\begin_layout Itemize
כיצד נבקש:
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
Select FirstName From Students
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
?
\end_layout

\begin_deeper
\begin_layout Itemize
תשובה: 
\lang english
db.students.find({},{"FirstName":true, _id:false})
\end_layout

\begin_layout Itemize
הוספנו 
\begin_inset Formula $id:false$
\end_inset

 כיון ש 
\begin_inset Formula $mongoDb$
\end_inset

 נותן לאובייקט 
\begin_inset Formula $id$
\end_inset

 , ואותו אנחנו לא רוצים לקבל.
\end_layout

\end_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/t_5_2.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard

\bar under
\begin_inset Formula $update$
\end_inset

 :
\end_layout

\begin_layout Itemize
עדכון רגיל מתבצע כך:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
db.students.update({"FirstName":"Tom"}, 
\end_layout

\begin_layout LyX-Code

\lang english
{"FirstName" : "Tim",
\end_layout

\begin_layout LyX-Code

\lang english
"LastName": "Glow",
\end_layout

\begin_layout LyX-Code

\lang english
"Address" : {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
"Street" : "Mishmar 5", 
\end_layout

\begin_layout LyX-Code

\lang english
"City" : "Ariel" }
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
})
\end_layout

\begin_layout Standard
כלומר, תמצא את 
\begin_inset Formula $Tom$
\end_inset

 ותגדיר את הפרטים שלו כמצוין
\end_layout

\end_deeper
\begin_layout Itemize
על מנת לקצר אפשר לכתוב:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
db.students.update(
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
{"FirstName":"Tom"}, $set: {"FirstName" : "Tim"),{multi:true}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
)
\end_layout

\begin_layout Itemize
כאשר 
\begin_inset Formula $\$set$
\end_inset

 פרושו תשאיר את שאר השדות כפי שהיו
\end_layout

\begin_layout Itemize
\begin_inset Formula $multi:true$
\end_inset

 - על מנת שיעדכן את כל ה 
\begin_inset Formula $Tom$
\end_inset

 שאנחנו מכירים, אחרת יעדכן רק את הראשון שפוגש.
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $romove$
\end_inset

 
\end_layout

\begin_layout Standard
פורמט: 
\end_layout

\begin_layout LyX-Code

\lang english
db.COLLECTION_NAME.remove(DELETION_CRITERIA,1)
\end_layout

\begin_layout Itemize
\begin_inset Formula $DELETION\_CRITERIA$
\end_inset

 - מה למחוק
\end_layout

\begin_layout Itemize
\begin_inset Formula $1$
\end_inset

 - משתנה 
\begin_inset Formula $boolean$
\end_inset

, האם למחוק רק
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
)הראשון שמוצאים( או את כולם
\end_layout

\begin_layout Itemize
אם רוצים להגביל למחיקת של 
\begin_inset Formula $N$
\end_inset

 פרטים מוסיפים בסוף 
\begin_inset Formula $limit(N)$
\end_inset

 
\end_layout

\begin_layout Standard
דוגמה:
\end_layout

\begin_layout LyX-Code

\lang english
db.movies.remove(
\begin_inset Quotes eld
\end_inset

movie name
\begin_inset Quotes erd
\end_inset

:
\begin_inset Quotes erd
\end_inset

baby boss
\begin_inset Quotes erd
\end_inset

})
\end_layout

\begin_layout LyX-Code

\lang english
//
\end_layout

\begin_layout LyX-Code

\lang english
db.movies.remove(
\begin_inset Quotes eld
\end_inset

movie name
\begin_inset Quotes erd
\end_inset

:
\begin_inset Quotes erd
\end_inset

baby boss
\begin_inset Quotes erd
\end_inset

}).limit(10)
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout Standard

\lang english
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection*
פונקציות נוספות
\end_layout

\begin_layout Itemize
\begin_inset Formula $skip(k)$
\end_inset

 - דילוג על המסמך ה 
\begin_inset Formula $k$
\end_inset

 שמצאנו
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
db.movies.find({},{movie_name
\begin_inset Quotes erd
\end_inset

:1_id:0}).skip(5)
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $sort()$
\end_inset


\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
db.movies.find().sort({key_name:1})
\end_layout

\begin_layout Itemize
\begin_inset Formula $sort$
\end_inset

 מקבלת ערכים: 
\begin_inset Formula $ASC=1$
\end_inset

 , 
\begin_inset Formula $DESC=-1$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Subsection*
\begin_inset Formula $Map-Reduce$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $Mapper$
\end_inset

 - מחלק את המידע, מסנן, מריץ את התהליך
\end_layout

\begin_layout Itemize
\begin_inset Formula $Shufle\ and\ sort/Grouping$
\end_inset

 - ודוא שכל ה
\begin_inset Formula $workers$
\end_inset

 קיבלו 
\begin_inset Formula $data$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $Reduce$
\end_inset

 - עיבוד המידע שברשות ה 
\begin_inset Formula $worker$
\end_inset

 לקבלת התשובה הסופית
\end_layout

\begin_layout Standard

\bar under
דוגמה: מצא את הציונים המינימלים והמקסימלים לפי גיל סטודנט:
\end_layout

\begin_layout Itemize
\begin_inset Formula $Map$
\end_inset

 - נמפה ציון לגיל - ע"י הפונקציה 
\begin_inset Formula $emit()$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $Grouping$
\end_inset

 - כל 
\begin_inset Formula $worker$
\end_inset

 יקבל 
\begin_inset Formula $set$
\end_inset

 על פי הגיל
\end_layout

\begin_layout Itemize
\begin_inset Formula $Reduce$
\end_inset

 - כל 
\begin_inset Formula $worker$
\end_inset

 מוצא את ה 
\begin_inset Formula $min$
\end_inset

 וה
\begin_inset Formula $max$
\end_inset

 על פי הגיל.
\end_layout

\begin_layout Subsection
\begin_inset Formula $\boldsymbol{elastic\ search}$
\end_inset


\end_layout

\begin_layout Standard
נח לעבודה עם מסמכים וחיפוש על פי מילות מפתח )בגלל מנגנון ה 
\begin_inset Formula $scoring$
\end_inset

(
\end_layout

\begin_layout Itemize

\lang english
We will use curl for HTTP commands: basically GET, POST, PUT, HEAD and DELETE.
\end_layout

\begin_layout Itemize

\lang english
There is no need to create a Database) or a table, we can right away insert
 a document using commands
\end_layout

\begin_layout Itemize
לכן למשל הכנסת רשומה חדשה: 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
curl -XPUT "http://localhost:9200/university/students/111" -d "{
\end_layout

\begin_layout LyX-Code

\lang english
"FirstName": "Chaya", 
\end_layout

\begin_layout LyX-Code

\lang english
"LastName": "Glass",
\end_layout

\begin_layout LyX-Code

\lang english
"age": "21", 
\end_layout

\begin_layout LyX-Code

\lang english
"Address": {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
"Street": "Hatamr 5",
\end_layout

\begin_layout LyX-Code

\lang english
"City": "Ariel",
\end_layout

\begin_layout LyX-Code

\lang english
"Zip": "40792" }
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}"
\end_layout

\begin_layout Itemize
ב 
\begin_inset Formula $XPUT$
\end_inset

 מציינים את ה 
\begin_inset Formula $id$
\end_inset

 ,ב 
\begin_inset Formula $XPOST$
\end_inset

 - מייצר 
\begin_inset Formula $id$
\end_inset

 לבד
\end_layout

\end_deeper
\begin_layout Itemize
לקבלת מידע נשתמש ב 
\begin_inset Formula $XGET$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
curl -XGET "http://localhost:9200/university/students/333" {
\end_layout

\begin_layout LyX-Code

\lang english
"_index":"university","_type":"students","_id":"33 3","_version":1,"found":true,
 
\end_layout

\begin_layout LyX-Code

\lang english
"_source":{"FirstName": "Gadi", "LastName": "Golan", "age": "24"}}
\end_layout

\begin_layout Itemize
נשים לב שבשורה הראשונה מגיעים גם נתונים נוספים על החיפוש, ב 
\begin_inset Formula $Source$
\end_inset

 קיבלנו את המידע עצמו.
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $XHEAD$
\end_inset

 - בודק אם רשומה קיימת
\end_layout

\begin_layout Itemize
\begin_inset Formula $XDELETE$
\end_inset

 - מחיקת רשומה
\end_layout

\begin_layout Subsubsection*
חיפוש - 
\begin_inset Formula $\_search$
\end_inset

 
\end_layout

\begin_layout Itemize
כיצד נקבל את
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
select * from Students
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
?
\end_layout

\begin_deeper
\begin_layout Itemize
פתרון:
\lang english
 curl –XGET "http://localhost:9200/university/students/
\series bold
_search
\series default
" 
\end_layout

\end_deeper
\begin_layout Itemize
כיצד נקבל את
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
SELECT * FROM students WHERE LastName='Negev'
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
?
\end_layout

\begin_deeper
\begin_layout Itemize
פתרון: 
\lang english
curl -XGET "http://localhost:9200/university/students/_search? q=LastName:Negev"
\end_layout

\end_deeper
\begin_layout Subsubsection*
חיפוש מתקדם
\end_layout

\begin_layout Standard
נניח ויש לנו מסד נתונים 
\begin_inset Formula $bank$
\end_inset

 , עם טבלת 
\begin_inset Formula $account$
\end_inset

 שבה יש 
\begin_inset Formula $state,acount\_number,balance,first\_name,last\_name$
\end_inset

 ועוד
\end_layout

\begin_layout Standard
על מנת לקבל את
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
Select * from accounts where state=
\begin_inset Quotes erd
\end_inset

CA
\begin_inset Quotes erd
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
, נבצע:
\end_layout

\begin_layout LyX-Code

\lang english
GET bank/account/_search {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
"query
\begin_inset Quotes erd
\end_inset

: {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
\begin_inset Quotes eld
\end_inset

match
\begin_inset Quotes erd
\end_inset

: {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
"state
\begin_inset Quotes erd
\end_inset

 : 
\begin_inset Quotes eld
\end_inset

CA
\begin_inset Quotes erd
\end_inset


\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\begin_layout Itemize
זהו חיפוש פשוט על פי פרמטר אחד, כאשר 
\begin_inset Formula $match$
\end_inset

 לרוב מתאים לחיפוש על פי 
\begin_inset Formula $text$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $match,trm,range,exists,type...$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
על מנת לחפש על פי מספר דרישות, נשתמש ב 
\begin_inset Formula $bool$
\end_inset


\end_layout

\begin_layout Itemize
למשל עבור:
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
Select * from accounts where state=
\begin_inset Quotes erd
\end_inset

CA
\begin_inset Quotes erd
\end_inset

 and first_name=
\begin_inset Quotes erd
\end_inset

Jhon
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout LyX-Code

\lang english
GET bank/account/_search {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
"query
\begin_inset Quotes erd
\end_inset

: {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
\begin_inset Quotes eld
\end_inset

bool
\begin_inset Quotes erd
\end_inset

 {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
\begin_inset Quotes eld
\end_inset

must
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_layout LyX-Code

\lang english
[
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
{ 
\begin_inset Quotes eld
\end_inset

match
\begin_inset Quotes erd
\end_inset

: { "state
\begin_inset Quotes erd
\end_inset

 : 
\begin_inset Quotes eld
\end_inset

CA
\begin_inset Quotes erd
\end_inset

 }},
\end_layout

\begin_layout LyX-Code

\lang english
{ 
\begin_inset Quotes eld
\end_inset

match
\begin_inset Quotes erd
\end_inset

: { "first_name
\begin_inset Quotes erd
\end_inset

 : 
\begin_inset Quotes eld
\end_inset

Jhon
\begin_inset Quotes erd
\end_inset

 }}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
]
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\begin_layout Itemize
כאשר 
\begin_inset Formula $must$
\end_inset

 מתנהג כמו 
\begin_inset Formula $and$
\end_inset

 , ו 
\begin_inset Formula $should$
\end_inset

 מתנהג כמו 
\begin_inset Formula $or$
\end_inset

 , בנוסף יש 
\begin_inset Formula $filter$
\end_inset

 - שמסנן החוצה את כל מי שעומד בתנאי, 
\begin_inset Formula $must\_not$
\end_inset

 שמראה את שלילת התנאי.
\end_layout

\begin_layout Subsubsection*
\begin_inset Formula $Scoring$
\end_inset

 
\end_layout

\begin_layout Itemize
היחודיות של 
\begin_inset Formula $elastic-search$
\end_inset

 הוא באפשרות לדרג את התוצאות, )דבר שמתאים מאוד לחיפוש במסמכים(
\end_layout

\begin_layout Itemize
בשאילתות עם 
\begin_inset Formula $filter$
\end_inset

 או 
\begin_inset Formula $must\_not$
\end_inset

 אין 
\begin_inset Formula $scoring$
\end_inset

 )
\begin_inset Formula $score=0.0$
\end_inset

 (
\end_layout

\begin_layout Itemize
הדירוג יתבצע על פי מודל 
\begin_inset Formula $TF-RDF$
\end_inset

 שנלמד בהמשך
\end_layout

\begin_layout Itemize
בדוגמה הבאה ה 
\begin_inset Formula $boost:3$
\end_inset

 אומר שרשומות עם 
\begin_inset Formula $jhon$
\end_inset

 יקבלו ניקוד של פי שלוש לעומת רשומה עם 
\begin_inset Formula $"CA"$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
GET bank/account/_search {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
"query
\begin_inset Quotes erd
\end_inset

: {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
\begin_inset Quotes eld
\end_inset

bool
\begin_inset Quotes erd
\end_inset

 {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
\begin_inset Quotes eld
\end_inset

must
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_layout LyX-Code

\lang english
[
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
{ 
\begin_inset Quotes eld
\end_inset

match
\begin_inset Quotes erd
\end_inset

: { "state
\begin_inset Quotes erd
\end_inset

 : 
\begin_inset Quotes eld
\end_inset

CA
\begin_inset Quotes erd
\end_inset

 }},
\end_layout

\begin_layout LyX-Code

\lang english
{ 
\begin_inset Quotes eld
\end_inset

match
\begin_inset Quotes erd
\end_inset

: { "first_name
\begin_inset Quotes erd
\end_inset

 :{
\begin_inset Quotes erd
\end_inset

query
\begin_inset Quotes erd
\end_inset

: 
\begin_inset Quotes eld
\end_inset

Jhon
\begin_inset Quotes erd
\end_inset

,
\begin_inset Quotes erd
\end_inset

boost
\begin_inset Quotes erd
\end_inset

:3 }}}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
]
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout Itemize
כפי שאמרנו מאוד נח כאשר רוצים לחפש ביטוים במסמך, ניתן גם לבצע חיפוש מדויק
 על ידי החלפת 
\begin_inset Formula $match$
\end_inset

 ב 
\begin_inset Formula $match\_phrase$
\end_inset

 
\end_layout

\begin_layout Subsubsection
\begin_inset Formula $Tf-idf$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $Tf$
\end_inset

 - 
\begin_inset Formula $Term-Frequency$
\end_inset

.
 ספירה של כמה פעמים מילה מופיעה במסמך )משפט(, לעומת מספר המלים במסמר 
\begin_inset Formula $\frac{\left|\text{w in doc}\right|}{\left|\text{all doc }\right|}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $idf$
\end_inset

 - 
\begin_inset Formula $Inverse-Document-Frequency$
\end_inset

 .
 לוג של סך המסמכים )כל הקטלוג( חלקי מספר המסמכים בה המילה מופיעה )בקטלוג(
\end_layout

\begin_layout Standard
כלומר, נחלק זאת למספר פרמטרים ) 
\begin_inset Formula $d$
\end_inset

= מסמך יחיד, 
\begin_inset Formula $da$
\end_inset

= מסמך שמכיל מילה , 
\begin_inset Formula $doc$
\end_inset

 = כל המסמכים, 
\begin_inset Formula $Q$
\end_inset

 כל המילים ב 
\begin_inset Formula $d$
\end_inset

(:
\end_layout

\begin_layout Itemize
כמה פעמים מופיעה מילה במשפט 
\begin_inset Formula $tf=\frac{\#\text{ times q in d}}{\text{\# word in d}}$
\end_inset


\end_layout

\begin_layout Itemize
כמה פעמים מילה מופיעה בכל המסמכים שלנו 
\begin_inset Formula $df=\frac{\text{\#da have q}}{\#doc}$
\end_inset


\end_layout

\begin_layout Itemize
אנחנו רוצים להעלות את הדירוג של הנדירים: לכן ניקח את ההפוכה ונשים לוג: 
\begin_inset Formula $idf=\log\left(\frac{\#doc}{\text{\#da have q}}\right)$
\end_inset


\end_layout

\begin_layout Itemize
סהכ: 
\begin_inset Formula $\sum_{q=0}^{|Q|}\left(\frac{\#\text{ times q in d}}{\text{\# word in d}}\right)\log\left(\frac{\#doc}{\text{\#da have q}}\right)$
\end_inset


\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout Standard
למדנו שמאגר החיפוש מדרג את התוצאות, כיצד? לדוגמה
\end_layout

\begin_layout Standard

\lang english
Q: Who is the president of the united states?
\end_layout

\begin_layout Itemize

\lang english
D1: Donald Trump is 
\bar under
United
\bar default
 
\bar under
States
\bar default
’ 
\bar under
president
\bar default
.
\end_layout

\begin_layout Itemize

\lang english
D2: We are 
\bar under
the
\bar default
 most 
\bar under
united
\bar default
 out 
\bar under
of
\bar default
 all 
\bar under
the
\bar default
 people and 
\bar under
of
\bar default
 all 
\bar under
the
\bar default
 places.
\end_layout

\begin_layout Itemize

\lang english
D3: 
\bar under
The
\bar default
 
\bar under
United
\bar default
 
\bar under
States
\bar default
 
\bar under
of
\bar default
 America 
\bar under
is
\bar default
 united again, 
\bar under
who
\bar default
 
\bar under
is
\bar default
 more 
\bar under
united
\bar default
 than it?
\end_layout

\begin_layout Itemize

\lang english
D4: 
\bar under
Who
\bar default
 would like to take 
\bar under
the
\bar default
 box out 
\bar under
of
\bar default
 
\bar under
the
\bar default
 kitchen? 
\end_layout

\begin_layout Standard
נבנה טבלה, לפי המשפט שאנחנו מחפשים
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="9">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\boldsymbol{who}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\boldsymbol{is}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\boldsymbol{the}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\boldsymbol{President}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\boldsymbol{Of}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\boldsymbol{United}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\boldsymbol{State}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\boldsymbol{\#words}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\boldsymbol{D1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
6
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\boldsymbol{D2}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
15
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\boldsymbol{D3}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
14
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\boldsymbol{D4}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
11
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\boldsymbol{\#Doc}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
ּכעת על פי הנוסחה
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\sum_{q=0}^{|Q|}\left(\frac{\#\text{ times q in d}}{\text{\# word in d}}\right)\log\left(\frac{\#doc}{\text{\#da have q}}\right)$
\end_inset


\end_layout

\begin_layout Itemize

\lang english
Q1; 
\begin_inset Formula $\underbrace{0}_{who}+\underbrace{\frac{1}{6}\cdot\log\left(\frac{4}{2}\right)}_{is}+\underbrace{0}_{the}+\underbrace{\frac{1}{6}\cdot\log\left(\frac{4}{1}\right)}_{president}+\underbrace{0}_{of}+\underbrace{\frac{1}{6}\cdot\log\left(\frac{4}{3}\right)}_{United}+\underbrace{\frac{1}{6}\cdot\log\left(\frac{4}{1}\right)}_{state}=0.736$
\end_inset


\end_layout

\begin_layout Itemize

\lang english
Q2; 
\begin_inset Formula $\underbrace{0}_{who}+\underbrace{0}_{is}+\underbrace{\frac{3}{15}\cdot\log\left(\frac{4}{3}\right)}_{the}+\underbrace{0}_{president}+\underbrace{\frac{2}{15}\cdot\log\left(\frac{4}{3}\right)}_{of}+\underbrace{\frac{1}{15}\cdot\log\left(\frac{4}{3}\right)}_{United}+\underbrace{0}_{state}==0.166$
\end_inset


\end_layout

\begin_layout Itemize

\lang english
Q3,Q4........
\end_layout

\begin_layout Subsection*
מסדי נתונים גרפיים
\end_layout

\begin_layout Itemize
שומר את המידע כגרף
\end_layout

\begin_layout Itemize
מאפשר חיפושים לפי החיבורים חבר של חבר 
\begin_inset Formula $\left(foaf\right)$
\end_inset

 עד
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
10
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
רמות
\end_layout

\begin_layout Itemize
\begin_inset Formula $RDF$
\end_inset

 :
\end_layout

\begin_deeper
\begin_layout Itemize
מודל להעברת נתונים
\end_layout

\begin_layout Itemize
ניתן למזג בקלות נתונים, גם אם ה 
\begin_inset Formula $schemas$
\end_inset

 שלהם שונה
\end_layout

\begin_layout Itemize
תומך ב 
\begin_inset Formula $schemas$
\end_inset

 שהתפתחו בלי לעדכן את כל הנתונים
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $RDF-Triples$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
בשיטה זו יש "טבלה אחת" המכילה בדיוק שלושה חלקים
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $Subject\overset{predicate}{\longrightarrow}object$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/t_8_1.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/t_8_2.png
	scale 70

\end_inset


\end_layout

\begin_layout Subsection
\begin_inset Formula $ARQ/SPARQL$
\end_inset


\end_layout

\begin_layout Itemize
בקשת 
\begin_inset Formula $RDF$
\end_inset

 נקראת 
\begin_inset Formula $SPARQL$
\end_inset

 וממומשת ע"י 
\begin_inset Formula $ARQ$
\end_inset


\end_layout

\begin_layout Itemize
נלמד רק 
\begin_inset Formula $SELECT$
\end_inset

 
\end_layout

\begin_layout Itemize

\lang english
You can try SPARQL at: http://sparqlplayground.sib.swiss/ 
\end_layout

\begin_layout Standard
דוגמאות
\end_layout

\begin_layout Standard
נצייר חלק מה 
\begin_inset Formula $data$
\end_inset

 שלנו בגרף 
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_5_3.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize

\bar under
כעת אם נרצה את כל ה 
\begin_inset Formula $data$
\end_inset

 דבר השקול ל 
\begin_inset Formula $Select\ *$
\end_inset

 אז:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
SELECT * WHERE {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
?subject ?predicate ?object.
 }
\end_layout

\end_deeper
\begin_layout Standard
ונקבל:
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
subject 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
predicate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
object
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ttr:Eve 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
dbo:parent 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ttr:William
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ttr:Eve 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
dbp:birth
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Date "2006-11-03"
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\vdots$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ttr:John 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
tto:pet 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ttr:LunaCat
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\vdots$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset

 
\end_layout

\begin_layout Standard
\align center
כלומר את כל הקשרים בגרף.
\end_layout

\begin_layout Itemize
הערה: 
\begin_inset Formula $ttr,tto,dbo$
\end_inset

 הם כל מיני 
\begin_inset Formula $namespace$
\end_inset

 הרלוונטים ל 
\begin_inset Formula $data$
\end_inset

 , 
\begin_inset Formula $namespace$
\end_inset

נפוץ הוא 
\begin_inset Formula $foaf=friend-of-a-friend$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize

\bar under
אם נרצה את שמות כל האנשים )בנים ובנות(:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
SELECT ?something WHERE {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
?something rdf:type $dbo.Person.
 }
\end_layout

\end_deeper
\begin_layout Standard
נקבל: 
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="1">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
something
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ttr:Eve
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
 ttr:John 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ttr:William
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset

, נשים לב ש 
\begin_inset Formula $?something$
\end_inset

 הוא שם הטור שהתקבל
\end_layout

\end_deeper
\begin_layout Itemize

\bar under
אם נרצה את שמות כל ה
\series bold
נשים
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
SELECT ?women_name WHERE {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
?women_name rdf:type $dbo.Person.
\end_layout

\begin_layout LyX-Code

\lang english
?women_name tto:sex 
\begin_inset Quotes eld
\end_inset

famele
\begin_inset Quotes erd
\end_inset

.
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\begin_layout Itemize
כלומר מצא את הקודקוד שיש לו קשר ל 
\begin_inset Formula $person$
\end_inset

 ול 
\begin_inset Formula $female$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize

\bar under
האנשים שיש להם חתול
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
SELECT DISTINCT ?person WHERE {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
?person rdf:type $dbo:Person.
\end_layout

\begin_layout LyX-Code

\lang english
?person 
\bar under
tto:pet
\bar default
 ?
\series bold
pet
\series default
.
\end_layout

\begin_layout LyX-Code

\lang english
?
\series bold
pet
\series default
 rdf:type tto:Cat
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout Itemize

\bar under
האנשים ללא חתול
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
SELECT DISTINCT ?person WHERE {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
?person rdf:type $dbo:Person.
\end_layout

\begin_layout LyX-Code

\lang english
FILTER NOT EXISTS {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
$person 
\bar under
tto:pet/rdf:type
\bar default
 tto:Cat 
\end_layout

\end_deeper
\end_deeper
\begin_layout LyX-Code

\lang english
}}
\end_layout

\begin_layout Itemize
חסכנו שורה על ידי השרשור
\end_layout

\end_deeper
\begin_layout Itemize

\bar under
כלל ה 
\begin_inset Formula $Creatures$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
SELECT ?thing WHERE {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
{ ?thing a ?type .
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
{ ?type rdfs:subClassOf tto:Creature .} 
\end_layout

\begin_layout LyX-Code

\lang english
UNION 
\end_layout

\begin_layout LyX-Code

\lang english
{ 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
?type rdfs:subClassOf ?subcreature .
\end_layout

\begin_layout LyX-Code

\lang english
?subcreature rdfs:subClassOf tto:Creature .
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $a=ref:type$
\end_inset

 )קיצור(
\end_layout

\begin_layout Itemize
כלומר מצא את כל הבנים והנכדים של 
\begin_inset Formula $Creature$
\end_inset

.
 מה קורה אם יש "דור שלישי" ?
\end_layout

\begin_layout LyX-Code

\lang english
SELECT ?thing WHERE {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
{ ?thing a /rdf:subClassOf+ tto:Creatue }
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
)
\begin_inset Formula $+$
\end_inset

: 
\begin_inset Formula $x\geq1$
\end_inset

 , 
\begin_inset Formula $*$
\end_inset

: 
\begin_inset Formula $x\geq0$
\end_inset

 , 
\begin_inset Formula $?$
\end_inset

 : 
\begin_inset Formula $x=0|1$
\end_inset

 , כאשר 
\begin_inset Formula $x$
\end_inset

 מספר מופעים(
\end_layout

\begin_layout Subsection
\begin_inset Formula $Neo4J$
\end_inset

 
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_5_4.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
שפת השאילתות 
\begin_inset Formula $CQL-Cypher\ Query\ Language$
\end_inset

 
\end_layout

\begin_layout Itemize
ניתן לנסות: 
\lang english
http://console.neo4j.org/
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="13" columns="2">
<features booktabs="true" tabularvalignment="middle">
<column alignment="center" valignment="top" width="3cm">
<column alignment="center" valignment="top" width="13cm">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\bar under
\lang english
CQL
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\bar under
ֹ
\lang english
USAGE
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
CREATE
\begin_inset Newline newline
\end_inset

2 nodes:
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Create ( <node-name>:<label-name> { 
\begin_inset Newline newline
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset

<Property1-name>:<Property1-Value>, 
\begin_inset Newline newline
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset

........
 , 
\begin_inset Newline newline
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset

<PropertyN-name>:<PropertyN-Value> } )
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
create - relationship:
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Create (node1)-[:RelationshipType]->(node2) 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
create nodes + rel'
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Create (Koby)-[:married]->(Michal), 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
MATCH
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
MATCH (node:label) RETURN node
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
MATCH (node:label)-[: Relationship]->(n) RETURN n
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
RETURN
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Return query results 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
WHERE
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Provide conditions to filter retrieval data 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
DELETE
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Delete nodes and relationships 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
REMOVE
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Delete properties of nodes and relationships 
\begin_inset Newline newline
\end_inset

MATCH (node:label{properties .
 .
 .
 .
 .
 .
 .
 }) REMOVE node.property RETURN node
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
ORDER BY
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Sort retrieved data 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
SET
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Add or update labels
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Aggregation
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Count,Max,Min,Sum,Avg, Collect (return list of)
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Itemize
מחיקת כל הקודקודם והקשתות הקיימים:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
MATCH (n) OPTIONAL MATCH (n)-[r]-() DELETE n,r 
\end_layout

\end_deeper
\begin_layout Itemize
יצירת שני קודקודים )לא מחוברים(
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
Create 
\end_layout

\begin_layout LyX-Code

\lang english
(Michal:Person {name:'Michal', age: 36,gender:"female"}),
\end_layout

\begin_layout LyX-Code

\lang english
(Koby:Person {name:'Koby', age: 39,gender:"male"})
\end_layout

\end_deeper
\begin_layout Itemize
יצירת חיבור בין קודקודים )יעבוד רק אם יתבצע ביחד עם השאילתה הקודמת, כיון
 שאחרת צריך לקבל קודם את 
\begin_inset Formula $koby$
\end_inset

 ומ 
\begin_inset Formula $Michal$
\end_inset

( 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
Create (Koby)-[:married]->(Michal)
\end_layout

\end_deeper
\begin_layout Itemize
קבלת כל הקודקדים מסוג 
\begin_inset Formula $Person$
\end_inset

 :
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
MATCH (n:Person) 
\end_layout

\begin_layout LyX-Code

\lang english
RETURN n
\end_layout

\end_deeper
\begin_layout Itemize
קבלת 
\begin_inset Formula $person$
\end_inset

 מסוג זכר )ע"פ הקשר שלהם(
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
MATCH (p:Person {gender:"male"})-[:owner]->(n)
\end_layout

\begin_layout LyX-Code

\lang english
RETURN n.name
\end_layout

\end_deeper
\begin_layout Itemize
קבלת כל שמות בעלי החים של יואב
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
Match (a{name:'Yoav'})-->(b:Pet) RETURN b.name
\end_layout

\end_deeper
\begin_layout Itemize
כל הקשרים שיש לקובי )לא רק ישירים(:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
MATCH (a {name:'Koby'})-[*]-(b) RETURN DISTINCT b 
\end_layout

\end_deeper
\begin_layout Itemize
כל הקשרים מסוג 
\lang english
son
\lang hebrew
 ומסוג 
\lang english
married
\lang hebrew
: 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
MATCH (a)-[:son|:married]-(b) RETURN DISTINCT b
\end_layout

\end_deeper
\begin_layout Itemize
חיפוש לפי תכונות: קבלת כל ה
\begin_inset Formula $person$
\end_inset

 מסוג 
\begin_inset Formula $male$
\end_inset

 וגילם מעל 
\begin_inset Formula $18$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
MATCH (Person)
\end_layout

\begin_layout LyX-Code

\lang english
WHERE Person.gender = "male" AND Person.age>=18
\end_layout

\begin_layout LyX-Code

\lang english
RETURN Person
\end_layout

\end_deeper
\begin_layout Itemize
חיפוש לפי קשרים:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
MATCH (n)
\end_layout

\begin_layout LyX-Code

\lang english
WHERE (n)<-[:son]-({name: "Yoav"})
\end_layout

\begin_layout LyX-Code

\lang english
RETURN n
\end_layout

\end_deeper
\begin_layout Itemize
כעת, נוכל להוסיף קשרים על קודקים 
\series bold
קיימים:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
MATCH (a:Person),(b:Pet)
\end_layout

\begin_layout LyX-Code

\lang english
WHERE a.name = 'Tuti' AND b.name = 'Lassy'
\end_layout

\begin_layout LyX-Code

\lang english
CREATE (a)-[r1:likes]->(b)
\end_layout

\begin_layout Itemize
כלומר הוסף את הקשר
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
(Tuti)-[r1:likes]->(lassy)
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
מחיקת כל
\series default
 הקודקודים:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
MATCH (n) 
\series bold
detach delete
\series default
 n 
\end_layout

\end_deeper
\begin_layout Itemize
מחיקת קודקוד מסוים:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
MATCH {GoldenFishy:Pet {....} DETACH DELETE GoldenFishy
\end_layout

\end_deeper
\begin_layout Itemize
הוספת דור )
\begin_inset Formula $r1$
\end_inset

 (:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
Create(Eliezer:Person {name:'Eliezer', age:82,gender:"male"})
\end_layout

\begin_layout LyX-Code

\lang english
MATCH (a:Person),(b:Person) WHERE a.name = 'Eliezer' AND b.name = 'Koby' 
\end_layout

\begin_layout LyX-Code

\lang english
CREATE (a)-[
\series bold
r1
\series default
:father]->(b)
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
ממוצע
\series default
 גילאים:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
Match (n:Person) Return 
\series bold
avg
\series default
(n.age) 
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
רשימת
\series default
 כל הגילאים
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
Match (n:Person) Return 
\series bold
collect
\series default
(n.age)
\end_layout

\end_deeper
\begin_layout Itemize
קבלת 
\series bold
מסלול
\series default
 - קבלת כל המסלולים מאורך
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
עד
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
4
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
של קודקדים בקשר של 
\begin_inset Formula $knows$
\end_inset

 מ 
\begin_inset Formula $Gadi$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
MATCH p=(a {name:'Gadi Golan'})- [:KNOWS*2..4]->(b)
\end_layout

\begin_layout LyX-Code

\lang english
RETURN p
\end_layout

\end_deeper
\begin_layout Itemize
באותו מידה נוכל לבקש את 
\series bold
המסלול הקצר ביות
\series default
ר )מותר כל קשר מכל כיון( בין 
\begin_inset Formula $Tal$
\end_inset

 ל 
\begin_inset Formula $Gadi$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
MATCH p=
\series bold
shortestPath
\series default
((s1:student {name:'Gadi Golan'})-[*]-(s2:student {name:'Tal Negev'}))
\end_layout

\begin_layout LyX-Code

\lang english
RETURN p
\end_layout

\end_deeper
\begin_layout Itemize
קבלת שמות הסטודנטים שלומדים את 
\series bold
כל 
\series default
הקורסים
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
MATCH (c:course) 
\series bold
WITH
\series default
 COLLECT(c) AS courses 
\end_layout

\begin_layout LyX-Code

\lang english
MATCH (s:student) WHERE 
\series bold
ALL
\series default
 (x IN courses WHERE (s)-[:studies]->(x)) 
\end_layout

\begin_layout LyX-Code

\lang english
RETURN s.name
\end_layout

\end_deeper
\begin_layout Itemize
קבלת כל הסטודנטים שלומדים לפחות
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
4
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
קורסים
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
MATCH (s:student)-[:studies]->(c:course) 
\end_layout

\begin_layout LyX-Code

\series bold
\lang english
WITH 
\series default
s count(c) as num_courses WHERE num_courses <= 4
\end_layout

\begin_layout LyX-Code

\lang english
return s.name
\end_layout

\end_deeper
\begin_layout Standard

\lang english
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
\begin_inset Formula $Java\ Stream$
\end_inset

 
\end_layout

\begin_layout Standard
עיבוד מידע יכול להתבצע, ב
\begin_inset Formula $db$
\end_inset

 כמו ה 
\begin_inset Formula $stored\ procedures$
\end_inset

 ב 
\begin_inset Formula $SQL$
\end_inset

 או בקוד כמו 
\begin_inset Formula $javastream$
\end_inset

 , תוך הסתמכות על:
\end_layout

\begin_layout Itemize
\begin_inset Formula $lambda\ expressions$
\end_inset

 : פונקציות אנונימית.
 )נתמכת ב 
\begin_inset Formula $java\ 8$
\end_inset

 והלאה(
\end_layout

\begin_layout Itemize
\begin_inset Formula $Syntax$
\end_inset

 : 
\begin_inset Formula $\left(argumnet-list\right)->\left\{ body\right\} $
\end_inset

 
\end_layout

\begin_layout Itemize
דוגמאות: 
\end_layout

\begin_deeper
\begin_layout Standard

\numeric on
1
\numeric off
(
\end_layout

\begin_layout LyX-Code

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english
(x+y)->return x+y 
\end_layout

\begin_layout Standard

\numeric on
2
\numeric off
(
\end_layout

\begin_layout LyX-Code

\lang english
increment = x -> x + 1; System.out.println(increment.apply(5));
\end_layout

\begin_layout Standard
\align center

\lang english
print: 6
\end_layout

\end_deeper
\begin_layout Itemize
פונקציות ללא ארגומנט 
\begin_inset Formula $\left(Callable\right)$
\end_inset


\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
Callable<Integer> printAndReturn7 =
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
() -> {int x = 7; System.out.println(x); return x; }; 
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
System.out.println(printAndReturn7.call());
\end_layout

\end_deeper
\begin_layout Standard

\lang english
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsection
\begin_inset Formula $Stream$
\end_inset


\end_layout

\begin_layout Itemize
למעשה 
\begin_inset Formula $class$
\end_inset

 אבל לרוב לא נגדיר משתנה כזה
\end_layout

\begin_layout Itemize
זהו רצף של אלמנטים, שיוצרים מ 
\begin_inset Formula $array/collection$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $stream$
\end_inset

 מחזיר 
\begin_inset Formula $stream$
\end_inset

 
\end_layout

\begin_layout Itemize
ניתן "לבטל" את ה
\begin_inset Formula $stream$
\end_inset

 ע"י 
\begin_inset Formula $collect$
\end_inset

 
\end_layout

\begin_layout Itemize
פונקציות נפוצות: 
\begin_inset Formula $\text{filter,map,sort,reduce,fint,match }$
\end_inset


\end_layout

\begin_layout Standard
דוגמאות
\end_layout

\begin_layout Standard

\bar under
מיון מערך
\end_layout

\begin_layout LyX-Code

\lang english
List<String> myList = Arrays.asList("yes", "no", "hello", "goodbye", "none");
\end_layout

\begin_layout LyX-Code

\lang english
myList.stream().sorted().forEach((a)->System.out.println(a));
\end_layout

\begin_layout LyX-Code

\lang english
//or:
\end_layout

\begin_layout LyX-Code

\lang english
myList.stream().sorted().forEach(System.out::println); 
\end_layout

\begin_layout Standard

\bar under
חיפוש
\end_layout

\begin_layout Standard
\begin_inset Formula $classroom$
\end_inset

 הוא 
\begin_inset Formula $hashMap$
\end_inset

 מ
\begin_inset Formula $classrom$
\end_inset

 )שם כיתה ( ל 
\begin_inset Formula $List<Studnt>$
\end_inset

, 
\bar under
נרצה למצוא את הכיתות בהם יש סטודנטים שצריכים הנגשה )לנכים(
\end_layout

\begin_layout LyX-Code

\lang english
List<String> roomsReqAccess = classrooms.entrySet().stream() //
\family typewriter
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang hebrew
כל שורה הפוך ל 
\begin_inset Formula $stream$
\end_inset


\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
.filter(a->a.getValue().stream()
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
.anyMatch(x->x.reqAccesability)) //
\family typewriter
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang hebrew
סנן מכל שורה )ע"י 
\begin_inset Formula $stream$
\end_inset

( את מי שצריך הנגשה
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
.collect(Collectors.toList(c->c.getKey()));  //
\family typewriter
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang hebrew
אסוף חזרה לרשימה וקח את שם הכיתה
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $anyMatch$
\end_inset

 מחזיר 
\begin_inset Formula $true$
\end_inset

 ברגע שנמצא תלמיד "מתאים"
\end_layout

\begin_layout Itemize
הערה: התנאי ב
\begin_inset Formula $filter$
\end_inset

 הוא 
\series bold
מה שישאר.
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsection
\begin_inset Formula $Parallel-Execution$
\end_inset


\end_layout

\begin_layout Itemize
רווח נוסף היא האפשרות לנצל את המעבד , נשתמש כאשר:
\end_layout

\begin_deeper
\begin_layout Itemize
לא חשוב לנו סדר הפעולות בתהליך
\end_layout

\begin_layout Itemize
עיבוד כל חלק לוקח זמן לא מבוטל או שיש הרבה חלקים
\end_layout

\begin_layout Itemize
יש ברשותנו 
\begin_inset Formula $threads$
\end_inset

 זמינים
\end_layout

\end_deeper
\begin_layout Itemize
איך? נחליף את 
\begin_inset Formula $stream()$
\end_inset

 ב 
\begin_inset Formula $parallelStream()$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Standard
ספירת כמה מספרים ראשוניים יש במערך:
\end_layout

\begin_layout LyX-Code

\lang english
numberList.
\series bold
parallelStream
\series default
().filter(a ->naivePrimeTest(a)).count(); 
\end_layout

\end_deeper
\begin_layout Section
\begin_inset Formula $Numpy$
\end_inset

 
\end_layout

\begin_layout Standard
\align left
\begin_inset Graphics
	filename תמונות-מסדי/less_7_2.png
	scale 70

\end_inset


\begin_inset Graphics
	filename תמונות-מסדי/less_7_1.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
כשמערבבים 
\begin_inset Formula $types$
\end_inset

 , 
\begin_inset Formula $numpy$
\end_inset

 בוחר את המכנה המשותף הנמוך ביותר
\end_layout

\begin_layout Itemize
תומך במטריצות
\end_layout

\begin_layout Itemize
בדוגמה אנחנו עובדים עם מטריצה 
\begin_inset Formula $\left[\begin{matrix}3 & 7 & 5\\
4 & 1 & 2
\end{matrix}\right]$
\end_inset


\begin_inset Formula $dim(2\times3)\Leftarrow$
\end_inset


\end_layout

\begin_deeper
\begin_layout Enumerate
\begin_inset Formula $mat[0,:]$
\end_inset

 מביא את כל השורה הראשונה
\end_layout

\begin_layout Enumerate
\begin_inset Formula $mat[:,1]$
\end_inset

 מביא את כל העמודה השניה )אינדקס
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
(
\end_layout

\end_deeper
\begin_layout Itemize
פעולות אריתמטיות - כמו שאנחנו מכירים מאלגברה לינארית
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_7_4.png
	scale 70

\end_inset


\begin_inset Graphics
	filename תמונות-מסדי/less_7_3.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Section
\begin_inset Formula $Spark$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Formula $RDD-Resilinet-Distributed-Dataset$
\end_inset

 
\end_layout

\begin_layout Itemize
הגדרה: אוסף נתונים גמיש ומבוזר
\end_layout

\begin_layout Itemize
אוסיף יחידות או פריטים מקיימים ביניהם חוסר תלות ולכן ניתן לחשיוב מקבילי
 )לדוגמה שורות בקובץ(
\end_layout

\begin_layout Itemize
ב
\begin_inset Formula $Spark$
\end_inset

 אפשר לצור 
\begin_inset Formula $RDD$
\end_inset

 מרישמה קייימת .
\end_layout

\begin_layout Itemize
ניתן לבצע שרשרת של טרנספורמציות שכ"א תניב 
\begin_inset Formula $RDD$
\end_inset

 חדש.
 לבסוף נבצע איסוף למבנה נתונים פשוט ע"י 
\begin_inset Formula $collect()$
\end_inset

 
\end_layout

\begin_layout Itemize
יתרונותיו:
\end_layout

\begin_deeper
\begin_layout Itemize
מומלץ להריץ אותו על מספר מחשבים/מעבדים על מנת להשתמש בחישוב המקבילי
\end_layout

\begin_layout Itemize
עבור 
\begin_inset Formula $HDFS$
\end_inset

 = 
\begin_inset Formula $bigData$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $highly-Scalable$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
דוגמה:
\end_layout

\begin_layout Standard

\bar under
ספירת מילים בספר:
\end_layout

\begin_layout LyX-Code

\lang english
>>> text_file = sc.textFile("myDir/story.txt")
\end_layout

\begin_layout LyX-Code

\lang english
>>> word_counts =
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
text_file.flatMap(lambda line: line.split(" ")) 
\backslash

\end_layout

\begin_layout LyX-Code

\lang english
.map(lambda word: (word, 1))
\backslash

\end_layout

\begin_layout LyX-Code

\lang english
.reduceByKey(lambda a,b: a+b
\backslash

\end_layout

\begin_layout LyX-Code

\lang english
.collect()
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
>>> for word,count in word_counts:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
print("the word: 
\backslash
"%s
\backslash
" appears %d time(s)" %(word,count)) 
\end_layout

\end_deeper
\begin_layout Itemize

\lang english
flatMap maps every entry to a list, and then flattens the list back to an
 RDD (with possibly a longer length) 
\end_layout

\begin_layout Standard
המשך - אותה שאילתא עם מיון בסדר יורד של הופעות המילים תביא לנו:
\end_layout

\begin_layout LyX-Code

\lang english
>>> word_counts = (text_file.flatMap(lambda line: line.split(" ")) 
\backslash

\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
.map(lambda word: (word, 1)) 
\backslash

\end_layout

\begin_layout LyX-Code

\lang english
.reduceByKey(lambda a,b: a+b) 
\backslash

\end_layout

\begin_layout LyX-Code

\lang english
.
\series bold
map
\series default
(lambda xy: (xy[1],xy[0])) 
\backslash

\end_layout

\begin_layout LyX-Code

\lang english
.sortByKey(False)
\backslash
 #False is for descending order
\end_layout

\begin_layout LyX-Code

\lang english
.
\series bold
map
\series default
(lambda xy: (xy[1],xy[0])) 
\backslash

\end_layout

\begin_layout LyX-Code

\lang english
.collect()) 
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
>>> for word,count in word_counts[0:15]: 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
print("the word: 
\backslash
"%s
\backslash
" appears %d time(s)" %(word,count)) 
\end_layout

\end_deeper
\begin_layout Itemize
ביצענו פעמיים 
\begin_inset Formula $map$
\end_inset

 כדי למיין ע"פ 
\series bold
מספר 
\series default
ההופעות - היות ויש רק פונקציה 
\begin_inset Formula $srotByKey$
\end_inset

 - לכן החלפנו בין ה 
\begin_inset Formula $key$
\end_inset

 ל 
\begin_inset Formula $value$
\end_inset

 מיינו בסדר יורד - והחלפנו חזרה.
\end_layout

\begin_layout Itemize
על מנת לחסוך בזמן ריצה אפשר :
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
>>> text_file.cache()
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Formula $Bi-gram$
\end_inset

 
\end_layout

\begin_layout Itemize
בעיבוד שפות טבעיות, לרוב נתעניין בצמדי מילים 
\begin_inset Formula $(bi)$
\end_inset

 מאשר מילים בודות על מנת לגלות את משמעות הקובץ.
\end_layout

\begin_layout Itemize
\begin_inset Formula $tri-grams$
\end_inset

 הוא יצירת שלשות, 
\begin_inset Formula $n-gram$
\end_inset

 - 
\begin_inset Formula $n$
\end_inset

יות..
\end_layout

\begin_layout Itemize
פונקצייית 
\begin_inset Formula $zip$
\end_inset

 - של פייתון - מחזירה רשימה של 
\begin_inset Formula $tuples$
\end_inset

 משתי רשימות:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
>>> zip([1, 2, 3, 6], [10, 16, 23, 57]) = [(1,10), (2, 16), (3, 23), (6,
 57)] 
\end_layout

\end_deeper
\begin_layout Itemize
לכן על מנת לקבל את כל הזוגות:
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
def bigram(line):
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
words = line.split()
\end_layout

\begin_layout LyX-Code

\lang english
return 
\series bold
zip(words, words[1:])
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
ובאופן דומה למילים בודדות:
\end_layout

\begin_layout LyX-Code

\lang english
>pairs = text_file.flatMap(bigram)
\end_layout

\begin_layout LyX-Code

\lang english
>>>count = pairs
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
.map(lambda x: (x, 1))
\end_layout

\begin_layout LyX-Code

\lang english
.reduceByKey(lambda a, b: a + b)
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
>>>print(count.map(lambda xy: (xy[1],xy[0])).sortByKey(False).map(lambda xy:
 
\end_layout

\begin_layout LyX-Code

\lang english
(xy[1],xy[0])).collect()) 
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $Data-frame$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $Data-frame$
\end_inset

 דבר השווה לטבלאות של 
\begin_inset Formula $spark$
\end_inset

 ב 
\begin_inset Formula $rmdb$
\end_inset

 , ניתן לצור מ:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $relational-database,RDD,CSV,XML/JSON$
\end_inset


\end_layout

\begin_layout Itemize
וניתן להשמתש בשאילתות 
\begin_inset Formula $sql$
\end_inset

 לשם כך
\end_layout

\end_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_8_3.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
ניתן גם לייצא ולצור 
\begin_inset Formula $data-frame$
\end_inset

 מהפורמטים שהזכרנו - דוגמאות במצגת
\end_layout

\begin_layout Standard
ניתן גם להוסיף "עמודה" לטבלה:
\end_layout

\begin_layout LyX-Code

\lang english
df_students2 = 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
df_students.withColumn('age_plus_id', df_students.age + df_students.id) 
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
df_students2.show() 
\end_layout

\begin_layout Standard
דוגמה לשאילת 
\begin_inset Formula $sql$
\end_inset

 ב 
\begin_inset Formula $spark$
\end_inset

 )פשוט לרשום את השאילתה כ
\begin_inset Formula $string$
\end_inset

( :
\end_layout

\begin_layout LyX-Code

\lang english
df_students.registerTempTable("student_table") ending_with_n = 
\end_layout

\begin_layout LyX-Code

\lang english
sqlContext.sql("SELECT firstName, lastName, id 
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
FROM student_table WHERE lastName LIKE '%n'") 
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
ending_with_n.show
\end_layout

\begin_layout Itemize
דוגמה במצגת למימוש 
\begin_inset Formula $map-reduce$
\end_inset

 ב
\begin_inset Formula $mongoDb$
\end_inset

 למול 
\begin_inset Formula $RDD$
\end_inset

 ו 
\begin_inset Formula $data-frame$
\end_inset

 ב 
\begin_inset Formula $Spark$
\end_inset

 
\end_layout

\begin_layout Standard
\align center

\lang english
\begin_inset Graphics
	filename תמונות-מסדי/less_8_4.png
	scale 60

\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
עד כה עסקנו ב
\begin_inset Formula $data$
\end_inset

 קיימת, נרצה לפתח כלים ל 
\begin_inset Formula $Machine\ learning$
\end_inset

 
\end_layout

\begin_layout Subsection*
\begin_inset Formula $Machine\ Learning\ Introduction$
\end_inset


\end_layout

\begin_layout Subsubsection*
\begin_inset Formula $Train/Test\ Spilt$
\end_inset

 
\end_layout

\begin_layout Itemize
ראשית אנחנו צריכים לאמן את ה 
\begin_inset Formula $classifier$
\end_inset

 שלנו.
 לשם כך אנחנו צריכים 
\begin_inset Formula $data$
\end_inset

 שאנחנו יודעים בה הכל
\end_layout

\begin_layout Itemize
לכן נפצל את ה
\begin_inset Formula $data$
\end_inset

שקיימת ברשותנו ל 
\begin_inset Formula $train$
\end_inset

 , כדי לפתח את הכלי, ו 
\begin_inset Formula $test$
\end_inset

 , 
\begin_inset Formula $data$
\end_inset

 שעליה נבדוק אם הכלי שפתחנו עובד )בשלב השלישי נעבוד על 
\begin_inset Formula $data$
\end_inset

 בלי אפשרות לטסטים(
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Section
\begin_inset Formula $\text{Naïve Bayes}$
\end_inset


\end_layout

\begin_layout Standard

\series bold
חוק בייס
\series default
 : 
\begin_inset Formula $P(B)P(A|B)=P(B|A)P(A)$
\end_inset

 
\bar under
הוכחה + שקילות:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $P(B)P(A|B)\overset{\text{def}}{=}\frac{P(B)P(A\cap B)}{P(B)}=P(A\cap B)=\frac{P(A)P(A\cap B)}{P(A)}\overset{\text{def}}{=}P(B|A)P(A)\iff\frac{P(B)P(A|B)}{P(B|A)}=P(A)$
\end_inset


\end_layout

\begin_layout Itemize
נניח שיש לנו 
\begin_inset Formula $x_{1},x_{2},.....,x_{m}$
\end_inset

 
\begin_inset Formula $data$
\end_inset

 )הודעות למשל(
\end_layout

\begin_layout Itemize
נסמן את ה
\begin_inset Formula $Classifier$
\end_inset

 ב 
\begin_inset Formula $y_{1},..y_{s}$
\end_inset


\end_layout

\begin_layout Itemize
נרצה לנתח ולהבין מה 
\begin_inset Formula $class$
\end_inset

 של 
\begin_inset Formula $x_{m}$
\end_inset

 )את השאר אנחנו יודעים( אז אנחנו בעצם מחפשים את 
\begin_inset Formula $P\left(y=k|x_{m}\right)$
\end_inset

, לכל 
\begin_inset Formula $k\in\left[1,s\right]$
\end_inset

 וניקח את ההסתברות הגבוהה ביותר 
\begin_inset Formula $\left(argmax\right)$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
הערה: 
\begin_inset Formula $argmax$
\end_inset

 - הגורם שבעקבותיו התוצאה מקסימלית
\end_layout

\end_deeper
\begin_layout Itemize
על חוק בייס: ניתן לחשב : 
\begin_inset Formula $P\left(y=k|x_{m}\right)=\frac{P\left(y=k,x_{m}\right)}{p\left(x_{m}\right)}$
\end_inset


\end_layout

\begin_layout Itemize
בשיטה זו מניחים ש
\series bold
המאורעות בלתי תלוים - 
\series default
בדוגמת ההודעה המילים אינן תלויות אחת בשניה )במציאות זה לא ככה(
\end_layout

\begin_deeper
\begin_layout Itemize
על פי הגדרה חלוקת 
\begin_inset Formula $x_{t}$
\end_inset

 למאורעות זרים תוביל ל:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $p\left(x_{t},y=j\right)=p\left(y=j\right)p\left(x_{t1}|y=j\right)p\left(x_{t2}|y=j,x_{t_{1}}\right)p\left(x_{t3}|y=j,x_{t_{1}},x_{t_{2}}\right)....$
\end_inset


\end_layout

\begin_layout Itemize
מההנחה של 
\begin_inset Formula $naive\,bayes$
\end_inset

 המאורעות בת"ל ,ולכן מתקיים ש:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\overset{def}{=}p\left(y=j\right)p\left(x_{t1}|y=j\right)p\left(x_{t2}|y=j\right)p\left(x_{t3}|y=j\right)$
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\iff p\left(y=j\right)\prod\limits _{i=1}^{m}p\left(x_{i}|y=j\right)$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
כעת נחזור לחישוב שלנו:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Formula $P\left(y=k|x_{m}\right)=\frac{P\left(y=k,x_{m}\right)}{p\left(x_{m}\right)}=\frac{p\left(y=k\right)\prod\limits _{i=1}^{m}p\left(x_{i}|y=k\right)}{p\left(x_{m}\right)}$
\end_inset


\end_layout

\begin_layout Itemize
הערה: אנחנו מחפשים מקסימום, ומבצעים חישוב על כל הערכים האפשרים ל
\begin_inset Formula $y$
\end_inset

 , לכן החלוקה ב 
\begin_inset Formula $p\left(x_{m}\right)$
\end_inset

 לא משפיע על החישוב וניתן להזניח אותו
\end_layout

\end_deeper
\begin_layout Itemize
סה"כ:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Formula $y^{*}=\argmax p\left(y=k\right)\prod\limits _{i=1}^{n}p\left(x_{i}|y=k\right)$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
תוספת: באופן כללי הראנו שאנחנו רוצים למצוא למקסם את הסבירות של 
\begin_inset Formula $\prod\limits _{i=1}^{n}p\left(x_{i},y_{i}\right)$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
מכאן נובע שאם נחלק את מספר המופעים במספר ההודעות ב 
\begin_inset Formula $class$
\end_inset

 ,)ע"י משתנה מקרי( נקבל מדד יותר טוב בשבילנו, כלומר:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Formula $y^{*}=\argmax p\left(y=k\right)\prod\limits _{i=1}^{n}\frac{\text{num of msg in class k with word i}}{\text{num of msg in class k}}$
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $y^{*}=\argmax p\left(y=k\right)\prod\limits _{i=1}^{n}\frac{\sum\limits _{i=1}^{m}1\left\{ x_{ti}=1\land y_{y}=k\right\} }{\sum\limits _{i=1}^{m}1\left\{ y=k\right\} }$
\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
שורה תחתונה צריך לחשב:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $P_{tot}$
\end_inset

 = כמה משפטים סה"כ 
\end_layout

\begin_layout Itemize
\begin_inset Formula $P_{k}$
\end_inset

 = כמה משפטים סה"כ במחלקה ה 
\begin_inset Formula $K$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $P_{k_{i}}$
\end_inset

 = כמה משפטים במחלקה 
\begin_inset Formula $k$
\end_inset

 מכילים את המילה 
\begin_inset Formula $i$
\end_inset

 ב 
\begin_inset Formula $x$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Formula $y^{*}=\argmax\frac{p_{k}}{p_{tot}}\prod\limits _{i=1}^{n}\frac{p_{k_{i}}}{p_{k}}$
\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
חישובים כאלו קלאסיים לחישוב מקבילי 
\end_layout

\begin_layout Subsubsection*
דוגמה חיזוי 
\begin_inset Formula $Spam$
\end_inset

 
\end_layout

\begin_layout Standard
נניח שה
\begin_inset Formula $data$
\end_inset

 שברשתונו היא :
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="3">
<features booktabs="true" tabularvalignment="middle">
<column alignment="center" valignment="top" width="5cm">
<column alignment="center" valignment="top" width="5cm">
<column alignment="center" valignment="top" width="5cm">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
Spam:
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
Real (Non-Spam): 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
Test
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Buy it, pay later! Click me!
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Will See you later.
 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Are you paying too much? Click now!
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
 You Won 10000 Dollars! Click here!
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Will you want to meet later?  
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
I'm waiting for you.
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
ראשיתת נכניס את ה 
\begin_inset Formula $train$
\end_inset

 לטבלה:
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="11">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
Examples
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
are
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
 you 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
paying 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
too 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
much 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
?
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
click 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
now 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
!
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
Spam
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
2
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
Real
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
0
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
כעת נרצה לחשב על פי הנוסחה
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $y^{*}=\argmax\frac{p_{k}}{p_{tot}}\prod\limits _{i=1}^{n}\frac{p_{k_{i}}}{p_{k}}$
\end_inset


\end_layout

\begin_layout Standard
נשים לב שיש מכפלות , ולכן האפסים בעייתים, כי הם יאפסו את כל ה
\begin_inset Formula $\Pi$
\end_inset

 , לכן נשתמש ב 
\begin_inset Formula $Laplace's\ Smoothing$
\end_inset


\end_layout

\begin_layout Standard
ופשוט נוסיף לכל אחד
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 :
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="11">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
Examples
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
are
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
 you 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
paying 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
too 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
much 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
?
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
click 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
now 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
!
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
Spam
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
3
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\lang english
Real
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
1
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
ניתן לחשוב על זה כעל הוספת המשפטים משפט ריק ומשפט עם המילים שאנחנו מחפשים
 )לכן מתווסף
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
לסה"כ של כל 
\begin_inset Formula $class$
\end_inset

(
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $y^{*}=\argmax\frac{p_{k}+1}{p_{tot}+1\cdot K}\prod\limits _{i=1}^{n}\frac{p_{k_{i}+1}}{p_{k}+1\cdot K}$
\end_inset


\end_layout

\begin_layout Standard
\align center
)אצלנו 
\begin_inset Formula $K=2$
\end_inset

(
\end_layout

\begin_layout Standard
כעת:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $p\left(y=0\right)=\underbrace{\frac{3}{7}}_{\text{prob' to in spam }}\cdot\underbrace{\frac{1}{4}}_{\begin{matrix}\text{sum of sentences in class}\\
\text{+ 2 = lap' smo'}
\end{matrix}}\frac{2}{4}\frac{2}{4}\frac{1}{4}\frac{1}{4}\frac{1}{4}\frac{3}{4}\frac{1}{4}\frac{3}{4}=5.87\cdot10^{-5}$
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $p\left(y=1\right)=\underbrace{\frac{4}{7}}_{\text{prob' to in real }}\frac{1}{5}\frac{3}{5}\frac{1}{5}\frac{1}{5}\frac{1}{5}\frac{2}{5}\frac{1}{5}\frac{1}{5}\frac{1}{5}=2.35\cdot10^{-6}$
\end_inset


\end_layout

\begin_layout Standard
\align center
המקיסמום כאשר 
\begin_inset Formula $y=0$
\end_inset

 , לכן זוהי הודעה שנחשיב כ 
\begin_inset Formula $Spam$
\end_inset

 
\end_layout

\begin_layout Itemize
לרוב ניקח 
\begin_inset Formula $log$
\end_inset

 כדי לעבוד עם מספרים נוחים
\end_layout

\begin_layout Subsubsection
מדד סיווג )פונ' 
\begin_inset Formula $F-score$
\end_inset

 (
\end_layout

\begin_layout Standard
דוגמה
\end_layout

\begin_layout Standard
נניח ויש לנו תוכנה שחוזה עם אנשים בריאים או חולים, ומתקיים: 
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
חולה
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
בריא
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
קבע ש:
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $5\%$
\end_inset

 טעות
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
צודק
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
בריא באמת
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
צודק
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $0\%$
\end_inset

 טעות
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
חולה באמת
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
מבחינתנו זה בעייתי מאוד, כיון שלטעות באבחנה על אנשים חולים תגרום לכך שלא
 יקבלו טיפול - בעוד שטעות על בריאים בסה"כ תוביל לבדיקות מיותרות.
\end_layout

\begin_layout Standard
לכן נגדיר:
\end_layout

\begin_layout Standard
מהו 
\begin_inset Formula $classifier$
\end_inset

 טוב?
\end_layout

\begin_layout Itemize
\begin_inset Formula $Accuracy$
\end_inset

 - נכונות.
 כמות ההצלחות ביחס לכל החיזויים.
 
\begin_inset Formula $\frac{\text{true}}{\text{all}}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $Racll$
\end_inset

 : 
\begin_inset Formula $\frac{\text{hits from healthy}}{\text{how many healthy}}$
\end_inset

 - כמה צדקנו בתוך הקגטוריה )קבענו ש 
\begin_inset Formula $\cap$
\end_inset

 באמת הם 
\bar under
מתוך
\bar default
 כל הבאמת(
\end_layout

\begin_layout Itemize
\begin_inset Formula $Precision$
\end_inset

 : 
\begin_inset Formula $\frac{\text{hits from healthy}}{\text{how many we determine as healthy }}$
\end_inset

, כמה אנחנו מדויקים בקטגוריה )קבעענו ש 
\begin_inset Formula $\cap$
\end_inset

 באמת הם 
\bar under
מתוך
\bar default
 כל הקבענו ש(
\end_layout

\begin_layout Itemize
ואת הפונקציה 
\begin_inset Formula $F_{score}=\frac{2\cdot P\cdot R}{P+R}$
\end_inset

 
\end_layout

\begin_layout Standard

\bar under
תרגיל: נתון מדגם של 
\begin_inset Formula $100$
\end_inset

אנשים , כאשר 
\begin_inset Formula $60$
\end_inset

 בריאים, ו
\numeric on
40
\numeric off
 חולים
\end_layout

\begin_layout Itemize
ע"פ 
\begin_inset Formula $C_{1}$
\end_inset

 :
\end_layout

\begin_deeper
\begin_layout Itemize
מהבריאים הוא קבע ש: 
\begin_inset Formula $30$
\end_inset

 חולים, 
\begin_inset Formula $30$
\end_inset

 בריאים
\end_layout

\begin_layout Itemize
מחולים הוא קבע ש: 
\begin_inset Formula $35$
\end_inset

 חולים , 
\begin_inset Formula $5$
\end_inset

 בריאים
\end_layout

\end_deeper
\begin_layout Itemize
ע"פ 
\begin_inset Formula $C_{2}$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
מהבריאים הוא קבע ש: 
\begin_inset Formula $50$
\end_inset

 בריאים, 
\begin_inset Formula $10$
\end_inset

 חולים
\end_layout

\begin_layout Itemize
מהחולים הוא קבע ש: 
\begin_inset Formula $25$
\end_inset

 חולים, 
\begin_inset Formula $15$
\end_inset

 בריאים
\end_layout

\end_deeper
\begin_layout Itemize
למי יש 
\begin_inset Formula $score$
\end_inset

 גבוה יותר
\end_layout

\begin_layout Standard
נחשב את 
\begin_inset Formula $f_{scroe}\left(C_{1}\right)$
\end_inset

:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $F_{1}=\frac{2\cdot\frac{1}{2}\cdot\frac{39}{35}}{\frac{1}{2}+\frac{30}{35}}=\frac{12}{19}$
\end_inset


\begin_inset Formula $\Rightarrow$
\end_inset


\begin_inset Formula $R_{1}=\frac{30}{60},P_{1}=\frac{30}{35}$
\end_inset

 
\end_layout

\begin_layout Standard
נחשב את 
\begin_inset Formula $f_{scroe}\left(C_{2}\right)$
\end_inset

:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $R_{2}=\frac{50}{60},P_{2}=\frac{50}{65}=F_{1}=\frac{2\cdot\frac{5}{6}\cdot\frac{50}{65}}{\frac{5}{6}+\frac{50}{65}}=\frac{4}{5}$
\end_inset

 
\end_layout

\begin_layout Section
\begin_inset Formula $Linear\ Regression$
\end_inset

 
\end_layout

\begin_layout Standard

\bar under
למידה
\bar default
: ע"פ 
\begin_inset Formula $\left(x_{i},y_{i}\right)$
\end_inset

 :
\end_layout

\begin_layout Itemize
\begin_inset Formula $x_{i}$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 - הוא נתון בודד או מערך של פיצ'רים
\end_layout

\begin_layout Itemize
\begin_inset Formula $y_{i}$
\end_inset

 - הוא הערך המוצמד ל 
\begin_inset Formula $x_{i}$
\end_inset

 
\end_layout

\begin_layout Standard

\bar under
מבחן
\bar default
: מקבל 
\begin_inset Formula $x$
\end_inset

 צריך לחזות את 
\begin_inset Formula $y$
\end_inset

 )אצלנו תמיד 
\begin_inset Formula $y$
\end_inset

 ערך בודד(
\end_layout

\begin_layout Standard
איך נחזה? 
\end_layout

\begin_layout Standard
נגדיר 
\begin_inset Formula $Loss-f$
\end_inset

 : פונקציה המודדת את הטעות הממוצעת של המכונה )בהנחה ויש 
\begin_inset Formula $m$
\end_inset

 ערכים ל 
\begin_inset Formula $i$
\end_inset

(
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\frac{1}{m}\sum\limits _{i=1}^{m}\left|y-y_{i}\right|$
\end_inset


\end_layout

\begin_layout Standard
באופן כללי אם נמצא חיזוי כלשהו ל 
\begin_inset Formula $y$
\end_inset

 , כל שנותר לחפש זה את המינימום על 
\begin_inset Formula $f$
\end_inset

 
\end_layout

\begin_layout Standard
באופן פשוט נגדיר פונקציה לינארית 
\begin_inset Formula $y=wx+b$
\end_inset

 לחיזוי נאיבי
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_8_1.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
לכן:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $f(w,b)=\frac{1}{m}\sum\limits _{i=1}^{m}\left|wx_{i}+b-y_{i}\right|\Rightarrow J(w,b)=\frac{1}{2m}\sum\limits _{i=1}^{m}\left(wx_{i}+b-y_{i}\right)^{2}$
\end_inset


\end_layout

\begin_layout Itemize
על מנת למצוא מינמום 
\begin_inset Formula $min$
\end_inset

 צריך פונקציה גזירה וערך מוחלט אינה כזאת, לכן העלנו בריבוע שזו גם פונקציה
 שתמיד חיובית
\end_layout

\begin_layout Itemize
דוקא בריבוע ולא חזקה גבוה יותר, כי חזקה גבוה מגדילה מאוד את הטעויות 
\series bold
הגדולות
\series default
 , ומכאן שמקטינה את הערך של הטעויות הקטנות ודוקא אותם אנחנו רוצים לתפוס
\end_layout

\begin_layout Itemize
איך נדע שנקודת הקיצון היא מינימום? זו פרבולה צוחקת....
\end_layout

\begin_layout Itemize
חלוקה ב 
\begin_inset Formula $2m$
\end_inset

 על מנת לצמצם את את ה
\numeric on
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
בגזירה
\end_layout

\begin_layout Standard

\bar under
אלגוריתם )גרדינט(
\end_layout

\begin_layout Itemize
בחירה רנדומלית ל 
\begin_inset Formula $w,b$
\end_inset

 
\end_layout

\begin_layout Itemize
כעת נחשב את הגרדינט )גזירה על פי כל פרמטר:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\begin{matrix}J'_{w}=\frac{1}{m}\sum\limits _{i=1}^{m}x_{i}\left(wx_{i}-y_{i}\right)\\
J'_{b}=\frac{1}{m}\sum\limits _{i=0}^{n}1\cdot\left(h(x_{i})-y_{i}\right)
\end{matrix}$
\end_inset


\end_layout

\begin_layout Itemize
בחירה 
\begin_inset Formula $\alpha$
\end_inset

 )
\begin_inset Formula $learning\,rate$
\end_inset

 ( למשל 
\begin_inset Formula $0.01$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
עדכן את 
\begin_inset Formula $w=w-\alpha\frac{1}{m}\sum\limits _{i=0}^{n}x_{i}\left(h(x_{i})-y_{i}\right)$
\end_inset

 
\end_layout

\begin_layout Itemize
עדכן את 
\begin_inset Formula $b=b-\alpha\frac{1}{m}\sum\limits _{i=0}^{n}1\cdot\left(h(x_{i})-y_{i}\right)$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Standard
מה קורה כשיש כמה פיצ'רים? כלומר 
\begin_inset Formula $x_{i}=\left(x_{i1},x_{i2},...,x_{is}\right)$
\end_inset

 נגדיר את 
\begin_inset Formula $w=\left(w_{1},x_{2},...,x_{f}\right)$
\end_inset

 , לכן:
\end_layout

\begin_layout Itemize
עבור 
\begin_inset Formula $w$
\end_inset

: כל מכפלה של 
\begin_inset Formula $w\cdot x_{i}$
\end_inset

 היא בעצם מכפלה פנימית, ולבסוף )בגלל ה ש
\begin_inset Formula $x_{i}$
\end_inset

 הוא וקטור( נעדכן את הוקטור 
\begin_inset Formula $w$
\end_inset

 
\end_layout

\begin_layout Itemize
עבור 
\begin_inset Formula $b$
\end_inset

: נקבל מספר ונעדכן בהתאם
\end_layout

\begin_layout Standard
דרך נוספת ל"דייק" את החיזוי הוא על ידי הוספת חזקות כפיצרים, כלומר להגדיר:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $h(x)=\left(w_{1}x+x_{2}x^{2}+b\right)$
\end_inset


\end_layout

\begin_layout Itemize
בכך נצור עקומה בין הנקודות ולא קו ישר
\end_layout

\begin_layout Itemize
בדרך זו ניתן להוסיף עוד עוד חזקות ע"מ לדייק את החיזוי
\end_layout

\begin_layout Itemize
יש חשש ל
\begin_inset Formula $over-fitting$
\end_inset

 ולכן צריך להזהר
\end_layout

\begin_layout Section
\begin_inset Formula $Logistic\ Regression$
\end_inset


\end_layout

\begin_layout Standard
כאשר אנחנו רוצים חיזוי של כן ולא, נציב ע"י 
\begin_inset Formula $h(x)=\frac{1}{1+e^{-\left(Wx+b\right)}}$
\end_inset

 
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename תמונות-מסדי/less_8_2.png

\end_inset


\end_layout

\begin_layout Standard
\align center
המשמעות שלה היא החישוב 
\begin_inset Formula $P(y=1|x)$
\end_inset

 
\end_layout

\begin_layout Standard
כעת ה 
\begin_inset Formula $Loss-f$
\end_inset

 :
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $J\left(w,b\right)=-\frac{1}{m}\sum\limits _{i=1}^{m}\left(y_{i}\left(\log\left(h(x)\right)\right)+\left(1-y_{i}\right)\log\left(1-h(x)\right)\right)$
\end_inset


\end_layout

\begin_layout Standard
האלגורית )אותו דבר ה 
\begin_inset Formula $h$
\end_inset

 שונה(:
\end_layout

\begin_layout Itemize
בחירה 
\begin_inset Formula $\alpha$
\end_inset

 )
\begin_inset Formula $learning\,rate$
\end_inset

 ( למשל 
\begin_inset Formula $0.01$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
עדכן את 
\begin_inset Formula $w=w-\alpha\frac{1}{m}\sum\limits _{i=0}^{n}x_{i}\left(h(x_{i})-y_{i}\right)$
\end_inset

 
\end_layout

\begin_layout Itemize
עדכן את 
\begin_inset Formula $b=b-\alpha\frac{1}{m}\sum\limits _{i=0}^{n}1\cdot\left(h(x_{i})-y_{i}\right)$
\end_inset


\end_layout

\end_deeper
\end_body
\end_document
