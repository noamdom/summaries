#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass article
\begin_preamble
\usepackage{culmus}
\end_preamble
\use_default_options true
\maintain_unincluded_children false
\language hebrew
\language_package default
\inputencoding auto
\fontencoding global
\font_roman "cmr" "default"
\font_sans "cmss" "default"
\font_typewriter "cmtt" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures true
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing onehalf
\use_hyperref false
\papersize default
\use_geometry true
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification false
\use_refstyle 1
\use_minted 0
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 2cm
\topmargin 2cm
\rightmargin 2cm
\bottommargin 2cm
\headheight 2cm
\headsep 2cm
\secnumdepth 3
\tocdepth 3
\paragraph_separation skip
\defskip medskip
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\ec}[1][]{\overset{#1}{=}}
\end_inset


\begin_inset FormulaMacro
\newcommand{\indis}{indistinguishable}
\end_inset


\end_layout

\begin_layout Title
מערכות מבוזרות
\end_layout

\begin_layout Author
מרצה: פרופ' דן חפץ
\end_layout

\begin_layout Standard
\align center
סיכום זה מבוסס על המצגות והקלטות השיעורים, תודה גדולה לאביהוא אושרי על הצילומים.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\align center
יש לקחת בערבון מוגבל.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\align center
בהצלחה!!
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\align center

\size small
להערות/תיקונים - נעם דומוביץ 
\begin_inset Formula $0508752542$
\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less2_1.png
	scale 85

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Subsubsection*
מערכות מבוזרות - שיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
 
\end_layout

\begin_layout Section
הקדמה:
\end_layout

\begin_layout Standard
\paragraph_spacing onehalf
מערכות מבוזרות, מה זה? )הערה: מערכות מקביליות הן מקרי פרטי(
\end_layout

\begin_layout Itemize
\paragraph_spacing onehalf
מערכות מבוזורת מורכבות מאוסף של 'יחידות חישוב' )מחשבים, מעבדים וכד'(
\end_layout

\begin_layout Itemize
\paragraph_spacing onehalf
לכל יחידה יש אפשרות לפעילות עצמאית גם אם יש לנו מטרה משותפת.
\end_layout

\begin_layout Standard
\paragraph_spacing onehalf
למה? 
\end_layout

\begin_layout Itemize
\paragraph_spacing onehalf
היום כמעט הכל מבוזר, אינטרנט , מחשבים אישיים וכד'
\end_layout

\begin_layout Standard
\paragraph_spacing onehalf
יתרונות:
\end_layout

\begin_layout Itemize
\paragraph_spacing onehalf
שיתוף מידע
\end_layout

\begin_layout Itemize
\paragraph_spacing onehalf
חלוקת משאבי חישוב
\end_layout

\begin_layout Itemize
\paragraph_spacing onehalf
יצירת סניפים
\end_layout

\begin_layout Itemize
\paragraph_spacing onehalf
התמודדות טובה עם תקלות
\end_layout

\begin_layout Standard
\paragraph_spacing onehalf
מה מיוחד פה, הרי לכאורה למדנו כיצד להשתמש במחשב אחד וכעת בסה"כ "נכפיל" במספר
 המחשבים? תשובה: נדבר בעיקר על איך לצור את המערכת, בעיות סנכרון ועוד'
\end_layout

\begin_layout Standard
\paragraph_spacing onehalf
על כן הקורס עוסק בעיקר בתאוריה
\begin_inset Newline newline
\end_inset

הקורס הוא תיאורטי :
\end_layout

\begin_layout Itemize
פחות נתעסק ביעילות, לרוב נשאף לאלגוריתם שעובד
\end_layout

\begin_layout Standard
מערכות מבוזרות
\end_layout

\begin_layout Subsection
דרכי מידול:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less1_1.png
	scale 60

\end_inset


\end_layout

\begin_layout Enumerate
נייצג כל מחשב/מערכת כקודקוד - ו 
\begin_inset Formula $massage\ passing$
\end_inset

 - היכולת לתקשר בין קודקודים היא קשת בגרף
\end_layout

\begin_layout Enumerate
\begin_inset Formula $shared\ memory$
\end_inset

 - יחידת זיכרון משותפת, שכ
\begin_inset Quotes erd
\end_inset

א נכנס בתורו שיכול לקרוא
\end_layout

\begin_layout Subsubsection
\begin_inset Formula $massage\ passing$
\end_inset

 
\end_layout

\begin_layout Itemize
נח לתיאור מערכות גדולות
\end_layout

\begin_layout Itemize
נח לתיאור מערכות שמובססות על מעבר הודעות
\end_layout

\begin_layout Subsubsection
\begin_inset Formula $shared\ momory$
\end_inset

 
\end_layout

\begin_layout Itemize
נח לכתיבת קוד
\end_layout

\begin_layout Itemize
נח למודלים קטנים - למשל המחשב שלנו בעל
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
4
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
מעבדים, זה בעצם מערכת מבוזרות
\end_layout

\begin_layout Standard
כיצד נמדל אנחנו?
\end_layout

\begin_layout Itemize
הרעיון שזה לא משנה, כיוון שהם שקולים )בהקשר של נכונות, ליעילות יתכן שיהיה
 מודל עדיף(, ולכן נבחר בכל פעם את המודל הנח
\end_layout

\begin_layout Subsection
סנכרון
\end_layout

\begin_layout Itemize
\begin_inset Formula $Synchronous\ systems$
\end_inset

 : מערכת מסונכרת היא מערכת בעלת יחידת זמן הנקראות 
\begin_inset Formula $rounds$
\end_inset

 ונסמנם ב 
\begin_inset Formula $r$
\end_inset

 , ונגדיר את הזמנים 
\begin_inset Formula $0,1,2,...$
\end_inset

 כאשר 
\begin_inset Formula $Round$
\end_inset

 הוא הזמן שלוקח בין 
\begin_inset Formula $r-1$
\end_inset

 ל 
\begin_inset Formula $r$
\end_inset

 , וכולם יודעים מתי בדיוק מתחיל ונגמר 
\begin_inset Formula $round$
\end_inset

 )אין עיכובי שעון(
\end_layout

\begin_layout Itemize
\begin_inset Formula $Synchronous\ message\ passing$
\end_inset

: כאן נניח שבכל סיבוב כ
\begin_inset Quotes erd
\end_inset

א יכול לשלוח הודעות, וכאשר מישהו קיבל אז ישר הוא יכול לקרוא/לעבד וכו' ,
 ושליחה נוספת תתבצע בסיבוב הבא
\end_layout

\begin_deeper
\begin_layout Itemize
הערה: מניחים שכל ההודעות נשלחות בתחילת סיבוב ומגיעות בסוף סיבוב 
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $Synchronous\ shared\ memory:$
\end_inset

: בכל סיבוב כ
\begin_inset Quotes erd
\end_inset

א יכול לגשת לתא אחד בזכרון
\end_layout

\begin_layout Standard
מנגד:
\end_layout

\begin_layout Itemize
\begin_inset Formula $Asynchronous\ systems:$
\end_inset

 - כאשר אין סנכרון בכלל - זהו חוסר היכולת שלנו לתאם דבר בזמנים.
 כלומר , הזמן שלוקח לעשות משהו לא ידוע )זמן סופי(
\end_layout

\begin_deeper
\begin_layout Itemize
הדרך הנוחה להראות שה
\begin_inset Formula $wost-case$
\end_inset

 לא קורה היא להתמודד מול תסריט של 
\begin_inset Formula $adversary$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $Asynchronous\ message\ passing$
\end_inset

 : במודל הזה נניח שכל ההודעות מגיעות, רק לא ידוע מתי
\end_layout

\begin_layout Itemize
\begin_inset Formula $Asynchronous\ shared\ memory$
\end_inset

 : כל יכולים לגשת, רק לא ידוע מתי )למשל מעבד אחד נכנס אלף פעם ומונע ממעבד
 שתיים להכנס(
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
פחות רלוונטי לקורס שלנו , אבל בכל זאת נזכיר - ישנם מקרי אמצע, סנכרון חלקי:
\end_layout

\begin_layout Itemize
חסם עליון על העיקוב - )אצלנו פרושו שהמערכת מסונכרת, למרות חוסר היעילות(,
 וראציות שכן 
\begin_inset Quotes eld
\end_inset

מחלישות
\begin_inset Quotes erd
\end_inset

 את המודל:
\end_layout

\begin_deeper
\begin_layout Itemize
חסם עליון לא ידוע
\end_layout

\begin_layout Itemize
חסם עליון ידוע, אך לא ידוע מתי יתחיל
\end_layout

\end_deeper
\begin_layout Subsection
תקלות
\end_layout

\begin_layout Standard
סוגים:
\end_layout

\begin_layout Itemize
\begin_inset Formula $Crash$
\end_inset

 : קודקוד קרס, יקשה עלינו כשזה קורה באמצע סיבוב )למשל רצינו לשלוח הודעות
 לכולם , ולא ברור לנו מה הספיק לשלוח ומה לא(
\end_layout

\begin_layout Itemize
\begin_inset Formula $Byzantine$
\end_inset

 - קודקוד לא צפוי - עושה מה שבא לו.
 )איך זה קרה? למשל מתקפת סייבר( - מערכת שמתמודדת עם התסריט הזה עמידה בפני
 כל התקלות
\end_layout

\begin_layout Itemize
\begin_inset Formula $Omission$
\end_inset

- קודקוד הפסיק לעבוד באופן זמני
\end_layout

\begin_layout Itemize
מדד - לא תקלה : 
\begin_inset Formula $Resilience$
\end_inset

 )חוסן( - מהי רמת העמידות לקריסה של אחוז מסוים מהקודקודים.
\end_layout

\begin_layout Subsection
נכונות
\end_layout

\begin_layout Standard
פרמטרים/תכונות למערכת נכונה/טובה/עובדת:
\end_layout

\begin_layout Itemize
\begin_inset Formula $safety$
\end_inset

 - שלא גורמת לדברים רעים, לרוב נגדיר תסריטים שנרצה להמנע מהם
\end_layout

\begin_layout Itemize
\begin_inset Formula $liveness$
\end_inset

 - )משלים את 
\begin_inset Formula $safety$
\end_inset

( הצורך שתעשה משהו )הכי בטוח לא לעשות כלום(
\end_layout

\begin_layout Itemize
\begin_inset Formula $Fairness$
\end_inset

 - הוגנות - כולם יכולים להשתמש
\end_layout

\begin_layout Standard

\bar under
דוגמאות: 
\end_layout

\begin_layout Itemize
מערכת תשלומים
\end_layout

\begin_layout Itemize
מערכת רמזורים :
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $safety$
\end_inset

 - שלא יהיו שני ירוקים במקביל
\end_layout

\begin_layout Itemize
\begin_inset Formula $liveness$
\end_inset

 - שיהיה ירוק מתישהו
\end_layout

\begin_layout Itemize
\begin_inset Formula $fairness$
\end_inset

 - שיהיה ירוק לכולם
\end_layout

\end_deeper
\begin_layout Standard
פרמול מודל 
\begin_inset Formula $Message\ passing$
\end_inset

 :
\end_layout

\begin_layout Itemize
את הקודקודים נסמן ב 
\begin_inset Formula $v_{1},v_{2},...,v_{n}$
\end_inset

 )הנחה סמויה שידוע מה הוא 
\begin_inset Formula $n$
\end_inset

 (
\end_layout

\begin_layout Itemize
לכל קודקוד נסמן את המצב שלו ב 
\begin_inset Formula $Q_{i}$
\end_inset

 - יכיל את המידע הפנימי, והיסטוריית המאורעות
\end_layout

\begin_layout Itemize
המערכת מבוססת ארועים, כלומר זה מה שישנה את המצב 
\end_layout

\begin_deeper
\begin_layout Itemize
מצבים אפשרים 
\begin_inset Formula $send,receive,timing$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $Configuration\ C$
\end_inset

 וקטור 
\begin_inset Formula $C$
\end_inset

 המכיל את המצבים 
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $Execution-Fragment$
\end_inset

 : רצף של מאורעות וקונפיגורציות, לדוגמה:: 
\begin_inset Formula $c_{0},\Phi_{0},c_{1},\Phi_{1},...$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $Execution$
\end_inset

 - חייב להתחיל בקונפיגורציה
\end_layout

\begin_layout Itemize
\begin_inset Formula $Schedule$
\end_inset

 - כותבים רק את המאורעות - נח כיון שהמודל דטרמינסטי
\end_layout

\begin_layout Standard
הערות:
\end_layout

\begin_layout Itemize
\begin_inset Formula $Local-State$
\end_inset

 : לכל קודקוד יש רק את המידע שלו, למשל כאשר קודקוד א' שלח הודעה לקודקוד
 ב' אז משהו בקודקוד ב' אולי השתנה אבל קודקוד א' לא ידע מזה אל אם כן קודקוד'
 יידע אותו על כך.
\end_layout

\begin_layout Itemize
\begin_inset Formula $Adversary$
\end_inset

 : יכול ל
\begin_inset Quotes erd
\end_inset

תקוף
\begin_inset Quotes erd
\end_inset

 במסגרת המודל, למשל מודל ללא תקלות, לא יכול להחליט שקודקוד קרס
\end_layout

\begin_layout Itemize
שיעור אחד שיכלול הסתברות
\end_layout

\begin_layout Standard
\begin_inset Formula $Local\ schedules$
\end_inset

 
\end_layout

\begin_layout Itemize
נכתוב 
\begin_inset Formula $S=s_{13,}s_{23},s_{31,}r_{13},s_{32},r_{31},r_{23},s_{13},s_{21},r_{31},r_{12},r_{32}$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
אז 
\begin_inset Formula $s_{13}$
\end_inset

 פירושו 
\series bold
נשלחה
\series default
 הודעה מקודקוד 
\begin_inset Formula $1$
\end_inset

 לקודקוד
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\numeric off
 
\end_layout

\begin_layout Itemize
ו 
\begin_inset Formula $r_{31}$
\end_inset

 פירושו 
\series bold
התקבלה
\series default
 הודעה מקודקוד בקודקוד
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\end_layout

\end_deeper
\begin_layout Itemize
ושוב נעיר שכל קודקוד/מחשב מודע רק לארועים שקורים איתו , כלומר הודעות 
\series bold
שהוא
\series default
 שלח/קבל
\end_layout

\begin_layout Itemize
מבחינתנו סדר הארועים הוא לפי סדר הכתיבה, בלי חישיבות לזמן שעבר בינהם, נצייר:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less1_2.png
	scale 40

\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
משפט 
\begin_inset Formula $Indistinguishability$
\end_inset

 : יהיו 
\begin_inset Formula $S$
\end_inset

 ו 
\begin_inset Formula $S'$
\end_inset

 שני 
\begin_inset Formula $schedules$
\end_inset

 ויהיה 
\begin_inset Formula $v_{i}$
\end_inset

 קודקוד, נניח ש 
\begin_inset Formula $S|i=S'|i$
\end_inset

 וש
\begin_inset Formula $v_{i}$
\end_inset

 יש את אותו 
\begin_inset Formula $input$
\end_inset

 ב 
\begin_inset Formula $S,S'$
\end_inset

 אז 
\begin_inset Formula $v_{i}$
\end_inset

 יבצע את אותה פעולה ב 
\begin_inset Formula $S$
\end_inset

 וב 
\begin_inset Formula $S'$
\end_inset


\end_layout

\begin_layout Standard
הוכחה:
\end_layout

\begin_layout Itemize
המצב של 
\begin_inset Formula $v_{i}$
\end_inset

 תלוי ב 
\begin_inset Formula $S|i$
\end_inset

 , מהדטרמינסטיות הפעולה ישנה רק פעולה אפשרית אחת
\end_layout

\begin_layout Itemize
בנוסף נתון כי 
\begin_inset Formula $S|i=S'|i$
\end_inset

 
\end_layout

\begin_layout Standard
הערה :טריויאלי בעבור מחשב אחד, פה צריך לוודא שזה נכון גם בעבור מערכת מבוזרת
\end_layout

\begin_layout Standard
הגדרה נאמר ש
\begin_inset Formula $schedule$
\end_inset

 הוא 
\begin_inset Formula $admissible$
\end_inset

 )קביל( אם:
\end_layout

\begin_layout Enumerate
כל קודקוד יכול לבצע את הפעולה אינסוף פעמים )שהכוונה שהוא לא מנוע מלעשות
 משהו(
\end_layout

\begin_layout Enumerate
אם כל ההודעות מתקבלות גם אם מתעכבות זמן סופי
\end_layout

\begin_layout Standard
\begin_inset Formula $1$
\end_inset

 , 
\begin_inset Formula $2$
\end_inset

 הוא בעצם תנאים של 
\begin_inset Formula $fairness$
\end_inset

,
\end_layout

\begin_layout Standard
דוגמה 
\begin_inset Formula $client-server$
\end_inset

 - ה 
\begin_inset Formula $adversry$
\end_inset

 יכול רק לעכב ולא יכול למנוע הודעות מלהשלח
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Subsubsection*
שיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
- שני
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
4
\numeric off
/
\numeric on
11
\end_layout

\begin_layout Section
בעיות הסכמה - בעיית שני הגנרלים
\end_layout

\begin_layout Itemize
נניח שיש קרב בין שני צבאות
\end_layout

\begin_deeper
\begin_layout Itemize
הכחול - החזק יותר בעמדה נחותה
\end_layout

\begin_layout Itemize
האדום - חלש יותר - בעמדת יתרון
\end_layout

\end_deeper
\begin_layout Itemize
הצבא האדום ינצח רק אם יתקוף בצורה מתואמת בין כל הצבא
\end_layout

\begin_layout Itemize
לכן הם מנסים לתקשר בינהםת ולהחליט על שעה
\end_layout

\begin_layout Itemize
הצבא הכחול מצדו מנסה ליירט את ההודעות )יונים(, ומי ששלח הודעה לא יודע אם
 היא הגיעה
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less2_1.png
	scale 65

\end_inset


\end_layout

\begin_layout Standard
פורמלית -בגרף:
\end_layout

\begin_layout Itemize
שני קודקודים, סנכרוני
\end_layout

\begin_layout Itemize
קלט: 
\begin_inset Formula $0/1$
\end_inset

 )המייצג מתי לתקוף( לכל קודקוד יהיה מצב התחלתי כלשהו
\end_layout

\begin_layout Itemize
פלט: 
\begin_inset Formula $0/1$
\end_inset

 
\end_layout

\begin_layout Itemize
הסכמה: צריך ששניהם יפלטו
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
או
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
 
\end_layout

\begin_layout Itemize
\begin_inset Formula $Validity$
\end_inset

: תהיה הסכמה על הקלט - המטרה להפטר מהפתרון הטרוויאלי שבו שני הצדדים מראש
 החליטו רק אפס
\end_layout

\begin_layout Itemize
\begin_inset Formula $Termination$
\end_inset

 : ריצה בזמן סופי
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
בעיות שצצות:
\end_layout

\begin_layout Itemize
מה עושים כאשר הודעות אובדות?
\end_layout

\begin_layout Itemize
האם אפשרי לפתור זאת ללא הודעות אובדות?
\end_layout

\begin_layout Standard
למעשה, לבעיה אין פתרון, ואנו נוכיח זאת
\end_layout

\begin_layout Standard
נזכר במושג 
\begin_inset Formula $Indistinguishability$
\end_inset

 - הרצה 
\begin_inset Formula $E$
\end_inset

 )רצף מצבים ומאורעות( , והרצה 
\begin_inset Formula $E'$
\end_inset

 
\bar under
בלתי ניתנות להבחנה
\bar default
 אם בהנתן קודקוד 
\begin_inset Formula $v$
\end_inset

 לא מבדיל ביניהם כלומר עבור אותו קלט ואותו מאורעות יפלוט את אותה תוצאה.
 ונסמן זאת 
\begin_inset Formula $E|v=E'|v$
\end_inset

 
\end_layout

\begin_layout Standard
וכאשר ישנו קודקוד שלא מבחין בהבדל נאמר שההרצות דומות ונסמן 
\begin_inset Formula $E_{i}\sim_{v}E_{j}$
\end_inset

 
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard

\bar under
אבחנה
\bar default
: כל שתי הרצות צריכות לתת את אותם פלטים
\end_layout

\begin_layout Subsection
הוכחה שאין פתרון
\end_layout

\begin_layout Standard
כיצד?
\end_layout

\begin_layout Itemize
נניח בשלילה שיש אלגוריתם , ונריץ 
\begin_inset Formula $T$
\end_inset

סיבובים )אם האלגוריתם קצר מדי, נוסיף הודעות ריקות(.
\end_layout

\begin_layout Itemize
נניח שכל
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
הרצות עוקבות דומות
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
)ע
\begin_inset Quotes erd
\end_inset

פ האבחנה( כלומר לכל 
\begin_inset Formula $i\in\left\{ 1,....,k\right\} $
\end_inset

: 
\begin_inset Formula $E_{i-1}\backsim_{v_{1}}E_{i}\ or\ E_{i-1}\backsim_{v_{2}}E_{i}$
\end_inset


\end_layout

\begin_layout Itemize
נשים לב שחובה שיהיה 
\begin_inset Formula $validity$
\end_inset

, ואנו נוכיח )בה
\begin_inset Quotes erd
\end_inset

כ(:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $E_{0}$
\end_inset

 - בה כל הקלטים הם 
\begin_inset Formula $0$
\end_inset

 + כל ההודעות מגיעות לכן פולט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\end_layout

\begin_layout Itemize
ו
\begin_inset Formula $E_{k}$
\end_inset

 בה כל הקלטים הם 
\begin_inset Formula $1$
\end_inset

 + כל ההודעות מגיעות לכן נפלוט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
 - וזו סתירה
\end_layout

\end_deeper
\begin_layout Itemize
נתחיל לצור רצף הרצות דומות:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $E_{0}$
\end_inset

 שני הקלטים 
\begin_inset Formula $0$
\end_inset

, כל ההודעות מגידות - מה
\begin_inset Formula $validity$
\end_inset

 : יפלטו שניהם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 )הסכמה(
\end_layout

\begin_layout Itemize
\begin_inset Formula $E_{1}$
\end_inset

 : עדיין שהקלטים הם 
\begin_inset Formula $0$
\end_inset

 -אחרת ישימו לב להבדל - ונאמר שההודעה 
\bar under
האחרונה
\bar default
 של 
\begin_inset Formula $v$
\end_inset

 , נפלה באמצע הדרך - כעת מבחינת 
\begin_inset Formula $u$
\end_inset

 הכל זהה, כי הוא שלח את ההודעה שלו, ואמנם הוא לא קיבל הודעה, אבל אין לו
 איך להודיעה על כך ל 
\begin_inset Formula $v$
\end_inset

 
\begin_inset Formula $\Leftarrow$
\end_inset

 
\begin_inset Formula $E_{0}\backsim_{u}E_{1}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $E_{2}$
\end_inset

: עדיין הקלטים הם 
\begin_inset Formula $0$
\end_inset

 , כעת נוריד גם את ההודעה האחרונה ששלח 
\begin_inset Formula $u$
\end_inset

 )בנוסף להודעה של 
\begin_inset Formula $v$
\end_inset

שלא הגיעה( , וכעת 
\begin_inset Formula $E_{1}\backsim_{v}E_{2}$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less2_2.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
נמשיך כך עד הריצה 
\begin_inset Formula $E_{2T}$
\end_inset

 בה אין הודעות בכלל, וכפי שהראנו 
\begin_inset Formula $E_{0}\backsim E_{1}\backsim...\backsim E_{2T}$
\end_inset


\end_layout

\begin_layout Itemize
כעת בגלל שאין הודעות, גם לא משנה מה הקלטיםלכן נוכל להגדיר:
\end_layout

\begin_deeper
\begin_layout Itemize
ב
\begin_inset Formula $E_{2t+1}$
\end_inset

 
\begin_inset Formula $v_{in}=1$
\end_inset

 ועדיין 
\begin_inset Formula $E_{2t}\backsim_{u}E_{2t+1}$
\end_inset

 
\end_layout

\begin_layout Itemize
ב
\begin_inset Formula $E_{2t+2}$
\end_inset

 
\begin_inset Formula $u_{in}=1$
\end_inset

 ועדיין 
\begin_inset Formula $E_{2t+1}\backsim_{v}E_{2t+2}$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less2_4.png
	scale 70

\end_inset

 
\begin_inset Graphics
	filename distributed - pictures/less2_3.png
	scale 70

\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
כעת בהדרגתיות נתחיל להחזיר הודעות, עד שנגיע 
\bar under
ש 
\begin_inset Formula $v_{in}=u_{in}=1$
\end_inset


\bar default
 וגם 
\bar under
כל ההודעות מגיעות
\bar default
 ומה
\begin_inset Formula $validity$
\end_inset

 , שניהם 
\bar under
יפלטו 
\begin_inset Formula $1$
\end_inset


\bar default
 
\end_layout

\end_deeper
\begin_layout Itemize
וכאן הגענו לסתירה, כנדרש
\end_layout

\begin_layout Subsubsection*
שיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\numeric off
 
\end_layout

\begin_layout Subsection
האלגוריתם הרנדומלי:
\end_layout

\begin_layout Standard
נגדיר שמותר לשלוח הודעה בהסתברות מסויימת )הטלת מטבע, קוביה, וכד'(
\end_layout

\begin_layout Standard
ונאפשר הסכמה בהסתברות 
\begin_inset Formula $1-\varepsilon$
\end_inset

 , כשהכוונה שבהנתן הרצה כלשהי תהיה הסכמה בהסתברות מאוד גבוהה )ולא שרוב ההרצות
 תהיה הסכמה חוץ מהרצה כלשהי(
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
על מנת להסביר נעבור דרך 
\end_layout

\begin_layout Subsubsection

\series bold
\lang english
\begin_inset Formula $The\ level\ algorithm$
\end_inset


\end_layout

\begin_layout Standard
הרעיון:
\end_layout

\begin_layout Itemize
כל קודקוד יחשב את ה
\begin_inset Formula $level$
\end_inset

 
\end_layout

\begin_layout Itemize
בסוף הריצה, ההבדל בין רמות הקודקודים יהיה לכל היותר אחד
\end_layout

\begin_layout Itemize
\begin_inset Formula $level$
\end_inset

 מאבחן את מספר הפעמים שהצלחנו לתקשר בהצלחה
\end_layout

\begin_layout Subsubsection
האלגוריתם - נסמן רמה של קודקוד ב 
\begin_inset Formula $l$
\end_inset

 :
\end_layout

\begin_layout Enumerate
שניהם מאותחלים לערך
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\numeric off
 
\end_layout

\begin_layout Enumerate
בכל סיבוב כל קודקוד שולח את הרמה שלו
\end_layout

\begin_layout Enumerate
העדכון מתבצע על פי הנוסחה הבאה: 
\begin_inset Formula $l_{u}=\max\left\{ l_{u},l_{v}+1\right\} $
\end_inset

 כאשר 
\begin_inset Formula $u$
\end_inset

 הוא הקודקוד המקבל, ו
\begin_inset Formula $v$
\end_inset

 הוא הקודקוד השולח
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection
טענה: בכל שלב ההבדל ברמות הוא לכל היותר
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, כלומר 
\begin_inset Formula $\left|l_{v}-l_{u}\right|\leq1$
\end_inset


\end_layout

\begin_layout Standard
הוכחה:
\end_layout

\begin_layout Itemize
באתחול מתקיים ש: 
\begin_inset Formula $l_{u}=l_{v}=0$
\end_inset

 
\end_layout

\begin_layout Itemize
צעד: נניח שנכונה עד לריצה 
\begin_inset Formula $t$
\end_inset

 נוכיח את ריצה 
\begin_inset Formula $t+1$
\end_inset

 
\end_layout

\begin_layout Itemize
ע
\begin_inset Quotes erd
\end_inset

פ הנחת האינדוקציה נוכל לפצל למקרים:
\end_layout

\begin_deeper
\begin_layout Itemize
אם 
\begin_inset Formula $l_{u}=l_{v}$
\end_inset

 אז הקודקוד המקבל יבצע 
\begin_inset Formula $+1$
\end_inset

 , ונקבל את הדרוש 
\end_layout

\begin_layout Itemize
בה
\begin_inset Quotes erd
\end_inset

כ אם 
\begin_inset Formula $l_{u}=l_{v}+1$
\end_inset

, אז לא משנה מה יקרה בסיבוב 
\begin_inset Formula $t+1$
\end_inset

 ערכו של 
\begin_inset Formula $l_{u}$
\end_inset

 לא ישתנה, ומצד שני אם 
\begin_inset Formula $v$
\end_inset

 צריך להתעדכן נקבל ש:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Formula $l_{v}=l_{u}+1\Rightarrow\left|l_{u}-l_{v}\right|=\left|l_{u}-l_{u}+1\right|\leq1$
\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Subsubsection
טענה: אם כל ההודעות נשלחו, שתי הרמות שוות למספר הסיבובים
\end_layout

\begin_layout Standard
הוכחה - באינדוקציה:
\end_layout

\begin_layout Itemize
באתחול - מספר הסיבובים = לספירה =
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\numeric off
 
\end_layout

\begin_layout Itemize
נניח שבסיבוב 
\begin_inset Formula $t$
\end_inset

 מתקיים ש: 
\begin_inset Formula $l_{u}=l_{v}=t$
\end_inset

 ונוכיח ל 
\begin_inset Formula $t+1$
\end_inset


\end_layout

\begin_layout Itemize
יהיו 
\begin_inset Formula $l'_{u}$
\end_inset

 , ה
\begin_inset Formula $level$
\end_inset

 של 
\begin_inset Formula $u$
\end_inset

 מיד לאחר הסבב 
\begin_inset Formula $t+1$
\end_inset

 
\end_layout

\begin_layout Itemize
על פי פעולת האלגוריתם יתקיים ש:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Formula $l_{u}^{t+1}\ec[1]max\left\{ l_{u}^{t},l_{v}^{t}+1\right\} \ec[2]max\left\{ t,t+1\right\} =t+1$
\end_inset


\end_layout

\begin_layout Standard
\align center

\numeric on
1
\numeric off
.
 האלגוריתם.

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\numeric off
.
 הנחת האידוקציה
\end_layout

\end_deeper
\begin_layout Itemize
באופן סימטרי ל 
\begin_inset Formula $v$
\end_inset

 
\end_layout

\begin_layout Subsubsection
טענה: 
\begin_inset Formula $l_{u}=0$
\end_inset

 
\begin_inset Formula $\iff$
\end_inset

 
\begin_inset Formula $u$
\end_inset

 לא קיבל הודעות בכלל 
\end_layout

\begin_layout Standard
הוכחה:
\end_layout

\begin_layout Standard

\bar under
כיוון ראשון:
\bar default
 נניח 
\begin_inset Formula $u$
\end_inset

 לא קיבל אף הודעה 
\begin_inset Formula $\Leftarrow$
\end_inset

 ה
\begin_inset Formula $level$
\end_inset

 שלו לא השתנה מעולם 
\begin_inset Formula $+$
\end_inset

 בשלב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
באלגוריתם אתחלנו את 
\begin_inset Formula $l_{u}$
\end_inset

 להיות
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\numeric off
 
\begin_inset Formula $\Leftarrow$
\end_inset

 ולכן 
\begin_inset Formula $l_{u}$
\end_inset

 ישאר
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\numeric off
 
\end_layout

\begin_layout Standard

\bar under
כיוון שני::
\end_layout

\begin_layout Itemize
נניח בשלילה ש 
\begin_inset Formula $l_{u}=0$
\end_inset

 וש
\begin_inset Formula $u$
\end_inset

 קיבל הודעה בשלב כלשהו מ 
\begin_inset Formula $v$
\end_inset

 השווה ל 
\begin_inset Formula $l_{v}$
\end_inset

 
\end_layout

\begin_layout Itemize
כיון ש
\begin_inset Formula $l_{v}$
\end_inset

 לעולם לא יורד ה
\begin_inset Formula $l_{v}$
\end_inset

המינימלי שנקבל הוא 
\begin_inset Formula $l_{v}=0$
\end_inset

 
\end_layout

\begin_layout Itemize
כעת על פי הנוסחא 
\begin_inset Formula $l_{u}=max\left\{ l_{u},l_{v}+1\right\} =max\left\{ 0,0+1\right\} =1>0$
\end_inset

, בסתירה להנחה
\end_layout

\begin_layout Subsubsection
האלגוריתם הרנדומלי
\end_layout

\begin_layout Itemize
נניח ש 
\begin_inset Formula $u$
\end_inset

 , יכול להשתמש במספר רנדומלי פעם אחת
\end_layout

\begin_layout Itemize
ונניח שהקלטים 
\begin_inset Formula $0,1$
\end_inset

 אפשריים
\end_layout

\begin_layout Enumerate
אתחול: 
\begin_inset Formula $u$
\end_inset

 בוחר מספר 
\begin_inset Formula $t\in\left[1,...,r\right]$
\end_inset

 אקראית
\end_layout

\begin_layout Enumerate
שניהם מריצים את 
\begin_inset Formula $level\ algo'$
\end_inset

 עם שינויים קלים בהודעות:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $v$
\end_inset

 שולח : 
\begin_inset Formula $\left\{ my\_level,my\_input\right\} $
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $u$
\end_inset

 שולח: 
\begin_inset Formula $\left\{ my\_level,my\_input,t\right\} $
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
בסוף )לאחר 
\begin_inset Formula $r$
\end_inset

 סיבובים( קודקוד יפלוט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
אם )צריך את שלשתם(:
\end_layout

\begin_deeper
\begin_layout Enumerate
הקודקוד - הוא יודע מהו 
\begin_inset Formula $t$
\end_inset

 , וראה את שני ה
\begin_inset Formula $input$
\end_inset

 
\end_layout

\begin_layout Enumerate
שני 
\begin_inset Formula $input$
\end_inset

 הם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
 
\end_layout

\begin_layout Enumerate
ה
\begin_inset Formula $level$
\end_inset

 של הקודקוד לפחות 
\begin_inset Formula $t$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
אחרת, פלוט 
\begin_inset Formula $0$
\end_inset

 
\end_layout

\begin_layout Subsubsection
טענה : אם אחד הקלטים 
\begin_inset Formula $0$
\end_inset

 , שניהם יפלטו 
\begin_inset Formula $0$
\end_inset

 
\end_layout

\begin_layout Standard
הוכחה: 
\end_layout

\begin_layout Itemize
נובע מיידית מפעולת האלגוריתם
\end_layout

\begin_layout Subsubsection
טענה: נוכל להניח ששני הקלטים הם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
, ויתקיים ש:
\end_layout

\begin_layout Itemize
אם במקרה כל ההודעות עברו, יפלטו שניהם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
 
\end_layout

\begin_layout Itemize
שאר המקרים גם תהיה הסכמה חוץ מהמקרה שבו 
\begin_inset Formula $\left\{ l_{u},l_{v}\right\} =\left\{ t-1,t\right\} $
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
הוכחה :
\end_layout

\begin_layout Standard

\bar under
נתחיל מלהראות את המקרה הבעייתי:
\end_layout

\begin_layout Itemize
נניח בה
\begin_inset Quotes erd
\end_inset

כ 
\begin_inset Formula $\left\{ l_{u},l_{v}\right\} =\left\{ t-1,t\right\} $
\end_inset

 כלומר 
\begin_inset Formula $l_{u}=t-1$
\end_inset

 ו 
\begin_inset Formula $l_{v}=t$
\end_inset

 )המקרה השני סימטרי(
\end_layout

\begin_layout Itemize
על פי האלגוריתם:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $u$
\end_inset

 יפלוט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 ממה שהראינו ש 
\begin_inset Formula $l_{v}=t>0$
\end_inset

 
\end_layout

\begin_layout Itemize
ו
\begin_inset Formula $v$
\end_inset

 יפלוט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
: כי 
\begin_inset Formula $v$
\end_inset

 יודע מהו ה 
\begin_inset Formula $t$
\end_inset

, ושני הקלטים ב 
\begin_inset Formula $1$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
כלומר 
\series bold
אין הסכמה
\series default
, כנדרש.
\end_layout

\begin_layout Standard

\bar under
כעת נראה את שאר המקרים:
\end_layout

\begin_layout Itemize
לכן נוכל להניח 
\begin_inset Formula $\left\{ l_{u},l_{v}\right\} \neq\left\{ t-1,t\right\} $
\end_inset

, נפצל למקרים
\end_layout

\begin_deeper
\begin_layout Itemize
אם 
\begin_inset Formula $l_{u}<t\land l_{v}<t$
\end_inset

: אז 
\begin_inset Formula $3$
\end_inset

.
 ג.
 לא מתקיים, ושניהם יפלטו
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
- 
\series bold
יש הסכמה
\series default
.
\end_layout

\begin_layout Itemize
אם 
\begin_inset Formula $l_{u}\geq t\land l_{v}\geq t$
\end_inset

: אז ג.
 , ב.
 מתקיים מהלמה, א.
 אם ה 
\begin_inset Formula $levet\geq t$
\end_inset

 אז הוא לפחות
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, אם הוא לפחות
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
אז קיבלתי הודעה אם קיבלתי הודעה אז אני יודע מהו 
\begin_inset Formula $t$
\end_inset

 - 
\series bold
יש הסכמה - פולטים
\family roman
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\end_layout

\begin_layout Itemize
אם 
\begin_inset Formula $l_{v}>t$
\end_inset

 ו- 
\begin_inset Formula $l_{u}<t$
\end_inset

 - בלתי אפשרי, מהלמה שתמיד הפער בינהם הוא לכל היותר
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
.
\end_layout

\begin_layout Itemize
אם כל ההודעות מגיעות ושני האינפוטים הם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
אז 
\begin_inset Formula $l_{u}=L_{v}=r\geq t$
\end_inset

 , לכן שניהם יחליטו אחד )כמו במקרה של הגדול שווה(
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection
טענה: האלגוריתם משיג הסכמה בהסתברות של לפחות 
\begin_inset Formula $1-\frac{1}{r}$
\end_inset


\end_layout

\begin_layout Itemize
נשים לב שה 
\begin_inset Formula $levels$
\end_inset

 תלויים רק במספר ההודעות שנשלחו ו/או אבדו, ונזכר בלמה שההבדל בין הרמות הוא
 לכל היותר
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
)בהשפעת האדברסרי(
\end_layout

\begin_layout Itemize
בגלל שהאדברסרי, לא יודע את ה
\begin_inset Formula $t$
\end_inset

 אז הסיכוי למצב 
\begin_inset Formula $\left\{ l_{u},l_{v}\right\} =\left\{ t-1,t\right\} $
\end_inset

 היא 
\begin_inset Formula $\nicefrac{1}{r}$
\end_inset


\end_layout

\begin_layout Itemize
בעזרת
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 הלמות, ה
\begin_inset Formula $u,v$
\end_inset

 יגיעו להסכמה בכל שאר המקרים
\end_layout

\begin_layout Itemize
ולכן ההסבתרות לאי הסכמה היא 
\begin_inset Formula $\nicefrac{1}{r}$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
נרצה לחשוב רגע על יעילות - ולהוריד את הטעות ל 
\begin_inset Formula $\frac{1}{r^{2}}$
\end_inset

 , אבל:
\end_layout

\begin_layout Subsubsection*
טענה: גבול
\end_layout

\begin_layout Standard
נדרוש תנאי נוסף: שאם לפחות אחד ה
\begin_inset Formula $input$
\end_inset

 הוא 
\begin_inset Formula $0$
\end_inset

 , שניהם פולטים
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, האלגוריתם שלנו קיים זאת, מבלי שנדרוש זאת, וכאן זה פשוט יועיל להוכחה
\end_layout

\begin_layout Standard
הוכחת גבול תחתון:
\end_layout

\begin_layout Itemize
נניח ששניהם קיבלו
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
, אז:
\end_layout

\begin_deeper
\begin_layout Itemize
אם אף הודעה לא הלכה לאיבוד, מפעולת האלגוריתם שניהם יפלטו
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
 
\end_layout

\begin_layout Itemize
אחרת, שניהם צריכים לפלוט את אותה הודעה בהסתברות 
\begin_inset Formula $1-\varepsilon$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
בגרסה זו , יתקיים שהסיכוי לטעות הוא 
\begin_inset Formula $\varepsilon\geq\nicefrac{1}{r}$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
הערה: עבור הגרסה המקורית, הוכחה זהה גבול התחתון יהי 
\begin_inset Formula $\varepsilon\geq\nicefrac{1}{(2r+1})$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less3_1.png
	scale 55

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $\leftarrow E_{0}$
\end_inset

 שני הקלטים 
\begin_inset Formula $1$
\end_inset

 , כל ההודעות מגיעות 
\begin_inset Formula $\Leftarrow$
\end_inset

 הפלטים
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
הם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
 
\begin_inset Formula $\Leftarrow$
\end_inset

 ההסתברות לפלט 
\begin_inset Formula $0$
\end_inset

 היא 
\begin_inset Formula $q_{u}=q_{v}=0$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $\leftarrow E_{1}$
\end_inset

 שני הקלטים
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, כל ההודעות מגיעות חוץ מהאחרונה ש
\begin_inset Formula $v$
\end_inset

 שלח 
\begin_inset Formula $\Leftarrow$
\end_inset

 מבחינת 
\begin_inset Formula $v$
\end_inset

 כל ההודעות הגיעו, ולכן יפלוט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
ולכן 
\begin_inset Formula $q_{v}=0$
\end_inset

 , מבחינת 
\begin_inset Formula $u$
\end_inset

 , ומהגדרת האלגוריתם הם חייבים להסכים בלפחות 
\begin_inset Formula $1-\varepsilon$
\end_inset

 ומכיון ו 
\begin_inset Formula $v$
\end_inset

 
\begin_inset Quotes eld
\end_inset

כבר בחר
\begin_inset Quotes erd
\end_inset

 אז 
\begin_inset Formula $u$
\end_inset

 צריך להסכים ולכן ההסתברות לפלוט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, היא 
\begin_inset Formula $q_{u}\leq\varepsilon$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $\leftarrow E_{2}$
\end_inset

 שני הקלטים
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, כל ההודעות מגיעות חוץ מהאחרונות ש
\begin_inset Formula $v,u$
\end_inset

 שלחו 
\begin_inset Formula $\Leftarrow$
\end_inset

 מבחינת 
\begin_inset Formula $u$
\end_inset

 אנחנו כמו ב 
\begin_inset Formula $E_{1}$
\end_inset

 ולכן 
\begin_inset Formula $q_{u}\leq\varepsilon$
\end_inset

 , ומבחינת 
\begin_inset Formula $v$
\end_inset

 מאותו הגיון שחישבנו בעבור 
\begin_inset Formula $u$
\end_inset

 בהרצה קודמת נקבל: 
\begin_inset Formula $q_{v}\leq2\varepsilon$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $E_{3}$
\end_inset

 : 
\begin_inset Formula $q_{v}\leq2\varepsilon$
\end_inset

 ו
\begin_inset Formula $q_{u}\leq3\varepsilon$
\end_inset

- מאותו נימוק שההפרש בינהם הוא לכל היותר 
\begin_inset Formula $\varepsilon$
\end_inset

 
\end_layout

\begin_layout Itemize
.....
\end_layout

\begin_layout Itemize
\begin_inset Formula $E_{2r+1}$
\end_inset

 - אף הודעה לא הגיעה, ולכן: 
\begin_inset Formula $q_{v}\leq2r\varepsilon$
\end_inset

 , ו
\begin_inset Formula $q_{u}\leq2r\varepsilon$
\end_inset

 )
\begin_inset Formula $q_{u}$
\end_inset

 לא באמת חשוב(
\end_layout

\begin_layout Itemize
כעת נחליף את הקלטים , 
\begin_inset Formula $u$
\end_inset

 מקבל 
\begin_inset Formula $0$
\end_inset

 ומקבל 
\begin_inset Formula $1$
\end_inset

 , אז מדרישות האלגוריתם - אם אחד מהקלטים הוא
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
אז יפלט 
\begin_inset Formula $\left\langle 0,0\right\rangle $
\end_inset

 בהסתברות 
\begin_inset Formula $1$
\end_inset

 ,ולכן ההסתברות ש 
\begin_inset Formula $v$
\end_inset

 יפלוט 
\begin_inset Formula $0$
\end_inset

 היא:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Formula $1=q_{v}\leq2r\varepsilon\iff\varepsilon\geq\frac{1}{2r}$
\end_inset


\end_layout

\begin_layout Standard
\align center
כנדרש
\end_layout

\end_deeper
\begin_layout Subsubsection
למה: נראה שלכל 
\begin_inset Formula $k$
\end_inset

 שלם חיובי, אם 
\begin_inset Formula $q_{u}\le k\varepsilon$
\end_inset

 אז 
\begin_inset Formula $q_{v}\leq\left(k+1\right)\varepsilon$
\end_inset

 
\end_layout

\begin_layout Standard
הוכחה:
\end_layout

\begin_layout Itemize
נניח בשלילה שקיים 
\begin_inset Formula $k$
\end_inset

 עבורו 
\begin_inset Formula $q_{u}\leq k\varepsilon$
\end_inset

 אבל 
\begin_inset Formula $q_{u}>\left(k+1\right)\varepsilon$
\end_inset

 אז:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Formula $\begin{matrix}P\left(\text{disdisagreement}\right)\geq P\left(\left\{ out_{v}=0\right\} \land\left\{ out_{u}=1\right\} \right)\overset{1}{=}P\left(\left\{ out_{v}=0\right\} \right)+P\left(\left\{ out_{u}=1\right\} \right)-P\left(\left\{ out_{v}=0\right\} \lor\left\{ out_{u}=1\right\} \right)\\
\overset{2}{\geq}q_{v}+\left(\not1-q_{u}\right)-\not1\overset{3}{>}\left(k+1\right)\varepsilon+k\varepsilon=\varepsilon
\end{matrix}$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\align center

\numeric on
1
\numeric off
.
 הכלה והדחה 
\numeric on
2
\numeric off
.
 
\begin_inset Formula $q_{u}$
\end_inset

מההנחה פולט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, ולכן נקח את המשלים , מחוסר ידיעה פשוט נוריד
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
)הערך המקסימלי(
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\numeric off
.
 נציב את ההנחה בשלילה
\end_layout

\begin_layout Itemize
קיבלנו ש 
\begin_inset Formula $P\left(\text{disdisagreement}\right)>\varepsilon$
\end_inset

 בסתירה לפעולת האלגוריתם.
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection
למה: הטעות בכל סיבוב לכל היותר 
\begin_inset Formula $\varepsilon$
\end_inset

 
\end_layout

\begin_layout Itemize
נדמה את ההרצות 
\begin_inset Formula $E_{0},E_{1},E_{2}$
\end_inset

 
\end_layout

\begin_layout Itemize
נתבונן ב
\begin_inset Formula $E_{2}$
\end_inset

 )ההודעה האחרונה של 
\begin_inset Formula $v$
\end_inset

ו 
\begin_inset Formula $u$
\end_inset

 לא הגיעו( ונניח בשלילה ש 
\begin_inset Formula $q_{v}>\varepsilon$
\end_inset

 
\end_layout

\begin_layout Itemize
ועכשיו נחוזר אחורה ל 
\begin_inset Formula $E_{1}$
\end_inset

 ונסמן 
\begin_inset Formula $E_{1}'$
\end_inset

 כיון שהפעם ההודעה של 
\begin_inset Formula $u$
\end_inset

 לא הגיעה, אז מנימוקים קודמים יתקיים ש:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Formula $q_{u}=0$
\end_inset

- כי מבחינתו לא השתנה דבר .
 
\begin_inset Formula $q_{v}\leq\varepsilon$
\end_inset

 - מהלמה שהטעות לכל היותר 
\begin_inset Formula $\varepsilon$
\end_inset

 
\end_layout

\begin_layout Standard
\align center
וזו סתירה
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
מסקנה: לאחר 
\begin_inset Formula $r$
\end_inset

 סיבובים 
\begin_inset Formula $\varepsilon\leq\frac{1}{r}$
\end_inset

 
\end_layout

\begin_layout Subsubsection*
שיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
4
\end_layout

\begin_layout Itemize
נמשיך בתאור בבעית שליחת הודעות, מזווית אחרת: כעת נעבוד במערכות 
\bar under
אסנכרונית
\bar default
 ש
\bar under
כל ההודעות מגיעות
\end_layout

\begin_layout Itemize
כלומר אני שולח הודעה אני יודע שהיא תגיע בזמן סופי כלשהו, אבל לא יודע בדיוק
 מתי )כאן המשחק של האדברסרי(
\end_layout

\begin_layout Itemize
נסמלץ בגרף קשיר כלשהו )בקודם היו רק שני קודקדים(
\end_layout

\begin_layout Itemize
כאן האלגוריתם יתקדם ע
\begin_inset Quotes erd
\end_inset

י ארועים - 
\begin_inset Formula $evnet-based$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
בעית השידור
\end_layout

\begin_layout Itemize
נניח ולי יש הודעה -ואני רוצה להעביר לכול ה 
\begin_inset Formula $nodes$
\end_inset

 במערכת
\end_layout

\begin_layout Itemize
אם המערכת היא גרף שלם, אז פשוט נשלח את ההודעה לכולם ובזמן סופי כולם יקבלו
 אותה
\end_layout

\begin_layout Itemize
הבעיה היא שזה לא גרף שלם, ולי יש קשר רק ללחלק - רק 
\begin_inset Quotes eld
\end_inset

לשכבה ראשונה
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Itemize
פתרון - אני אודיע להם והם יודיע לחברים שלהם )נוכל להביח שכל קודקוד בעל 
\begin_inset Formula $id$
\end_inset

 יחודי(
\end_layout

\begin_layout Subsection
פורמלית - 
\begin_inset Formula $Flooding$
\end_inset

 
\end_layout

\begin_layout Standard
הרעיון: כאשר כאשר קודקוד את ההודעה 
\begin_inset Formula $M$
\end_inset

 בפעם הראשונה הוא מעביר אותה לכל שכניו
\end_layout

\begin_layout Subsubsection
האלגוריתם:
\end_layout

\begin_layout Itemize
קודקוד המקור 
\begin_inset Formula $v$
\end_inset

 - שולח את ההודעה 
\begin_inset Formula $M$
\end_inset

 לכל השכנים
\end_layout

\begin_layout Itemize
שאר הקודקדים : יהיה קודקוד 
\begin_inset Formula $u$
\end_inset

 , בעת קבלת הודעה 
\begin_inset Formula $M$
\end_inset

 משכן 
\begin_inset Formula $w$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
אם 
\begin_inset Formula $M$
\end_inset

 לא התקבל בעבר, שלח לכל השכנים חוץ מ 
\begin_inset Formula $w$
\end_inset

 )ניתן להגדיר הודעה עדכון לשולח (
\end_layout

\begin_layout Itemize
אחרת, אל תשלח )
\begin_inset Formula $do\ nothing$
\end_inset

 (
\end_layout

\end_deeper
\begin_layout Standard
נרצה לנתח את סיבוכיות האלגוריתם , לכן נסתכל עליו בשלב ראשון כמערכת סנכרונית,
 כאשר כל שליחת הודעה = סיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
 
\begin_inset Formula $\Leftarrow$
\end_inset

 סיבוכיות הזמן = מספר הסיבובים
\end_layout

\begin_layout Standard
נוכל לתאר זאת במעין עץ:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less4_1.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
מספר הגדרות - יהיה גרף 
\begin_inset Formula $G=\left(V,E\right)$
\end_inset

 
\end_layout

\begin_layout Itemize

\series bold
רדיוס:
\end_layout

\begin_deeper
\begin_layout Itemize
יהיה קודקוד 
\begin_inset Formula $v\in V$
\end_inset

 
\series bold
הרדיוס של קודקוד 
\begin_inset Formula $v$
\end_inset


\series default
 בגרף 
\begin_inset Formula $G$
\end_inset

 הוא 
\begin_inset Formula $rad\left(G,v\right)=\max\left(dist\left(u,v\right):u\in V\right)$
\end_inset


\end_layout

\begin_layout Itemize

\series bold
הרדיוס של גרף 
\begin_inset Formula $G$
\end_inset

 - הוא 
\begin_inset Formula $rad\left(G\right)=\min\left\{ rad\left(G,v\right)v\in V\right\} $
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
הקוטר:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $diam\left(G\right)=max\left\{ dist\left(u,v\right):u,v\in V\right\} =\max\left\{ rad\left(G,v\right):v\in V\right\} $
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
סיבוכיות הריצה של 
\begin_inset Formula $Flooding$
\end_inset

 במערכת סנכרונית הוא 
\begin_inset Formula $rad\left(G,v\right)$
\end_inset

 
\end_layout

\begin_layout Itemize
נשים לב ש 
\begin_inset Formula $diam\left(G\right)/2\leq Rad\left(G\right)\leq diam\left(G\right)$
\end_inset


\end_layout

\begin_layout Standard
כעת נחזור למערכת אסנכרונית
\end_layout

\begin_layout Itemize
נניח שבכל שלב הזמן הוא סופי, ולכן לא נוכל שהאלגוריתם ישען על החלטות הנוגעות
 לזמן
\end_layout

\begin_layout Itemize
בניתוח - כל שליחת הודעה תחשב כ 
\begin_inset Formula $dalay$
\end_inset

 של
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
לכל היותר
\end_layout

\begin_layout Itemize
נוכל להניח שזמן שליחת הודעה - יהיה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\end_layout

\begin_layout Itemize
כעת נוכל לבדוק את הסיבכויות לכל הרצה, ולקבוע את הסיבוכיות זמן ריצה כ
\begin_inset Formula $maximum$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
לסיכום - הנחות בניתוח זמן ריצה אסנכרוני:
\end_layout

\begin_layout Itemize
סדר המאורעות לא משתנה
\end_layout

\begin_layout Itemize
זמן החישוב מקומי הוא
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
)כמו שליחת הודעה(
\end_layout

\begin_layout Itemize
זמן ה 
\begin_inset Formula $delays$
\end_inset

 הוא לכל היותר
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
 
\end_layout

\begin_layout Itemize
הודעה ראשונה נשלחת בזמן
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\numeric off
 
\end_layout

\begin_layout Itemize
הזמן של המאורע האחרון הוא המקסימלי
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
הגדרה: - סיבוכיות זמן אסנכרונית : הזמן הכולל הגרע ביותר כאשר זמן חישוב מקומי
 הוא
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
וה
\begin_inset Formula $delay$
\end_inset

 הוא לכל היותר
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
.
\end_layout

\begin_layout Standard
מהי אם כן הסיבוכיות במערכת אסנכרונית?
\end_layout

\begin_layout Subsubsection
משפט: סיבוכיות הזמן של 
\begin_inset Formula $foolding$
\end_inset

 מקודקוד 
\begin_inset Formula $v$
\end_inset

 במערכת אסנכרונית הוא 
\begin_inset Formula $rad\left(G,v\right)$
\end_inset

 
\end_layout

\begin_layout Standard
הוכחה:
\end_layout

\begin_layout Standard

\bar under
לפחות 
\begin_inset Formula $rad\left(G,v\right)$
\end_inset

 
\end_layout

\begin_layout Itemize
יהיה 
\begin_inset Formula $u\in V$
\end_inset

 כך ש 
\begin_inset Formula $dist\left(u,v\right)=rad\left(G,v\right)\overset{def}{=}\max\left(dist\left(u,v\right):u\in V\right)$
\end_inset

 
\end_layout

\begin_layout Itemize
היות וה 
\begin_inset Formula $delay$
\end_inset

 הוא
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
לכל היותר לכל ההודעות
\end_layout

\begin_layout Itemize
האדברסרי יכול לודא שה 
\begin_inset Formula $delely$
\end_inset

 יהיה מקסימלי =
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
לכל ההודעות
\end_layout

\begin_layout Itemize
ולכן ההודעה 
\begin_inset Formula $M$
\end_inset

 שנשלחה מ 
\begin_inset Formula $v$
\end_inset

 ל 
\begin_inset Formula $u$
\end_inset

 היא לפחות 
\begin_inset Formula $rad\left(G,v\right)$
\end_inset


\end_layout

\begin_layout Standard

\bar under
לכל היותר 
\begin_inset Formula $Rad\left(G,v\right)$
\end_inset

 :
\end_layout

\begin_layout Standard
נראה טענה חזקה יותר: לכל קודקוד במרחק 
\begin_inset Formula $t$
\end_inset

 ההודעה הגיע בזמן 
\begin_inset Formula $t$
\end_inset

 :
\end_layout

\begin_layout Itemize
יהיה 
\begin_inset Formula $u\in V$
\end_inset

 , ויהיה 
\begin_inset Formula $t=dist\left(u,v\right)$
\end_inset

 , אז ברור ש 
\begin_inset Formula $0\leq t=rad\left(G,v\right)=\max\left(dist\left(u,v\right):u\in V\right)$
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
נראה באינדוקציה:
\end_layout

\end_deeper
\begin_layout Itemize

\bar under
בסיס
\bar default
:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $t=0$
\end_inset

 - מיידי
\end_layout

\end_deeper
\begin_layout Itemize

\bar under
צעד: נניח לכל 
\begin_inset Formula $0\leq t<rad\left(G,v\right)$
\end_inset

 ונניח ל 
\begin_inset Formula $t+1$
\end_inset

 :
\end_layout

\begin_deeper
\begin_layout Itemize
יהיה 
\begin_inset Formula $v,w_{1},...,w_{t},u$
\end_inset

 מסלול באורך 
\begin_inset Formula $t+1$
\end_inset

 מ
\begin_inset Formula $v$
\end_inset

 ל 
\begin_inset Formula $u$
\end_inset

 .
\end_layout

\begin_layout Itemize
על פי הנחת האינדוקציה הודעה 
\begin_inset Formula $M$
\end_inset

 הגיע ל 
\begin_inset Formula $w_{t}$
\end_inset

 לכל היותר בזמן 
\begin_inset Formula $t$
\end_inset

 
\end_layout

\begin_layout Itemize
על כן הודעה 
\begin_inset Formula $M$
\end_inset

 נשלחה מ
\begin_inset Formula $w_{t}$
\end_inset

 ל 
\begin_inset Formula $u$
\end_inset

 בזמן, והגיע לכל היותר בזמן 
\begin_inset Formula $t+1$
\end_inset

 ל 
\begin_inset Formula $u$
\end_inset

 , כנדרש
\end_layout

\begin_layout Itemize
נעיר שבמקרה והוחלט שלא תשלח ההודעה ל 
\begin_inset Formula $u$
\end_inset

 - כי 
\begin_inset Formula $u$
\end_inset

 קיבל כבר קודם - אז זה נחשב שההודעה הגיע בזמן 
\begin_inset Formula $t$
\end_inset

 והטענה נובעת באופן מיידי(
\end_layout

\end_deeper
\begin_layout Subsection*
סיבכויות כמות ההודעות
\end_layout

\begin_layout Standard
הגדרה: מספר ההודעות שנשלחו?
\end_layout

\begin_layout Subsubsection
משפט: סיבוכיות כמות ההודעות ב 
\begin_inset Formula $flooding$
\end_inset

 בגרף 
\begin_inset Formula $G=\left(V,E\right)$
\end_inset

 היא 
\begin_inset Formula $O\left(\left|E\right|\right)$
\end_inset

 
\end_layout

\begin_layout Standard
הוכחה:
\end_layout

\begin_layout Itemize
תהיה 
\begin_inset Formula $uw\in E$
\end_inset

 קשת כלשהי ב 
\begin_inset Formula $G$
\end_inset

 
\end_layout

\begin_layout Itemize
על פי תאור האלגוריתם :
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $u$
\end_inset

 ישלח לכל היותר הודעה אחת ל 
\begin_inset Formula $w$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $w$
\end_inset

 ישלח לכל היותר הודעה אחת ל 
\begin_inset Formula $u$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
לכן, מספר ההודעות הכולל הוא לכל היותר
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\begin_inset Formula $\left|E\right|=O\left(|E|\right)$
\end_inset


\numeric off
 
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection
\begin_inset Formula $Flooding\ Spanning\ Tree$
\end_inset

 
\end_layout

\begin_layout Standard
ניתן לחשב את העץ הפורש של הרשת - 
\begin_inset Quotes eld
\end_inset

קיבלנו בחינם
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard

\bar under
הרעיון
\bar default
: יהיה 
\begin_inset Formula $v$
\end_inset

 המקור, כל קודקוד יסמן את השולח של ההודעה כאביו
\end_layout

\begin_layout Itemize
קודקוד המקור 
\begin_inset Formula $v$
\end_inset

 :
\end_layout

\begin_deeper
\begin_layout Itemize
סמן 
\begin_inset Formula $parent=NIL$
\end_inset

 
\end_layout

\begin_layout Itemize
שלח את הודעה 
\begin_inset Formula $M$
\end_inset

 לכל השכנים
\end_layout

\end_deeper
\begin_layout Itemize
שאר הקודקדים - בעת קבלת 
\begin_inset Formula $M$
\end_inset

 משכן 
\begin_inset Formula $w$
\end_inset

 כלשהו, אם 
\begin_inset Formula $M$
\end_inset

 לא התקבלה לפני כן אז:
\end_layout

\begin_deeper
\begin_layout Itemize
סמן 
\begin_inset Formula $parent=w$
\end_inset

 
\end_layout

\begin_layout Itemize
שלח את 
\begin_inset Formula $M$
\end_inset

 לכל השכנים חוץ מ 
\begin_inset Formula $w$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection*
עץ פורש במערכת סנכרונית
\end_layout

\begin_layout Itemize
במערכת סנכרונית הגענו לקודקוד 
\begin_inset Formula $u$
\end_inset

 בסיבוב 
\begin_inset Formula $t$
\end_inset

 אם
\begin_inset Quotes erd
\end_inset

ם 
\begin_inset Formula $dist\left(u,v\right)=t$
\end_inset

 
\end_layout

\begin_layout Itemize
לכן בעץ הנפרש המרחק בין 
\begin_inset Formula $u$
\end_inset

 ל 
\begin_inset Formula $root$
\end_inset

 הוא בדיוק הזמן בו הגענו ל 
\begin_inset Formula $u$
\end_inset

 
\end_layout

\begin_layout Itemize
לכן העץ הנפרש מייצג את המרחק בין 
\begin_inset Formula $u$
\end_inset

 ל 
\begin_inset Formula $root$
\end_inset

 בגרף 
\begin_inset Formula $G$
\end_inset

 
\end_layout

\begin_layout Itemize
ועץ כזה הוא 
\begin_inset Formula $Sortest\ pathes/BFS$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
הערה: מבלי להתאמץ קיבלנו את העץ הכי טוב שיכול להיות
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection
משפט: במערכת סנכרונית 
\begin_inset Formula $flooding$
\end_inset

 פורש עץ 
\begin_inset Formula $BFS$
\end_inset

 
\end_layout

\begin_layout Standard
להוכיח בבית: במערכת אסנכרונית כל עץ יכול להפרש על ידי 
\begin_inset Formula $flooding$
\end_inset

 )תרגיל
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
(
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $Convergecast$
\end_inset


\end_layout

\begin_layout Standard
הגדרה )ההפוך של 
\begin_inset Formula $boradcast$
\end_inset

 ( - כולם רוצים להודיע לאחד - בהנתן עץ פורש מושרש, כל ה
\begin_inset Formula $node$
\end_inset

 רוצים לשלוח הודעה ל
\begin_inset Formula $root$
\end_inset

 
\end_layout

\begin_layout Standard
דוגמה: חיבור מספרים מקבילי.
\end_layout

\begin_layout Subsection
אלגוריתם 
\begin_inset Formula $Convergecast$
\end_inset

 
\end_layout

\begin_layout Itemize
עלה 
\begin_inset Formula $u$
\end_inset

 כלשהו: שלח הודעה לאביך
\end_layout

\begin_layout Itemize
צומת פנימי 
\begin_inset Formula $w$
\end_inset

 כלשהו - בדוק בקבלת הודעה מילד 
\begin_inset Formula $x$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
אם 
\begin_inset Formula $w$
\end_inset

 קיבל הודעה מכל ילדיו 
\begin_inset Formula $\Leftarrow$
\end_inset

 שלח הודעה לאביך )בדוגמה שלח את הסכום(
\end_layout

\end_deeper
\begin_layout Itemize
שורש 
\begin_inset Formula $v$
\end_inset

 - בקבלת הודעה מילד 
\begin_inset Formula $x$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
אם קיבלת הודעה מכל ילדיך , סיים את התהליך
\end_layout

\end_deeper
\begin_layout Subsubsection
סיבוכיות
\end_layout

\begin_layout Itemize
סיבוכיות הזמן: עומק העץ, הסבר:
\end_layout

\begin_deeper
\begin_layout Itemize
מקרה הסנכרוני : הודעה נשלחת משכבת העלים לאביהם , וכן הלאה, סה
\begin_inset Quotes erd
\end_inset

כ רדיוס /עומק העץ
\end_layout

\begin_layout Itemize
מקרה אסנכרוני : כמו מקודם באינדוקציה
\end_layout

\end_deeper
\begin_layout Itemize
סיבוכיות ההודעות: מספר הקשתות של העץ, כי הודעה עולה רק למעלה )משפט: מספר
 הקודקודים פחות
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
(
\end_layout

\begin_deeper
\begin_layout Itemize
דוגמאות שימוש: חישוב 
\begin_inset Formula $min,max,sum,avarge,..$
\end_inset


\end_layout

\end_deeper
\begin_layout Subsection
אלגוריתם 
\begin_inset Formula $Flooding/Echo$
\end_inset

 
\end_layout

\begin_layout Standard
נשלב את 
\begin_inset Formula $Flooding$
\end_inset

 ו ה 
\begin_inset Formula $convergecast$
\end_inset

 - נרצה להודיע משהו ולקבל תשובה שכולם קיבלו 
\end_layout

\begin_layout Enumerate
השתמש ב 
\begin_inset Formula $Flooding$
\end_inset

 לפרוש את העץ 
\end_layout

\begin_layout Enumerate
השתמש ב 
\begin_inset Formula $Convergecast\ (echo)$
\end_inset

 , לדווח חזרה לשורש שסיימנו 
\end_layout

\begin_layout Standard
סיבוכיות:
\end_layout

\begin_layout Itemize
סנכרוני: 
\begin_inset Formula $O\left(daim\left(G)\right)\right)$
\end_inset


\end_layout

\begin_layout Itemize
אסנכרוני 
\begin_inset Formula $O\left(\left|V(G)\right|\right)$
\end_inset

 - היות ובמקרה הגרוע העץ שיפרש יהיה 
\begin_inset Quotes eld
\end_inset

שרוך
\begin_inset Quotes erd
\end_inset

 ועומקו יהיה כמספר הקדוקדים.
\end_layout

\begin_deeper
\begin_layout Itemize
הערה: בניגוד אולי לאינטואציה אדברסרי מוצלח לא בהכרח תמיד יעקב הכל, אלא להפך
 יכול להיות והוא ישלח הודעות מסוימת מאוד על מנת לצור את ה
\begin_inset Quotes erd
\end_inset

שרוך
\begin_inset Quotes erd
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection*
שיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
5
\end_layout

\begin_layout Standard
הים נרצה למצוא אלגוריתם שיבנה עץ 
\begin_inset Quotes eld
\end_inset

טוב
\begin_inset Quotes erd
\end_inset

 במערכת אסנכרונית:
\end_layout

\begin_layout Standard
הרעיון:
\end_layout

\begin_layout Subsubsection*

\bar under
\begin_inset Formula $Dijksta$
\end_inset

 
\end_layout

\begin_layout Itemize
התחל עץ בקודקוד 
\begin_inset Formula $v$
\end_inset

 
\end_layout

\begin_layout Itemize
בצעד אמצעי כשלהו 
\begin_inset Formula $t$
\end_inset

 , תת-העץ של כל 
\begin_inset Formula $node$
\end_inset

 נמצא במרחק שלכל היותר 
\begin_inset Formula $r_{t}$
\end_inset

 מקודקוד 
\begin_inset Formula $v$
\end_inset


\end_layout

\begin_layout Itemize
בצעד הבא, הוסיף לעץ את ה
\begin_inset Formula $node$
\end_inset

 שמרחקו מינמלי ל 
\begin_inset Formula $v$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard

\bar under
\begin_inset Formula $Bellamn-Ford$
\end_inset

 
\end_layout

\begin_layout Itemize
כל קודקוד 
\begin_inset Formula $u$
\end_inset

 מחזיק מרחק 
\begin_inset Formula $d_{u}$
\end_inset

 לקודקוד 
\begin_inset Formula $v$
\end_inset

 
\end_layout

\begin_layout Itemize
בתחילה 
\begin_inset Formula $d_{v}=0$
\end_inset

 , ו 
\begin_inset Formula $d_{u}=\infty$
\end_inset

 לכל 
\begin_inset Formula $u\neq v$
\end_inset

 
\end_layout

\begin_layout Itemize
בכל שלב - יש 
\begin_inset Formula $n-1$
\end_inset

 כאלה - קודקדוד מעדכן את מרחקו לפי הנוסחה: 
\begin_inset Formula $d_{v}=\min\left\{ d_{v},min\left\{ d_{u}+1:u\in N\left(v)\right)\right\} \right\} $
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsection

\lang english
\begin_inset Formula $Distributed\ Dijkstra\ Algorithm$
\end_inset


\end_layout

\begin_layout Itemize
הגרף שלנו לא ממשוקל, ולכן נוכל להוסיף רמה - רמה )כל קשת משקלה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
(
\end_layout

\begin_layout Itemize
נניח ואנחנו ברמה 
\begin_inset Formula $r$
\end_inset

 , הוספת רמה מצריכה תאום בין הקודקודים, כדי למנוע מצב שאנחנו מצרפים שכן
 מרמה 
\begin_inset Formula $r+1$
\end_inset

 כ
\begin_inset Formula $r+2$
\end_inset

 , רק מכיון שהוא עדיין לא קיבל את ההודעה )
\series bold
אסנכרוני!
\series default
(
\end_layout

\begin_layout Standard
\align center

\lang english
\begin_inset Graphics
	filename distributed - pictures/less5_1.png
	scale 50

\end_inset


\end_layout

\begin_layout Subsubsection
אלגוריתם
\end_layout

\begin_layout Standard
נכתוב את האלגוריתם עובר 
\begin_inset Formula $r$
\end_inset

 כללי - כלומר יש לנו תת-עץ בגובה 
\begin_inset Formula $r$
\end_inset

:
\end_layout

\begin_layout Enumerate
\begin_inset Formula $v$
\end_inset

 קודקוד המקור משדר: 
\begin_inset Quotes eld
\end_inset

התחלתי שלב 
\begin_inset Formula $r+1$
\end_inset


\begin_inset Quotes erd
\end_inset

 
\end_layout

\begin_layout Enumerate
\begin_inset Formula $w$
\end_inset

 = עלה של עץ בגובה 
\begin_inset Formula $r$
\end_inset

 = שולח לשכנים שלו 
\begin_inset Quotes eld
\end_inset

הצטרף לשכבה 
\begin_inset Formula $r+1$
\end_inset

 
\begin_inset Quotes eld
\end_inset


\end_layout

\begin_layout Enumerate
שכן 
\begin_inset Formula $u$
\end_inset

 מקבל הודעה את הודעת 
\begin_inset Formula $r+1$
\end_inset

 מ 
\begin_inset Formula $w$
\end_inset

 , ובודק:
\end_layout

\begin_deeper
\begin_layout Enumerate
אם זו הודעה ראשונה מסוג זה, הוא מסמן את 
\begin_inset Formula $partent=w$
\end_inset

 , ושולח 
\begin_inset Formula $Ack$
\end_inset

 ל 
\begin_inset Formula $w$
\end_inset


\end_layout

\begin_layout Enumerate
אחרת, שולח 
\begin_inset Formula $Nack$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Enumerate
אחרי קבלת תגובת 
\begin_inset Formula $Ack\backslash Nack$
\end_inset

 מכל השכנים, קודקודי רמה 
\begin_inset Formula $r$
\end_inset

 )
\begin_inset Formula $w$
\end_inset

 ( משדרים ב 
\begin_inset Formula $convergecast$
\end_inset

 לשורש 
\begin_inset Formula $v$
\end_inset

 , וחוזרים לשלב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\end_layout

\begin_layout Enumerate
האלגוריתם יגמר כאשר כל התגובות הם 
\begin_inset Formula $Nack$
\end_inset

 .
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection
סיבוכיות זמן:
\end_layout

\begin_layout Itemize
בכל שלב יש לנו: 
\begin_inset Formula $\underbrace{r}_{\underset{\text{height(T)=r }}{\text{flooding }}}+\underbrace{1}_{\underset{\text{join}}{\text{send msg: }}}+\underbrace{1}_{\underset{\text{Ack/Nack}}{\text{responde msg: }}}+\underbrace{r}_{\underset{\text{height(T)=r }}{\text{convergecast}}}=O\left(r\right)$
\end_inset


\end_layout

\begin_layout Itemize
כעת נתבונן על העץ לפי רמות/גבהי העץ: 
\begin_inset Formula $O\left(1+2+...+rad\left(G,v\right)\right)=O\left(diam\left(G\right)^{2}\right)$
\end_inset


\end_layout

\begin_layout Subsubsection
סיבוכיות הודעות:
\end_layout

\begin_layout Itemize
נספור את ההודעות הצטרף + התגובה , נשים לב שברגע שיש 
\begin_inset Formula $Nack$
\end_inset

 המסלול הזה 
\begin_inset Quotes eld
\end_inset

נחסם
\begin_inset Quotes erd
\end_inset

 ויותר לא ישלחו בו הודעות )מלבד הודעות בתוך אותה רמה 
\begin_inset Formula $r$
\end_inset

 אבל זה זניח( , ומסלול שמקבל 
\begin_inset Formula $Ack$
\end_inset

 ימשיך את ההודעות עד 
\begin_inset Formula $Nack$
\end_inset

 הבא וכו' ,משמעות הדבר שההודעות הן כפעמיים מספר הצלעות )הצטרף 
\begin_inset Formula $\leftarrow$
\end_inset

 
\begin_inset Formula $Ack\backslash Nack$
\end_inset

 (
\end_layout

\begin_layout Itemize
מצד שני בכל שלב יש 
\begin_inset Formula $flooding+convergecast$
\end_inset

 ובשיעור שעבר הראינו שסיבוכיות ההודעות בכל אחד היא 
\begin_inset Formula $O\left(v\right)$
\end_inset

 , יש לנו 
\begin_inset Formula $diam\left(G)\right)$
\end_inset

 שלבים:
\end_layout

\begin_layout Itemize
סה
\begin_inset Quotes erd
\end_inset

כ:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Formula $O\left(\left|E\right|+\left|V\right|\cdot diam\left(G\right)\right)$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsection

\lang english
\begin_inset Formula $Distributed\ Bellman‐Ford\ Algorithm$
\end_inset


\end_layout

\begin_layout Standard

\bar under
הרעיון
\bar default
:
\end_layout

\begin_layout Itemize
כל קודקוד יש 
\begin_inset Formula $d_{u}$
\end_inset

 שמייצג הערכה עכשווית למרחק מ 
\begin_inset Formula $v$
\end_inset

 )המקור(, כאשר 
\begin_inset Formula $d_{u}$
\end_inset

מבין שהוא יכול לשפר את מדד ה 
\begin_inset Formula $d_{u}$
\end_inset

, הוא מעדכן את שכניו.
\end_layout

\begin_layout Subsubsection

\bar under
האלגוריתם
\bar default
:
\end_layout

\begin_layout Enumerate
\begin_inset Formula $init$
\end_inset

 : 
\begin_inset Formula $d_{v}=0$
\end_inset

 , 
\begin_inset Formula $d_{u}=\infty,parant\left(u\right)=NIL$
\end_inset

 לכל 
\begin_inset Formula $u\neq v$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $v$
\end_inset

 שולח
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit

\begin_inset Formula $"1"$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
לכל שכניו.
\end_layout

\begin_layout Enumerate
לכל שכן 
\begin_inset Formula $u$
\end_inset

 , בעת קבלת 
\begin_inset Formula $"t"$
\end_inset

 משכן 
\begin_inset Formula $w$
\end_inset

 , בודק אם 
\begin_inset Formula $t<d_{u}$
\end_inset

 , אם כן:
\end_layout

\begin_deeper
\begin_layout Enumerate
מסמן 
\begin_inset Formula $d_{u}=t$
\end_inset

 
\end_layout

\begin_layout Enumerate
מסמן 
\begin_inset Formula $parent(u)=w$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Standard

\bar under
סיבוכיות זמן )בלמן - פורד עדיף(:
\end_layout

\begin_layout Subsubsection
משפט : הסיבוכיות 
\begin_inset Formula $rad(G,v)=O\left(diam(G)\right)$
\end_inset

 
\end_layout

\begin_layout Itemize

\bar under
מצד אחד
\bar default
, יהיה 
\begin_inset Formula $u\in V$
\end_inset

 כך ש 
\begin_inset Formula $dist\left(u,v\right)=rad\left(G,v\right)$
\end_inset

 
\end_layout

\begin_layout Itemize
נניח שהאדברסרי עיכב את כל ההודעות בזמן המקיסמלי , כלומר ב 
\begin_inset Formula $time=1$
\end_inset

 
\end_layout

\begin_layout Itemize
אז האדברסרי יכול להיות שההודעה הראשונה ש 
\begin_inset Formula $u$
\end_inset

 קיבל היא 
\series bold
לפחות
\series default
 בזמן 
\begin_inset Formula $rad\left(G,v\right)$
\end_inset


\end_layout

\begin_layout Itemize

\bar under
מצד שני,
\bar default
 יהיה 
\begin_inset Formula $u\in V$
\end_inset

 קודקוד כשלהו 
\end_layout

\begin_layout Itemize
יהיה 
\begin_inset Formula $t=dist\left(u,v\right)$
\end_inset

 ,מהגדרה מתקיים ש: 
\begin_inset Formula $0\leq t\leq rad\left(G,v\right)$
\end_inset

 ,
\end_layout

\begin_layout Itemize
נוכיח באינדוקציה על גובה העץ
\end_layout

\begin_layout Itemize

\bar under
בסיס
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $t=0$
\end_inset

 : מיידי
\end_layout

\end_deeper
\begin_layout Itemize

\bar under
צעד:
\bar default
 נניח נכונות הטענה לכל 
\begin_inset Formula $0\leq t<rad\left(G,v\right)$
\end_inset

 ונוכיח ל 
\begin_inset Formula $t+1$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
יהיה 
\begin_inset Formula $v,w_{1},w_{2},...,w_{t},u$
\end_inset

 מסלול באורך 
\begin_inset Formula $t+1$
\end_inset

 בין 
\begin_inset Formula $v$
\end_inset

 ל 
\begin_inset Formula $u$
\end_inset

 
\end_layout

\begin_layout Itemize
מהנחת האינדוקציה בכל הרצה 
\begin_inset Formula $d_{w_{t}}=t$
\end_inset

 בדיוק בזמן 
\begin_inset Formula $t$
\end_inset

 
\end_layout

\begin_layout Itemize
כעת נריץ הרצה נוספת לבדיקה מרחקים, 
\end_layout

\begin_layout Itemize
ולכן תשלח הודעה 
\begin_inset Formula $t$
\end_inset

 בזמן שהוא לפחות 
\begin_inset Formula $t+1$
\end_inset

 מ
\begin_inset Formula $w_{t}$
\end_inset

 ל 
\begin_inset Formula $u$
\end_inset


\end_layout

\begin_layout Itemize
ולכן 
\begin_inset Formula $u$
\end_inset

 יסמן 
\begin_inset Formula $d_{u}=t+1$
\end_inset

 
\end_layout

\begin_layout Itemize
נעיר שיש מקרה ריק כאשר 
\begin_inset Formula $u$
\end_inset

 על המסלול בין 
\begin_inset Formula $v$
\end_inset

 ל 
\begin_inset Formula $w_{t}$
\end_inset

 , היות ואז קיבל הודעה עם ערך קטן מ
\begin_inset Formula $t$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Standard

\bar under
סיבוכיות ההודעות )כאן דיקסטרה עדיף(: 
\end_layout

\begin_layout Subsubsection
משפט: סיבוכיות ההודעות ש בלמן-פורד מבוזר היא 
\begin_inset Formula $O\left(\left|E\right|\cdot\left|V\right|\right)$
\end_inset


\end_layout

\begin_layout Standard
\align center

\emph on
בתרגיל בית נוכיח שלמעשה זה 
\begin_inset Formula $\Theta$
\end_inset

 
\end_layout

\begin_layout Itemize
מספק להראות שלכל זוג קודקודים 
\begin_inset Formula $u,w\in W$
\end_inset

 עם 
\begin_inset Formula $uw\in E$
\end_inset

 , קודקוד 
\begin_inset Formula $u$
\end_inset

 שולח לכל היותר 
\begin_inset Formula $n$
\end_inset

 הודעות ל
\begin_inset Formula $w$
\end_inset

 , כלומר שעל כל קשת רצה לכל היותר 
\begin_inset Formula $\left|v\right|$
\end_inset

 הודעות
\end_layout

\begin_deeper
\begin_layout Itemize
)בתמונה הגדולה: נכפיל ב
\numeric on
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
להודעות שעבורות מהצד השני, ונכפיל במספר הקשתות(
\end_layout

\end_deeper
\begin_layout Itemize
כל הודעה מ 
\begin_inset Formula $u$
\end_inset

 ל 
\begin_inset Formula $w$
\end_inset

, היא הערכת מרחק בינו ל 
\begin_inset Formula $v$
\end_inset

, וזהו מספר בין 
\begin_inset Formula $0$
\end_inset

 ל 
\begin_inset Formula $n-1$
\end_inset


\end_layout

\begin_layout Itemize
נניח ונשלחה הודעה 
\begin_inset Formula $t_{1}$
\end_inset

 מ
\begin_inset Formula $u$
\end_inset

 ל 
\begin_inset Formula $w$
\end_inset

 אז בהכרח ההודעה הבאה שתשלח צריכה לקיים 
\begin_inset Formula $t_{2}<t_{1}$
\end_inset

 )ויש לכל היותר 
\begin_inset Formula $n-1$
\end_inset

 ערכים(
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsection*
סיכום:
\end_layout

\begin_layout Itemize

\series bold
מערכת סנכרונית
\series default
: 
\end_layout

\begin_deeper
\begin_layout Itemize
סיבוכיות זמן 
\begin_inset Formula $O\left(diam\left(G\right)\right)$
\end_inset


\end_layout

\begin_layout Itemize
סיבוכיות הודעות: 
\begin_inset Formula $O\left(\left|E\right|\right)$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize

\series bold
מערכת אסנכרונית:
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
דיקסטרה מבוזר:
\end_layout

\begin_deeper
\begin_layout Itemize
סיבוכיות זמן 
\begin_inset Formula $O\left(diam\left(G\right)^{2}\right)$
\end_inset


\end_layout

\begin_layout Itemize
סיבוכיות הודעות: 
\begin_inset Formula $O\left(\left|E\right|+\left|V\right|\cdot diam\left(G\right)\right)$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize

\series bold
בלמן-פורד מבוזר:
\end_layout

\begin_deeper
\begin_layout Itemize
סיבוכיות זמן 
\begin_inset Formula $O\left(diam\left(G\right)\right)$
\end_inset


\end_layout

\begin_layout Itemize
סיבוכיות הודעות: 
\begin_inset Formula $O\left(\left|E\right|\cdot\left|V\right|\right)$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
)לא בקורס( - 
\begin_inset Formula $synchronizers$
\end_inset

 אלגוריתם - למקרה וחשוב לנו 
\bar under
ששני
\bar default
 הפרמטרים יהיו אופטימלים באנסכרוני
\end_layout

\begin_deeper
\begin_layout Itemize
סיבוכיות זמן 
\begin_inset Formula $O\left(diam\left(G\right)\cdot\log^{3}\left|V\right|\right)$
\end_inset


\end_layout

\begin_layout Itemize
סיבוכיות הודעות: 
\begin_inset Formula $O\left(\left|E\right|\cdot\left|V\right|\cdot\log^{3}\left|V\right|\right)$
\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
\align center
דוגמת הרצה - דיקטסרה 
\end_layout

\begin_layout Standard
\align center
דוגמת הרצה - בלמן-פורד
\end_layout

\begin_layout Subsubsection*
שיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
6
\numeric off
 
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
זמנים
\end_layout

\begin_layout Standard
מטרתנו: לסמן תווית זמן לכל מהאורעות במערכת הודעות אסנכרונית
\end_layout

\begin_layout Itemize
נרשה להביא לכל קודקוד זמן כלשהו - שישמש אותנו באלגוריתמים
\end_layout

\begin_layout Itemize
\begin_inset Formula $Logical\ clock\ values$
\end_inset

 : ערך מספרי שעולה בהתאם לזמן, ומתאים להתנהגות המערכת
\end_layout

\begin_layout Itemize
נשים לב שהבעיה שלנו היא 
\bar under
לא
\bar default
 סנכרון השעונים
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
נזכר בהגדרות:
\end_layout

\begin_layout Itemize
\begin_inset Formula $execution$
\end_inset

 - הוא רצף של 
\bar under
קוניפגרוציות
\bar default
 
\bar under
ומאורעות
\bar default
 לסירוגין
\end_layout

\begin_layout Itemize
\begin_inset Formula $schedule\,S$
\end_inset

 - הוא רצף של 
\bar under
מאורעות
\bar default
 מה 
\begin_inset Formula $execution$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
אפשרי לכלול גם קלטים
\end_layout

\end_deeper
\begin_layout Itemize
הגבלה שהוספנו שכל קודקוד רואה רק את המאורעות שלו.
\end_layout

\begin_deeper
\begin_layout Standard
נגדיר:
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $Causal\ Shuffles$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
נאמר שלוח זמנים 
\begin_inset Formula $S'$
\end_inset

 הוא 
\begin_inset Formula $Causal-Shuffles$
\end_inset

 של לוח זמנים 
\begin_inset Formula $S$
\end_inset

 אם 
\begin_inset Formula $S|v=S'|v$
\end_inset

 לכל 
\begin_inset Formula $v\in V$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
הערה: מערכת מבוזרות לא יכולה להבחין בין לוחות זמנים 
\begin_inset Formula $S,S'$
\end_inset

 אם
\begin_inset Quotes erd
\end_inset

ם 
\begin_inset Formula $S'$
\end_inset

 הוא 
\begin_inset Formula $causal\ shuffle$
\end_inset

 של 
\begin_inset Formula $S$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsection
\begin_inset Formula $Causal\ Order$
\end_inset

 
\end_layout

\begin_layout Standard

\bar under
הגדרה
\bar default
: בלוח זמנים 
\begin_inset Formula $S$
\end_inset

 , המאורע 
\begin_inset Formula $e$
\end_inset

 , יכול להתרחש לפני מאורע 
\begin_inset Formula $e$
\end_inset

 אם
\begin_inset Quotes erd
\end_inset

ם 
\begin_inset Formula $e$
\end_inset

 התגלה לפני 
\begin_inset Formula $e'$
\end_inset

 בכל ה 
\begin_inset Formula $casual\ shuffle$
\end_inset

 של 
\begin_inset Formula $S$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $Logical\ clocks$
\end_inset

 יסתמך על 
\begin_inset Formula $causal\ order$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
אם מאורע 
\begin_inset Formula $e$
\end_inset

 התרחש לפני 
\begin_inset Formula $e'$
\end_inset

 , אז 
\begin_inset Formula $e$
\end_inset

 צריך להראות לפני 
\begin_inset Formula $e'$
\end_inset

 ב 
\begin_inset Formula $casual\ shuffle$
\end_inset

 
\end_layout

\begin_layout Itemize
ובמקרה זה, ערך השעון של 
\begin_inset Formula $e$
\end_inset

 צריך להיות קטן מהערך של 
\begin_inset Formula $e'$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less6_1.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
דוגמה של שני לוחות זמנים 
\begin_inset Formula $S,S'$
\end_inset

 שהם 
\begin_inset Formula $causal\ shuffle$
\end_inset

 אחד של השני
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Subsubsection
\begin_inset Formula $Lamport\text{’}s\ Happens\text{‐}Before\ Relation$
\end_inset

:
\end_layout

\begin_layout Itemize
נניח שיש לנו רק מאורעות שליחה וקבלה, נסמן:
\end_layout

\begin_deeper
\begin_layout Itemize
יהיו 
\begin_inset Formula $e,e'$
\end_inset

 שני מאורעות ב
\begin_inset Formula $S$
\end_inset

 המתרחשים בקודקדים 
\begin_inset Formula $u,u'$
\end_inset

 בהתאמה.
\end_layout

\begin_layout Itemize
נניח ששליחה מתבצעת בקודקוד שולח, וקבלה בקודקוד מקבל
\end_layout

\begin_layout Itemize
\begin_inset Formula $e$
\end_inset

 מתרחש בזמן 
\begin_inset Formula $t$
\end_inset

 , ו 
\begin_inset Formula $e'$
\end_inset

 מתרחש בזמן 
\begin_inset Formula $t'$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
במקרים הבאים נדע ש
\begin_inset Formula $e$
\end_inset

 התרחש לפני 
\begin_inset Formula $e'$
\end_inset

 :
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $u=u'$
\end_inset

 ו
\begin_inset Formula $t<t'$
\end_inset

 )אותו קודקוד(
\end_layout

\begin_layout Itemize
\begin_inset Formula $e'$
\end_inset

 הוא מאורע קבלה הודעה שמתאים למאורע שליחה 
\begin_inset Formula $e$
\end_inset

 על אותה הודעה
\end_layout

\begin_layout Itemize
קיים מאורע 
\begin_inset Formula $e"$
\end_inset

 שאנחנו יודעים לבט כי 
\begin_inset Formula $e$
\end_inset

 לפניו ו
\begin_inset Formula $e'$
\end_inset

 אחריו
\end_layout

\end_deeper
\begin_layout Standard

\bar under
פורמלית
\bar default
: היחס 
\begin_inset Formula $Happens\text{‐}Before\,relation\Rightarrow_{s}$
\end_inset

 שנסמנו ב 
\begin_inset Formula $\Rightarrow_{S}$
\end_inset

 , על לו
\begin_inset Quotes erd
\end_inset

ז 
\begin_inset Formula $S$
\end_inset

 הוא יחס בינארי על מאורעות שליחה/קבלה ב 
\begin_inset Formula $S$
\end_inset

 המקיים אחד מהמקרים הבאים:
\end_layout

\begin_layout Enumerate
כל הזוגות 
\begin_inset Formula $\left(e,e'\right)$
\end_inset

 כך ש 
\begin_inset Formula $e$
\end_inset

 קודם ל 
\begin_inset Formula $e$
\end_inset

 ב 
\begin_inset Formula $S$
\end_inset

 ושניהם מאורעות שהתרחשו באותו קודקוד
\end_layout

\begin_layout Enumerate
כל הזוגות 
\begin_inset Formula $\left(e,e'\right)$
\end_inset

 כך ש
\begin_inset Formula $e$
\end_inset

 הוא מאורע שליחה ו
\begin_inset Formula $e'$
\end_inset

 הוא מאורע קבלה של אותה הודעה 
\end_layout

\begin_layout Enumerate
כל הזוגות 
\begin_inset Formula $\left(e,e'\right)$
\end_inset

 כך שישנו מאורע 
\begin_inset Formula $e"$
\end_inset

 המקיים: 
\begin_inset Formula $\begin{matrix}e\Rightarrow_{s}e"\\
e"\Rightarrow_{s}e'
\end{matrix}$
\end_inset


\end_layout

\begin_layout Standard
הערה: 
\begin_inset Formula $\Rightarrow_{s}$
\end_inset

 סגור 
\series bold
לטרנזיטביות
\series default
 המוגדרת ב
\begin_inset Formula $1,2$
\end_inset


\end_layout

\begin_layout Standard
דוגמה )חלקית(:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less6_2.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
מהציור אנחנו יודעים ש:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\begin{matrix}\\
\underline{same\ vertex:} & s_{1}\Rightarrow r_{1} & s_{1}\Rightarrow s_{4} &  & s_{1}\Rightarrow s_{7} & ....\\
\underline{same\ massage:} & s_{1}\Rightarrow r_{1} & s_{2}\Rightarrow r_{2} &  & ....\\
\underline{transitive:} & \left.\begin{matrix}s_{1}\Rightarrow r_{1}\\
r_{1}\Rightarrow s_{6}
\end{matrix}\right\} \Rightarrow & s_{1}\Rightarrow s_{6}
\end{matrix}$
\end_inset


\end_layout

\begin_layout Subsubsection
משפט: קדימות מאורעות ב 
\begin_inset Formula $casual\ shuffles$
\end_inset


\end_layout

\begin_layout Standard
יהיה 
\begin_inset Formula $S$
\end_inset

 ושני מאורעות 
\begin_inset Formula $e,e'$
\end_inset

 הביטויים הבאים אז: 
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\ (A)$
\end_inset


\begin_inset Formula $e$
\end_inset

 קודם ל
\begin_inset Formula $e'$
\end_inset

 בכל ה 
\begin_inset Formula $casual\ shuffles-S'$
\end_inset

 של 
\begin_inset Formula $S$
\end_inset


\begin_inset Formula $e\Rightarrow_{s}e'\ (B)\iff$
\end_inset


\end_layout

\begin_layout Standard
הוכחה - גרירה דו כיוונית
\end_layout

\begin_layout Standard

\bar under
כיוון ראשון
\bar default
: 
\begin_inset Formula $\left(A\Rightarrow B\right)$
\end_inset

 אם 
\begin_inset Formula $e\Rightarrow_{s}e'$
\end_inset

 אז 
\begin_inset Formula $e$
\end_inset

 קודם ל
\begin_inset Formula $e$
\end_inset

 בכל ה 
\begin_inset Formula $casual-shuffles-S'$
\end_inset

 של 
\begin_inset Formula $S$
\end_inset

 :
\end_layout

\begin_layout Standard
הוכחה - באינדוקציה על 
\begin_inset Formula $k$
\end_inset

 = המאורעות ב
\begin_inset Formula $S$
\end_inset

 בין 
\begin_inset Formula $e$
\end_inset

 ל 
\begin_inset Formula $e'$
\end_inset

 :
\end_layout

\begin_layout Itemize

\bar under
בסיס:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $k=0$
\end_inset

 : מהגדרה 
\numeric on

\begin_inset Formula $(1)$
\end_inset


\numeric off
 
\begin_inset Formula $e,e'$
\end_inset

 התרחשו באותו קודקוד או 
\begin_inset Formula $(2)$
\end_inset

 שהם אותה הודעה, ומכאן ש 
\begin_inset Formula $e$
\end_inset

 קודם ל
\begin_inset Formula $e'$
\end_inset

 כנדרש.
\end_layout

\end_deeper
\begin_layout Itemize

\bar under
צעד - נניח ל 
\begin_inset Formula $k$
\end_inset

 מאורעות ונוכיח ל
\begin_inset Formula $k+1$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
אם 
\begin_inset Formula $e,e'$
\end_inset

 התרחשו באותו קודקוד או שהם על אותה הודעה, סיימנו
\end_layout

\begin_layout Itemize
אחרת, קיים מאורע 
\begin_inset Formula $e"$
\end_inset

 כך ש 
\begin_inset Formula $e\Rightarrow_{s}e"$
\end_inset

 וגם 
\begin_inset Formula $e"\Rightarrow_{s}e'$
\end_inset

 
\end_layout

\begin_layout Itemize
ברור, שמספר המאורעות ב
\begin_inset Formula $S$
\end_inset

 בין 
\begin_inset Formula $e$
\end_inset

 ל 
\begin_inset Formula $e"$
\end_inset

 ובין 
\begin_inset Formula $e"$
\end_inset

 ל 
\begin_inset Formula $e$
\end_inset

 הוא לכל היותר 
\begin_inset Formula $k$
\end_inset

 
\end_layout

\begin_layout Itemize
לכן, על פי הנחת האינדוקציה, 
\begin_inset Formula $e$
\end_inset

 התרחש לפני 
\begin_inset Formula $e"$
\end_inset

 ו
\begin_inset Formula $e"$
\end_inset

 התרחש לפני 
\begin_inset Formula $e$
\end_inset

 בכל ה 
\begin_inset Formula $casual\ shuffles\ S'$
\end_inset

 של 
\begin_inset Formula $S$
\end_inset

 
\end_layout

\begin_layout Itemize
מהטרנזיטיביות נקבל ש 
\begin_inset Formula $e$
\end_inset

 התרחש לפני 
\begin_inset Formula $e'$
\end_inset

 בכל ה 
\begin_inset Formula $casual\ shuffles\ S'$
\end_inset

 , כנדרש
\end_layout

\end_deeper
\begin_layout Standard

\bar under
כיוון שני -
\bar default
 
\begin_inset Formula $\left(\lnot A\Rightarrow\lnot B\right)$
\end_inset

 אם 
\begin_inset Formula $e$
\end_inset

 קודם ל
\begin_inset Formula $e$
\end_inset

 בכל ה 
\begin_inset Formula $casual-shuffles-S'$
\end_inset

 של 
\begin_inset Formula $S$
\end_inset

 אז 
\begin_inset Formula $e\Rightarrow_{s}e'$
\end_inset

:
\end_layout

\begin_layout Itemize
בה
\begin_inset Quotes erd
\end_inset

כ נניח בשלילה שקיים 
\begin_inset Formula $e$
\end_inset

 קודם ל
\begin_inset Formula $e'$
\end_inset

 ב 
\begin_inset Formula $S$
\end_inset

 )אחרת נסמן 
\begin_inset Formula $(S=S'$
\end_inset

 ומתקיים ש: 
\begin_inset Formula $e\not\Rightarrow_{s}e'$
\end_inset

 , נראה שיש 
\begin_inset Formula $casual-shuffle$
\end_inset

 שזו לא מתקיים.
\end_layout

\begin_layout Itemize
מהגדרה נובע ש 
\begin_inset Formula $e,e'$
\end_inset

 התרחשו בקודקודים שונים, בציור:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less6_3.png

\end_inset


\end_layout

\begin_layout Itemize
עוד בציור: הקו האדום בקודקוד זו הפעם הראשונה שבו החל מהנקודה 
\begin_inset Formula $e$
\end_inset

 יש רצף של מאורעות )חיצים( שמגיעים לקודקוד הנ
\begin_inset Quotes erd
\end_inset

ל
\end_layout

\begin_layout Itemize
סימנו בורוד את כל המאורעות שקורים מאותו מאורע והלאה, ובלבן את מה שקרה לפני
 אותו מאורע
\end_layout

\end_deeper
\begin_layout Itemize
ברור לנו ש 
\begin_inset Formula $e'$
\end_inset

 בשטח ה
\begin_inset Quotes erd
\end_inset

לבן
\begin_inset Quotes erd
\end_inset

 מההנחה בשלילה ש 
\begin_inset Formula $e\not\Rightarrow_{S}e'$
\end_inset


\end_layout

\begin_layout Itemize
כעת נזיז ב 
\begin_inset Formula $\Delta$
\end_inset

 כלשהי את כל הקודקודים המסומנים באדום 
\begin_inset Formula $\Leftarrow$
\end_inset

נצור 
\begin_inset Formula $casual-shffle$
\end_inset

 חדש שבו 
\begin_inset Formula $e$
\end_inset

, ננסה להבין מה קורה להודעות:
\end_layout

\begin_deeper
\begin_layout Itemize
אם ההודעה מ
\begin_inset Quotes erd
\end_inset

לבן
\begin_inset Quotes erd
\end_inset

 ל 
\begin_inset Quotes eld
\end_inset

לבן
\begin_inset Quotes erd
\end_inset

: לא השתנה כלום ברצף
\end_layout

\begin_layout Itemize
אם ההודעה מ
\begin_inset Quotes erd
\end_inset

ורוד
\begin_inset Quotes erd
\end_inset

 ל
\begin_inset Quotes erd
\end_inset

ורוד
\begin_inset Quotes erd
\end_inset

 : כנ
\begin_inset Quotes erd
\end_inset

ל, כי הזזתי באותה כמות 
\begin_inset Formula $\left(\Delta\right)$
\end_inset

.
\end_layout

\begin_layout Itemize
אם ההודעה מ
\begin_inset Quotes erd
\end_inset

לבן
\begin_inset Quotes erd
\end_inset

 ל 
\begin_inset Quotes eld
\end_inset

ורוד
\begin_inset Quotes erd
\end_inset

: גם לא השתנה כלום
\end_layout

\begin_layout Itemize
אם ההודעה מ
\begin_inset Quotes erd
\end_inset

ורוד
\begin_inset Quotes erd
\end_inset

 ל
\begin_inset Quotes erd
\end_inset

לבן
\begin_inset Quotes erd
\end_inset

: לא יכול להיות, כי אז הקו הורוד היה מסומן 
\begin_inset Quotes eld
\end_inset

קודם לכן
\begin_inset Quotes erd
\end_inset

, בסתירה להיכן שצויר הקו האדום והורוד.
\end_layout

\begin_layout Standard
כלומר הראנו 
\begin_inset Formula $casual-shuffle$
\end_inset

 בו 
\begin_inset Formula $e'$
\end_inset

 קודם ל 
\begin_inset Formula $e$
\end_inset

 , וזו סתירה )ע
\begin_inset Quotes erd
\end_inset

פ ההגדרה צריך ש
\series bold
בכל
\series default
 ה
\begin_inset Formula $cs$
\end_inset

 
\begin_inset Formula $e$
\end_inset

 יהיה קודם ל 
\begin_inset Formula $e'$
\end_inset

 (
\end_layout

\end_deeper
\begin_layout Standard
לסיכום , הוכחנו ש
\begin_inset Formula $A$
\end_inset

 = הכלי הנח, ו 
\begin_inset Formula $B$
\end_inset

= הכלי השמושי , הם אותו דבר ולכן מעתה נוכל להשתמש בנח.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Subsection
\begin_inset Formula $Lamport\ Clocks$
\end_inset


\end_layout

\begin_layout Itemize
לכל מאורע ניתן 
\begin_inset Quotes eld
\end_inset

חותמת זמן
\begin_inset Quotes erd
\end_inset

 , 
\begin_inset Formula $T\left(e\right)\in\mathbb{N}$
\end_inset

 
\end_layout

\begin_layout Itemize
אם 
\begin_inset Formula $e$
\end_inset

 ו 
\begin_inset Formula $e'$
\end_inset

 הם מאורעות באותו קודקוד ו 
\begin_inset Formula $e$
\end_inset

 מאורע הקודם ל 
\begin_inset Formula $e'$
\end_inset

 אז 
\begin_inset Formula $T\left(e\right)<T\left(e'\right)$
\end_inset

 
\end_layout

\begin_layout Itemize
אם 
\begin_inset Formula $s_{M}<r_{M}$
\end_inset

 הם מאורעות שליחה וקלה של הודעה 
\begin_inset Formula $M$
\end_inset

 אז 
\begin_inset Formula $T\left(S_{M}\right)<T\left(r_{M}\right)$
\end_inset

 
\end_layout

\begin_layout Standard
נשים לב :
\end_layout

\begin_layout Itemize
היחס טרנזיטבי , ומתקים ש: 
\begin_inset Formula $e\Rightarrow_{s}e'\rightarrow T\left(e\right)<T\left(e'\right)$
\end_inset

 
\end_layout

\begin_layout Itemize
הסדר שקיבלנו 
\begin_inset Formula $T$
\end_inset

 הוא סופר-סט של 
\begin_inset Formula $\Rightarrow_{s}$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection
האלגוריתם:
\end_layout

\begin_layout Enumerate
כל קודקוד שומר 
\begin_inset Formula $counter$
\end_inset

 נסמנו ב 
\begin_inset Formula $c_{u}$
\end_inset

המואתחל ל
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\numeric off
 
\end_layout

\begin_layout Enumerate
לכל מאורע 
\begin_inset Formula $e$
\end_inset

 בקודקוד 
\begin_inset Formula $u$
\end_inset

 , 
\series bold
שאינו
\series default
 מאורע קבלה, הקודקוד 
\begin_inset Formula $u$
\end_inset

 מעדכן 
\begin_inset Formula $c_{u}=c_{u}+1$
\end_inset

 ומגדיר 
\begin_inset Formula $T\left(e\right)=c_{u}$
\end_inset

 
\end_layout

\begin_layout Enumerate
לכל מאורע שליחה 
\begin_inset Formula $s$
\end_inset

 שמתרחש ב
\begin_inset Formula $u$
\end_inset

 , נוסיף להודעה את 
\begin_inset Formula $T\left(s\right)$
\end_inset

 
\end_layout

\begin_layout Enumerate
לכל מאורע קבלה 
\begin_inset Formula $r$
\end_inset

 במתרחש ב 
\begin_inset Formula $u$
\end_inset

 )בעקבות מאורע שליחה כלשהו( קודקוד 
\begin_inset Formula $u$
\end_inset

 מעדכן 
\begin_inset Formula $c_{u}=\max\left(c_{u},T(s)\right)+1$
\end_inset

 , 
\begin_inset Formula $T(r)=c_{u}$
\end_inset

 
\end_layout

\begin_layout Standard

\bar under
דוגמה:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less6_2.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\begin{matrix}(2):T(s_{1})=0+1=1 &  & (4):T(r_{2})=\left(max\{1,1\}\right)+1=2 & (2):T(s_{3})=2+1=3\\
\\
(2):T(s_{2})=0+1=1 & (2):T(s_{3})=1+1=2\\
\\
 & (4):T(r_{3})=\left(max\{0,2\}\right)+1=3 & (4);T(r_{1})=4 & (2)T(s_{5})=5
\end{matrix}$
\end_inset


\end_layout

\begin_layout Subsubsection
\begin_inset Formula $Fidge\text{‐}Mattern-Vector-Clocks$
\end_inset


\end_layout

\begin_layout Itemize
שעוני למפורט מחזירים סופר-סט של יחס 
\begin_inset Formula $happen-before$
\end_inset

 , האם נוכל חשב שעונים לוגים במדויק עבור היחס 
\begin_inset Formula $\Rightarrow_{s}$
\end_inset

?
\end_layout

\begin_layout Subsubsection
\begin_inset Formula $vector-clocks$
\end_inset

 
\end_layout

\begin_layout Itemize
כל קודקוד 
\begin_inset Formula $u$
\end_inset

 שומר וקטור של שעונים, וכל ערך בוקטור מתאים לכל קודקוד 
\begin_inset Formula $v\in V$
\end_inset

 
\end_layout

\begin_layout Itemize
בוקטור של 
\begin_inset Formula $u$
\end_inset

 כל פעם נעדכן את 
\begin_inset Formula $vc_{v}(u)$
\end_inset

 , בהתאם למאורע שהתרחש בקודקוד 
\begin_inset Formula $v$
\end_inset

 שקודקדוד
\begin_inset Formula $u$
\end_inset

 מודע אליו.
\end_layout

\begin_layout Itemize
אלגוריתם:
\end_layout

\begin_deeper
\begin_layout Enumerate
לכל קודוקוד 
\begin_inset Formula $u$
\end_inset

 יהיה וקטור 
\begin_inset Formula $vc(u)$
\end_inset

 המתאים לקבוצת הקודקדים 
\begin_inset Formula $V$
\end_inset

 , כאשר:
\end_layout

\begin_deeper
\begin_layout Enumerate
הוקטור כולו מאותחל ל
\numeric on
0
\numeric off
 
\end_layout

\begin_layout Enumerate
נסמן את הקורדינאטה של קדוקד 
\begin_inset Formula $v$
\end_inset

 כך: 
\begin_inset Formula $vc_{v}(u)$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
לכל מאורע 
\begin_inset Formula $e$
\end_inset

 המתרחש ב 
\begin_inset Formula $u$
\end_inset

 ואינו מארוע קבלה, קודקוד 
\begin_inset Formula $u$
\end_inset

 מעדכן 
\begin_inset Formula $vc_{u}(u)+=1$
\end_inset

 ומיד 
\begin_inset Formula $vc(e)=vc(u)$
\end_inset

 )שולח את כל הוקטור(
\end_layout

\begin_layout Enumerate
לכל מאורע שליחה 
\begin_inset Formula $s$
\end_inset

 המתרחש ב 
\begin_inset Formula $u$
\end_inset

 , קודקוד 
\begin_inset Formula $u$
\end_inset

 יוסיף את 
\begin_inset Formula $vc(s)$
\end_inset

 להודעה
\end_layout

\begin_layout Enumerate
לכל מאורע קבלה 
\begin_inset Formula $r$
\end_inset

 בקודקוד 
\begin_inset Formula $u$
\end_inset

 )המתאים למאורע 
\begin_inset Formula $s$
\end_inset

 כלשה( קודקוד 
\begin_inset Formula $u$
\end_inset

 מעדכן כך:
\end_layout

\begin_deeper
\begin_layout Enumerate
\begin_inset Formula $vc_{u}(u)=max\left(vc_{v}(u),vc_{v}(s)\right)$
\end_inset

 לכל 
\begin_inset Formula $v\neq u$
\end_inset

 
\end_layout

\begin_layout Enumerate
)אם 
\begin_inset Formula $v=u$
\end_inset

(: 
\begin_inset Formula $vc_{u}(u)+=1$
\end_inset

 
\end_layout

\begin_layout Enumerate
\begin_inset Formula $vc(r)=vc(u)$
\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Standard

\bar under
דוגמה:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less6_4.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\begin{matrix}v_{1}\stackrel[(1)]{}{\rightarrow}\left(\begin{matrix}0\\
0\\
0
\end{matrix}\right)\stackrel[(2)]{s_{1}}{\rightarrow}\left(\begin{matrix}1\\
0\\
0
\end{matrix}\right)\stackrel[(4)]{r_{2}}{\rightarrow}\left(\begin{matrix}2_{4.b}\\
0_{4.a}\\
1_{4.a}
\end{matrix}\right)...\\
\\
v_{2}\stackrel[(1)]{}{\rightarrow}\left(\begin{matrix}0\\
0\\
0
\end{matrix}\right)\stackrel[(2)]{s_{2}}{\rightarrow}\left(\begin{matrix}0\\
1\\
0
\end{matrix}\right)...\\
\\
v_{3}\stackrel[(1)]{}{\rightarrow}\left(\begin{matrix}0\\
0\\
0
\end{matrix}\right)\stackrel{r_{1}}{\rightarrow}\left(\begin{matrix}1_{4.a}\\
0_{4.a}\\
1_{4.b}
\end{matrix}\right)\stackrel[(2)]{s_{4}}{\rightarrow}\left(\begin{matrix}1\\
0\\
2
\end{matrix}\right)...
\end{matrix}$
\end_inset


\end_layout

\begin_layout Standard
הגדרה: לכל שני מאורעות 
\begin_inset Formula $e,e'$
\end_inset

 נאמר ש 
\begin_inset Formula $vc(e)<vc(e')$
\end_inset

 אם 
\begin_inset Formula $vc_{v}(e)\leq vc_{v}(e')$
\end_inset

 לכל שני 
\begin_inset Formula $v\in V$
\end_inset

 וגם 
\begin_inset Formula $vc\left(e\right)\neq vc\left(e'\right)$
\end_inset

 
\end_layout

\begin_layout Subsubsection
משפט: בהנתן 
\begin_inset Formula $S$
\end_inset

: לכל שני מאורעות 
\begin_inset Formula $e,e'$
\end_inset

 מתקיים ש 
\begin_inset Formula $e\Rightarrow_{s}w'$
\end_inset

 
\begin_inset Formula $\iff$
\end_inset


\begin_inset Formula $vc(e)<vc(e')$
\end_inset

 
\end_layout

\begin_layout Standard
הוכחה: בבית
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Subsubsection*
שיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
7
\end_layout

\begin_layout Standard
\begin_inset Formula $Synchronizers$
\end_inset

 - לא ממש דיברנו בקורס, רק הזכרנו - הם גם השתמשו ב 
\begin_inset Formula $LogicalClocks$
\end_inset

:
\end_layout

\begin_layout Itemize
לקחו מערכת אסכנרונית ויצרו סיבובים מלאכותיים, הגדירו כך: נגדיר סיבוב 
\begin_inset Formula $t$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
אז שליחה תקבל זמן של 
\begin_inset Formula $2t-1$
\end_inset

 
\end_layout

\begin_layout Itemize
וקבלה תקבל זמן של 
\begin_inset Formula $2t$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
מאפיינים:
\end_layout

\begin_deeper
\begin_layout Itemize
גם זה סופר-סט
\end_layout

\begin_layout Itemize
החסרון הגדול, דורש התערבות גדולה במערכת
\end_layout

\begin_layout Itemize
כל הסנכרון בעצמו כבד מאוד
\end_layout

\begin_deeper
\begin_layout Itemize
)א כל המטרה 
\begin_inset Formula $logical-clocks$
\end_inset

 זה יוצא לא ככ יעיל(
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
שימושים ב 
\begin_inset Formula $logical-clocks$
\end_inset

 :
\end_layout

\begin_layout Itemize
תחושת זמן במערכת אסנכרונית
\end_layout

\begin_layout Itemize
השמוש המקורי - דוגמת רשת חנויות נעליים עולמית, ומבצע ל
\numeric on
100
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
הקונים הראשונים, פורמלית:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $Replicated-State-Machine$
\end_inset

 - מספר מכונות שאנחנו רוצים שיעבדו ביחד/ 
\begin_inset Quotes eld
\end_inset

אותו דבר
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Itemize
הפתרון הוספת שעון
\end_layout

\end_deeper
\begin_layout Subsection
\begin_inset Formula $Global\ States$
\end_inset


\end_layout

\begin_layout Itemize
לעיתים קודקוד צריך לדעת מה המצב של כולם, פתרון: נעשה 
\begin_inset Quotes eld
\end_inset

צילום מסך
\begin_inset Quotes erd
\end_inset

 שיספר לאותו קודקוד מה המצב של כולם.
\end_layout

\begin_layout Itemize
גם כאן תהיה בעיית ה 
\begin_inset Formula $casual-shuffle$
\end_inset

 , ובאופן כללי בלתי אפשרי לקבל 
\begin_inset Formula $global\,state$
\end_inset

 שיתאים לכל ההרצות
\end_layout

\begin_layout Itemize
מה שכאן אפשרי זה לקבל מצב כלשהו שיתאים לחלק מההרצות, ולזה נקרא 
\begin_inset Formula $consistent\ /\ global\ snapshot$
\end_inset


\end_layout

\begin_layout Subsubsection
\begin_inset Formula $Consistent\ cut$
\end_inset

 - חתכים
\end_layout

\begin_layout Standard
חתך - יהיה 
\begin_inset Formula $S$
\end_inset

 לו
\begin_inset Quotes erd
\end_inset

ז , חתך הוא תת-קבוצה 
\begin_inset Formula $C$
\end_inset

 של מאורעות ב 
\begin_inset Formula $S$
\end_inset

 כך שכל שבכל אחד מהקודקודים מה שנמצא בחתך הוא קידומת של מה שקרה בקודקוד.
 )חובה מההתחלה ועד נקודה מוסימת(
\end_layout

\begin_layout Standard
\begin_inset Formula $consisten\ cut$
\end_inset

 : כל מאורע 
\begin_inset Formula $e\in C$
\end_inset

 וכל מאורע 
\begin_inset Formula $e'\in S$
\end_inset

 המקיימים 
\begin_inset Formula $e'\Rightarrow_{s}e$
\end_inset

 אז 
\begin_inset Formula $e'\in C$
\end_inset

 )חשוב, הסדר שנבחרים המאורעות(
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less6_5.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
אז ברור שאם תכונות 
\begin_inset Formula $1,2$
\end_inset

 מתקיימות ב 
\begin_inset Formula $Lamport\text{’}s\ Happens\text{‐}Before\ Relation$
\end_inset

 , זה קורה מיידית.
 השאלה מה קורה אם ארועים ש
\begin_inset Quotes erd
\end_inset

יכולים לזוז
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard
נסביר מדוע אנחנו 
\begin_inset Quotes eld
\end_inset

שוברים
\begin_inset Quotes erd
\end_inset

 את הקו, ולא מנסים לחתוך חיתוך אחד- ההסבר הוא ה
\begin_inset Formula $casual-shuffle$
\end_inset

 :
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less6_7.png
	scale 70

\end_inset


\end_layout

\begin_layout Subsubsection
טענה: מאורעות שליחה וקבלה ב 
\begin_inset Formula $consistent\ cut$
\end_inset


\end_layout

\begin_layout Standard
בהינתן לו
\begin_inset Quotes erd
\end_inset

ז 
\begin_inset Formula $S$
\end_inset

 :
\end_layout

\begin_layout Standard
\align center
חתך 
\begin_inset Formula $C$
\end_inset

 הוא 
\begin_inset Formula $consistent\ cut$
\end_inset

 
\begin_inset Formula $\iff$
\end_inset

 אם לכל הודעה 
\begin_inset Formula $M$
\end_inset

 עם מאורע שליחה 
\begin_inset Formula $s_{M}$
\end_inset

 וקבלה 
\begin_inset Formula $r_{M}$
\end_inset

 אם 
\begin_inset Formula $r_{M}\in C$
\end_inset

 אז גם 
\begin_inset Formula $s_{M}\in C$
\end_inset

 )יש צורך רק בתכונה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
(
\end_layout

\begin_layout Standard
הוכחה:
\end_layout

\begin_layout Standard

\bar under
בכייון הראשון, 
\begin_inset Formula $\text{ }\text{C is consistent cut }$
\end_inset

 צ
\begin_inset Quotes erd
\end_inset

ל שלכל הודעה אם 
\begin_inset Formula $r_{M}\in C$
\end_inset

 גם 
\begin_inset Formula $s_{M}\in C$
\end_inset


\end_layout

\begin_layout Itemize
על כן יהיה 
\begin_inset Formula $C$
\end_inset

 חתך, נניח שהוא 
\begin_inset Formula $consistent$
\end_inset

 , תהיה 
\begin_inset Formula $M$
\end_inset

 הודעה עם 
\begin_inset Formula $s_{M},r_{M}$
\end_inset

 , ונניח ש 
\begin_inset Formula $r_{M}\in C$
\end_inset

 .
\end_layout

\begin_layout Itemize
מהגדרת היחס 
\begin_inset Formula $happens-before$
\end_inset

, אנחנו יודעים ש 
\begin_inset Formula $s_{M}\Rightarrow_{s}r_{M}$
\end_inset


\end_layout

\begin_layout Itemize
לכן, 
\begin_inset Formula $S_{M}\in C$
\end_inset

 מהגדרת 
\begin_inset Formula $consisten\ cut$
\end_inset

 
\end_layout

\begin_layout Standard

\bar under
בכיון השני, נניח שאם 
\begin_inset Formula $r_{M}\in C$
\end_inset

 אז 
\begin_inset Formula $s_{M}$
\end_inset

 
\begin_inset Formula $\Leftarrow$
\end_inset

 
\lang english
C is consisten cut 
\end_layout

\begin_layout Itemize
צ
\begin_inset Quotes erd
\end_inset

ל שלכל 
\begin_inset Formula $e\in C$
\end_inset

 יש 
\begin_inset Formula $e'\in C$
\end_inset

 שמקיים 
\begin_inset Formula $e'\Rightarrow_{s}e$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
אם 
\begin_inset Formula $e,e'$
\end_inset

 שניהם התרחשו באותו קודקוד , הטענה נכונה 
\series bold
לכל
\series default
 חתך
\end_layout

\begin_layout Itemize
אם 
\begin_inset Formula $e,e'$
\end_inset

 הם מאורעות שליחה/קבלה של אותו הודעה, הטענה נכונה 
\series bold
מהנחה
\end_layout

\begin_layout Itemize
אחרת, הטענה נכונה באינדוקציה על כל המרחק בין
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 קודקדים 
\begin_inset Formula $e,e'$
\end_inset

 , מקוצרת:
\end_layout

\begin_deeper
\begin_layout Itemize
אחרת = יש 
\begin_inset Formula $e"$
\end_inset

 בינהם, והמרחק בין 
\begin_inset Formula $e,e"$
\end_inset

 ובין 
\begin_inset Formula $e',e"$
\end_inset

 מקיים את הנחת האינדוקציה.
\end_layout

\end_deeper
\end_deeper
\begin_layout Subsubsection
\begin_inset Formula $\text{Consistent snapshot}$
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\text{Consistent Snapshot = Global Snapshot = Consistent Global State.}$
\end_inset


\end_layout

\begin_layout Standard

\lang english
A 
\series bold
consistent snapshot
\series default
 is a 
\series bold
global system state
\series default
 which is 
\series bold
consistent with all 
\bar under
local
\bar default
 views
\series default
.
 
\end_layout

\begin_layout Itemize

\lang english
\begin_inset Formula $\text{Global System State}$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
\lang hebrew

\begin_inset Formula $A$
\end_inset

 הוקטור של מצבים פנימיים ב 
\begin_inset Formula $S$
\end_inset

 לכל הקודקדים
\end_layout

\begin_layout Itemize
\begin_inset Formula $Global-System-State$
\end_inset

 : הוא וקטור 
\begin_inset Formula $A$
\end_inset

 של מצבים פנימיים עם קורדינטה לכל קודקוד, המתארת את כל הארועים שחווה עד
 אותו רגע
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
- ואיכשהו הצלחנו לתפוס את המצבים לכל 
\begin_inset Formula $casual-shuffle$
\end_inset

 של 
\begin_inset Formula $S$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
נשים לב שיכול להיות שיהיה מצב של הודעה 
\begin_inset Quotes eld
\end_inset

בדרך
\begin_inset Quotes erd
\end_inset

 כי בזמן ה
\begin_inset Formula $snapshot$
\end_inset

 ההודעה עדיין לא הגיעה
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $\text{Consistent Snapshot}$
\end_inset

 - הוא וקטור 
\begin_inset Formula $A$
\end_inset

 של מצבים פנימיים עם קודרינטה לכל קודוק המתארת את כל האורעי םשחווה עד אותו
 רגע ב 
\begin_inset Formula $casual-shuffle$
\end_inset

 של 
\begin_inset Formula $S$
\end_inset


\end_layout

\begin_layout Subsubsection
משפט: וקטור 
\begin_inset Formula $A$
\end_inset

 עם קורדינטה לכל קודקדוד הוא 
\begin_inset Formula $\text{Consistent Snapshot }$
\end_inset

 
\begin_inset Formula $\iff$
\end_inset

 הוקטור 
\begin_inset Formula $A$
\end_inset

 מתקבל מ 
\begin_inset Formula $\text{Consistent Cut }$
\end_inset

 כלשהו 
\begin_inset Formula $C$
\end_inset

 
\end_layout

\begin_layout Standard
הוכחה:
\end_layout

\begin_layout Standard
כיוון ראשון - יהיה 
\begin_inset Formula $V$
\end_inset

 , 
\begin_inset Formula $\text{Consistent Snapshot}$
\end_inset

 
\begin_inset Formula $\Leftarrow$
\end_inset

 הוקטור 
\begin_inset Formula $A$
\end_inset

 מתקבל 
\begin_inset Formula $\text{Consistent Cut }$
\end_inset

 , 
\begin_inset Formula $C$
\end_inset

 .
\end_layout

\begin_layout Itemize
נשים לב ש
\begin_inset Formula $V$
\end_inset

 חייב להתאים לחתך 
\begin_inset Formula $C$
\end_inset

, כיון שאחרת ישנו קודקוד שלהגיד שיש הבדל, נותר לברר האם הוא 
\begin_inset Formula $consistent$
\end_inset

 .
\end_layout

\begin_layout Itemize
נניח בשלילה ש 
\begin_inset Formula $C$
\end_inset

 הוא 
\begin_inset Formula $\text{not consistent}$
\end_inset


\end_layout

\begin_layout Itemize
אז מטענה קודמת, ישנו 
\begin_inset Formula $r_{M}\in C$
\end_inset

 עם 
\begin_inset Formula $s_{M}\notin C$
\end_inset

 עבור הודעה 
\begin_inset Formula $M$
\end_inset

 כלשהי, 
\series bold
בכל
\series default
 הלו
\begin_inset Quotes erd
\end_inset

ז האפשריים
\end_layout

\begin_layout Itemize
בסתירה לנתון שקיים 
\begin_inset Formula $snapshot$
\end_inset

 כזה
\end_layout

\begin_layout Standard
כיון שני - יהיה וקטור 
\begin_inset Formula $A$
\end_inset

 המתקבל 
\begin_inset Formula $\text{consistent cut }$
\end_inset

 , 
\begin_inset Formula $C$
\end_inset

 
\begin_inset Formula $\Leftarrow$
\end_inset

 הוקטור 
\begin_inset Formula $A$
\end_inset

 הוא 
\begin_inset Formula $\text{consistent snapshot}$
\end_inset


\end_layout

\begin_layout Itemize
יהיה 
\begin_inset Formula $C$
\end_inset

 , 
\begin_inset Formula $\text{consistent cut }$
\end_inset


\end_layout

\begin_layout Itemize
לכל קודקוד 
\begin_inset Formula $u$
\end_inset

 נסמן 
\begin_inset Formula $t_{u}$
\end_inset

 כזמן כלשהו אחרי המאורע האחרון ב 
\begin_inset Formula $C\cap S|u$
\end_inset

 ולפני המאורע הראשון ב 
\begin_inset Formula $S|u\backslash C$
\end_inset

 
\end_layout

\begin_layout Itemize
יהיה 
\begin_inset Formula $t=\text{\ensuremath{\max\left\{ t_{u}:u\in V\right\} }}$
\end_inset

 ויהיה 
\begin_inset Formula $t'=\min\left\{ t_{u}\in V\right\} $
\end_inset

 - המאורע ה
\begin_inset Quotes erd
\end_inset

המקודם
\begin_inset Quotes erd
\end_inset

 ביותר וה
\begin_inset Quotes erd
\end_inset

מאוחר
\begin_inset Quotes erd
\end_inset

 ביותר
\end_layout

\begin_layout Itemize
לכל 
\begin_inset Formula $u\in V$
\end_inset

 , נזיז את כל מה שקרה בזמן 
\begin_inset Formula $t_{u}$
\end_inset

 , או שקרה אחרי, קדימה, ב 
\begin_inset Formula $t-t'$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less6_8.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
קווים שחורים עומדים, מסמנים את הזמנים .
 בירוק ההזחה 
\begin_inset Formula $t-t'$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Itemize
ונבצע חתך אחרי בזמן 
\begin_inset Formula $t$
\end_inset

 )הקו הירוק העומד(, נשים שלא לא שיננו את סדר המאורעות באף קודקוד, ונותר
 לברר מה עם המקרה הבא:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less6_9.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
מקרה בו נשלחה הודעה מ
\begin_inset Quotes erd
\end_inset

אחרי
\begin_inset Quotes erd
\end_inset

 החתך ל
\begin_inset Quotes erd
\end_inset

לפני
\begin_inset Quotes erd
\end_inset

 החתך
\end_layout

\end_deeper
\begin_layout Itemize
בגלל ש 
\begin_inset Formula $C$
\end_inset

 הוא 
\begin_inset Formula $\text{consistent cut }$
\end_inset

 לכל הודעה 
\begin_inset Formula $M$
\end_inset

 , אם נזיז את 
\begin_inset Formula $s_{M}$
\end_inset

 , אז נזיז גם 
\begin_inset Formula $r_{M}$
\end_inset

 בדיוק אותו דבר.
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
חישוב 
\begin_inset Formula $\text{consistent snapshot }$
\end_inset


\end_layout

\begin_layout Itemize
נניח שלכל מאורע 
\begin_inset Formula $e$
\end_inset

 יש שעון 
\begin_inset Formula $T(e)$
\end_inset

 כך שלכל שני מאורעות 
\begin_inset Formula $e,e'$
\end_inset

 מתקיים: 
\begin_inset Formula $e\Rightarrow_{s}e'\rightarrow T(e)<T(e')$
\end_inset

 , 
\end_layout

\begin_deeper
\begin_layout Itemize
בהנתן 
\begin_inset Formula $T$
\end_inset

 , נגדיר 
\begin_inset Formula $C(T_{0})$
\end_inset

 כסט המאורעות 
\begin_inset Formula $e$
\end_inset

 שבעבורם 
\begin_inset Formula $T(e)\leq T_{0}$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
טענה: 
\begin_inset Formula $C(T_{0})$
\end_inset

 הוא 
\begin_inset Formula $\text{consistent cut }$
\end_inset

 לכל 
\begin_inset Formula $T_{0}\geq0$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
הוכחה: מיידי מהגדרה
\end_layout

\end_deeper
\begin_layout Itemize
הערות:
\end_layout

\begin_deeper
\begin_layout Itemize
החלק שלא ברור , כיצד לבחור 
\begin_inset Formula $T_{0}$
\end_inset

 , כי:
\end_layout

\begin_deeper
\begin_layout Itemize
אם 
\begin_inset Formula $T_{0}$
\end_inset

 גדול מדי, לא ברור כמה זמן יקח לחשב את ה 
\begin_inset Formula $snapshot$
\end_inset

 עד שכל הקודקודים יגיעו לזמן הזה.
\end_layout

\begin_layout Itemize
אם 
\begin_inset Formula $T_{0}$
\end_inset

 קטן מדי , הוא לא כ
\begin_inset Quotes erd
\end_inset

כ מעודכן.
\end_layout

\end_deeper
\end_deeper
\begin_layout Subsubsection
\begin_inset Formula $Candy-Lamprot\ snapshot\ Algorithm$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection*
שיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
8
\numeric off
 
\end_layout

\begin_layout Standard
נחזור למטרתנו: חישוב 
\begin_inset Formula $\text{consistent snapshot }$
\end_inset

 של המערכת
\end_layout

\begin_layout Standard
הנחות:
\end_layout

\begin_layout Itemize
לא דורש שעונים לוגים - אם יש זה נחמד, אבל ניתן להסתדר בלי.
\end_layout

\begin_layout Itemize
הערוצים מתנהלים ב 
\begin_inset Formula $FIFO$
\end_inset

 
\end_layout

\begin_layout Itemize
אין נפילות - כל ההודעות מגיעות
\end_layout

\begin_layout Itemize
המערכת מקושרת )הגרף קשיר(
\end_layout

\begin_layout Itemize
כל קודקוד יכול לבקש 
\begin_inset Formula $snapshot$
\end_inset

 
\end_layout

\begin_layout Standard
הערה: 
\begin_inset Formula $FIFO$
\end_inset

 תמיד יתקיים , איך? 
\end_layout

\begin_layout Itemize
השולח נותן מספר מקומי לכל הודעה בכל ערוץ יוצא
\end_layout

\begin_layout Itemize
הודעות עם מספר קטן ישלחו לפני הודעות עם מספר גדול
\end_layout

\begin_layout Itemize
וזה יחזיק כל עוד כל ההודעות לא אובדות בדרך )אם אובדות המקבל יחכה להודעה
 אבודה, יתקע(
\end_layout

\begin_layout Standard
הרעיון - האלגוריתם:
\end_layout

\begin_layout Itemize
נניח שיש קודקוד 
\begin_inset Formula $u$
\end_inset

 שמבקש 
\begin_inset Formula $snapshot$
\end_inset

 
\end_layout

\begin_layout Itemize
אותו קודקוד שולח הודעה מיוחדת נקרא לה 
\begin_inset Formula $\left(marker\right)$
\end_inset

 המבקשת במעין 
\begin_inset Formula $flooging$
\end_inset

 , 
\begin_inset Formula $snapshot$
\end_inset

 מכולם .
 בנוסף הקודקוד מתחיל עם עצמו את החתך.
\end_layout

\begin_layout Itemize
יהיה קודקוד 
\begin_inset Formula $w$
\end_inset

 , כאשר מתקבלת הודעת 
\begin_inset Formula $\left(marker\right)$
\end_inset

 הראשונה, הקודקוד מקליט את המצב שלו - מסמן לעצמו את החתך - ושולח 
\begin_inset Formula $\left(marker\right)$
\end_inset

 לכל שכניו
\end_layout

\begin_layout Itemize
נסמן הודעות שנשלחו ללא קבלה במצב 
\begin_inset Formula $transit$
\end_inset

 
\end_layout

\begin_layout Itemize
אחרי קבלת הודעה מיוחדת בכל הערוצים , הקודקוד מסיים את ההקלטה ויכול להחזיר
 
\begin_inset Formula $snapshot$
\end_inset


\end_layout

\begin_layout Subsubsection
פסאודו
\end_layout

\begin_layout Itemize
הקודקוד 
\begin_inset Formula $u$
\end_inset

 שולח בקשת 
\begin_inset Formula $snapshot$
\end_inset

 , ו
\begin_inset Quotes erd
\end_inset

מקליט
\begin_inset Quotes erd
\end_inset

 את מצבו
\end_layout

\begin_layout Itemize
כאשר קודקוד 
\begin_inset Formula $w$
\end_inset

 מקבל הודעת 
\begin_inset Formula $\left(marker\right)$
\end_inset

 מקודקוד 
\begin_inset Formula $v$
\end_inset

 , 
\end_layout

\begin_deeper
\begin_layout Standard
אם 
\begin_inset Formula $w$
\end_inset

 עדיין לא 
\begin_inset Quotes eld
\end_inset

הקליט
\begin_inset Quotes erd
\end_inset

 את מצבו אז:
\end_layout

\begin_layout Itemize
\begin_inset Formula $w$
\end_inset

 
\begin_inset Quotes eld
\end_inset

מקליט
\begin_inset Quotes erd
\end_inset

 את מצבו
\end_layout

\begin_layout Itemize
מסמן שאין הודעות במצב 
\begin_inset Formula $transit$
\end_inset

 בין 
\begin_inset Formula $v$
\end_inset

 ל
\begin_inset Formula $w$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $w$
\end_inset

 מתחיל להקליט הודעות בשאר הערוצים המקבלים
\end_layout

\begin_layout Standard
אחרת:
\end_layout

\begin_layout Itemize
סט ההודעות במעבר בין 
\begin_inset Formula $v$
\end_inset

 ל
\begin_inset Formula $w$
\end_inset

 הוא סט ההודעות ה
\begin_inset Quotes erd
\end_inset

מוקלטות
\begin_inset Quotes erd
\end_inset

 מאז ש 
\begin_inset Formula $w$
\end_inset

התחיל להקליט ועד רגע זה
\end_layout

\end_deeper
\begin_layout Itemize
מייד, לאחר ש 
\begin_inset Formula $w$
\end_inset

 ה
\begin_inset Quotes erd
\end_inset

הקליט
\begin_inset Quotes erd
\end_inset

 את מצבו: 
\begin_inset Formula $w$
\end_inset

 שולח 
\begin_inset Formula $\left(marker\right)$
\end_inset

 בכל הערוצים היוצאים - לפני שהוא שולח כל הודעה אחרת
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
נכונות
\end_layout

\begin_layout Subsubsection
משפט: 
\begin_inset Formula $chandy-lamport$
\end_inset

 מחשב 
\begin_inset Formula $\text{consistent cut }$
\end_inset

 + מחשב נכון את ההודעות במעבר 
\end_layout

\begin_layout Standard
הוכחה:
\end_layout

\begin_layout Itemize

\bar under
\begin_inset Formula $\text{consistent cut }$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
ברור שהאלגוריתם מחשב את חתך 
\begin_inset Formula $C$
\end_inset

 , נניח בשלילה שאינו 
\begin_inset Formula $consistent$
\end_inset

 
\end_layout

\begin_layout Itemize
לכן ישנה הודעה 
\begin_inset Formula $M$
\end_inset

 שנשלחה מקודקוד 
\begin_inset Formula $v$
\end_inset

 ל קודקוד 
\begin_inset Formula $w$
\end_inset

 כלשהם , כך ש
\begin_inset Formula $r_{M}\in C$
\end_inset

 ו 
\begin_inset Formula $S_{M}\notin C$
\end_inset

 .
 )נשלחה מחוץ לחתך והתקבלה בתוך החתך( 
\end_layout

\begin_layout Itemize
בגלל ש 
\begin_inset Formula $S_{M}\notin C$
\end_inset

 נובע ש 
\begin_inset Formula $v$
\end_inset

 כבר קיבל 
\begin_inset Formula $\left(marker\right)$
\end_inset

 ולכן התחיל ל
\begin_inset Quotes erd
\end_inset

הקליט
\begin_inset Quotes erd
\end_inset

 את מצבו
\end_layout

\begin_layout Itemize
אבל אז, 
\begin_inset Formula $v$
\end_inset

 שלח הודעת 
\begin_inset Formula $\left(marker\right)$
\end_inset

 ל
\begin_inset Formula $w$
\end_inset

 לפני ששלח את 
\begin_inset Formula $M$
\end_inset

 , ולכן 
\begin_inset Formula $r_{M}\in C$
\end_inset

 בניגוד להנחה שההודעות נשלחות ב 
\begin_inset Formula $FIFO$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize

\bar under
מחשב נכון את ההודעות במעבר:
\end_layout

\begin_deeper
\begin_layout Itemize
ישנן
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
4
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
אפשרויות לשליחת הודעות
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less8_7.png
	scale 75

\end_inset


\end_layout

\begin_layout Standard
\align center

\numeric on
1
\numeric off
.
 בתוך החתך )לפני 
\begin_inset Formula $\leftarrow$
\end_inset

 לפני(
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\numeric off
.
 מחוץ )אחרי 
\begin_inset Formula $\leftarrow$
\end_inset

 אחרי( .

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\numeric off
.
 מבחוץ )אחרי( 
\begin_inset Formula $\leftarrow$
\end_inset

 פנימה )לפני(.

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
4
\numeric off
.
 פנימה )לפני( 
\begin_inset Formula $\leftarrow$
\end_inset

 החוצה(.
\end_layout

\begin_layout Standard
\align center
מקרה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 - לא יכול להתקיים מהגדרת החתך כ 
\begin_inset Formula $consistent$
\end_inset

 .
\end_layout

\end_deeper
\begin_layout Itemize
כעת נתבונן בהודעות המקולטות, ונבין את כל האפשרויות -מהחתך ועד הקו האדום
 שמסמן את ההודעה של סוף הקלטה:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less8_8.png
	scale 75

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
נתבונן בהודעות מ 
\begin_inset Formula $w$
\end_inset

 ל 
\begin_inset Formula $v$
\end_inset

 המוסמנות כ 
\begin_inset Formula $transit$
\end_inset

 - בציור זה רק חץ מספר
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
- כיון ש על פי תאור האלגוריתם, כל ההודעות הללו הן ההודעות שהתקבלו ב 
\begin_inset Formula $v$
\end_inset

 אחרי החתך )תחילת ה
\begin_inset Quotes erd
\end_inset

הקלטה
\begin_inset Quotes erd
\end_inset

( עד הרגע שהתקבלה הודעת 
\begin_inset Formula $\left(marker\right)$
\end_inset

 מ 
\begin_inset Formula $w$
\end_inset

 , ואילו בדיוק 
\begin_inset Formula $M$
\end_inset

 ההודעות.
\end_layout

\begin_layout Itemize
חץ
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\numeric off
,
\numeric on
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
: מהגדרה מחוץ לחתך כי ההודעה הגיע לפני/אחרי בהתאמה
\end_layout

\begin_layout Itemize
חץ
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
4
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
: לא יכול להתקיים בגלל ה 
\begin_inset Formula $FIFO$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
מימוש:
\end_layout

\begin_layout Itemize
תכונה יציבה - תכונה שכאשר 
\begin_inset Quotes eld
\end_inset

הופכת
\begin_inset Quotes erd
\end_inset

 ל 
\begin_inset Formula $true$
\end_inset

 , היא נשארת כזו
\end_layout

\begin_layout Itemize
פורמלית: תכונה יציבה יחס 
\begin_inset Formula $P$
\end_inset

 על קונפיגורציה גלובילת כך שאם 
\begin_inset Formula $P$
\end_inset

 היא 
\begin_inset Formula $true$
\end_inset

 , בקונפיגורציה 
\begin_inset Formula $C$
\end_inset

 כלשהי, אז 
\begin_inset Formula $P$
\end_inset

 מתקיימת לכל הקונפיגורציה שיכולות להתרחש בעקבות 
\begin_inset Formula $C$
\end_inset

 
\end_layout

\begin_layout Itemize
בדיקה יציבות תכונה - נבדוק עם תכונה מחזיקה ל 
\begin_inset Formula $\text{ consistent snapshot}$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $Safety$
\end_inset

 : יהיה 
\begin_inset Formula $true$
\end_inset

 אם מצבה הנוכחי של התכונה בר השגה מכל 
\begin_inset Formula $\text{ consistent snapshot}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $Liveness$
\end_inset

 : אם התכונה מתקיימת, לבסוף אם יובחן 
\begin_inset Formula $snapshot$
\end_inset

 שמוביל 
\begin_inset Formula $\text{ consistent snapshot}$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
\begin_inset Formula $Consensus$
\end_inset


\end_layout

\begin_layout Standard
הנושאים שלפנינו:
\end_layout

\begin_layout Itemize

\lang english
Consensus 3: Read‐Modify‐Write Shared Memory.
 
\end_layout

\begin_layout Itemize

\lang english
Consensus 4: Synchronous Systems.
 
\end_layout

\begin_layout Itemize

\lang english
Consensus 5: Byzantine Failures.
 
\end_layout

\begin_layout Itemize

\lang english
Consensus 6: A Simple Algorithm for Byzantine Agreement.
 
\end_layout

\begin_layout Itemize

\lang english
Consensus 7: The Queen Algorithm.
 
\end_layout

\begin_layout Itemize

\lang english
Consensus 8: The King Algorith
\end_layout

\begin_layout Subsection*

\lang english
Introduction 
\end_layout

\begin_layout Standard
\align center

\lang english
\begin_inset Graphics
	filename distributed - pictures/less8_2.png
	scale 60

\end_inset


\begin_inset Graphics
	filename distributed - pictures/less8_1.png
	scale 60

\end_inset


\end_layout

\begin_layout Standard
\align center
בעיה ראשונה - במערכות מודררניות עברנו ממעבד אחד למספר מעבדים שכותבים על
 אותו זכרון, ויש חשש שידרסו את הזכרון אחד של השני.
\end_layout

\begin_layout Standard
\align center
בעיה שניה - תקלות, וזיהוי תקלות )אולי סתם מעבד עסוק(
\end_layout

\begin_layout Standard
\begin_inset Formula $Consensus$
\end_inset

 - הסכמה בין מספר מעבדים/תהליכים.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less8_3.png
	scale 60

\end_inset


\begin_inset Formula $\begin{matrix}\Leftarrow\\
\\
\\
\\
\\
\end{matrix}$
\end_inset


\begin_inset Graphics
	filename distributed - pictures/less8_4.png
	scale 60

\end_inset


\end_layout

\begin_layout Standard
פורמלית:
\end_layout

\begin_layout Itemize
יהיו 
\begin_inset Formula $n$
\end_inset

 תהלכים/ת'רדים/קודקודים, נסמנם ב: 
\begin_inset Formula $v_{1},...,v_{n}$
\end_inset


\end_layout

\begin_layout Itemize
כל קודקוד 
\begin_inset Formula $v_{i}$
\end_inset

יש לו קלט 
\begin_inset Formula $x_{i}$
\end_inset

 מקבוצת קלטים 
\begin_inset Formula $D$
\end_inset

 
\end_layout

\begin_layout Itemize
כל קודקוד 
\begin_inset Formula $v_{i}$
\end_inset

 מחשב את 
\begin_inset Formula $y_{i}\in D$
\end_inset

 
\end_layout

\begin_layout Itemize
נדרוש ש:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $\boldsymbol{Agreement}$
\end_inset

 : כל הפלטים יהיו זהים )מלבד התקולים(
\end_layout

\begin_layout Itemize
\begin_inset Formula $\boldsymbol{Validity}$
\end_inset

 : אם כי הקלטים שווים ל 
\begin_inset Formula $x$
\end_inset

 כלשהו, אז גם כל הפלטים יהיו שווים ל 
\begin_inset Formula $x$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $\boldsymbol{Termination}$
\end_inset

 : כל התהליכים הלא תקולים מסיימים בזמן סופי כל צעדים
\end_layout

\end_deeper
\begin_layout Itemize
הערות:
\end_layout

\begin_deeper
\begin_layout Itemize
לעיתים 
\begin_inset Formula $validity$
\end_inset

 תלוי במודל - בשני גנרלים, המודל הוא תקשרות סינכרונית, והודעות יכולות ללכת
 לאיבוד.
\end_layout

\begin_deeper
\begin_layout Itemize
אז ה 
\begin_inset Formula $validity$
\end_inset

 : אם כל ההודעות הגיעו, ולשני הקודקודים יש את אותו קלט 
\begin_inset Formula $x$
\end_inset

 , אז לשניהם הפלט 
\begin_inset Formula $x$
\end_inset

 )הראנו שבלתי פתיר(
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
דוגמאות לצורך בקונצנזוס: בחירות , מימוש של 
\begin_inset Formula $mutual\ exclusion$
\end_inset

 , שני הגנרלים, ועוד.
 לעיתים הבעיה אינה פתירה, מטרתנו היא להבין מתי פתיר בהתאם למודל, ולהוכיח
 זאת.
\end_layout

\begin_layout Subsection

\lang english
\begin_inset Formula $\text{Consensus 1: Shared Memory. }$
\end_inset


\end_layout

\begin_layout Standard
המודל:
\end_layout

\begin_layout Itemize
ישנם 
\begin_inset Formula $n\geq2$
\end_inset

 מעבדים
\end_layout

\begin_layout Itemize
\begin_inset Formula $Shared\ memory$
\end_inset

 - הוא זכרון שניתן לגשת אליו, בו זמנית על ידי מספר תהליכים.
\end_layout

\begin_layout Itemize
תהליך יכול לקרוא או לכתוב לתא בזכרון, וזו פעולה אטומית.
\end_layout

\begin_layout Subsubsection
הצעה לאלגוריתם
\end_layout

\begin_layout Itemize
נציע אלגוריתם, לקבלת קונצנזוס:
\end_layout

\begin_deeper
\begin_layout Itemize
נחליט שישנו תא מסוים בזכרון, נסמנו ב 
\begin_inset Formula $c$
\end_inset

 
\end_layout

\begin_layout Itemize
אתחול 
\begin_inset Formula $c=?$
\end_inset

 , כלומר מצב מיוחד
\end_layout

\begin_layout Itemize
תהליך
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, כותב 
\begin_inset Formula $x_{i}$
\end_inset

 ל 
\begin_inset Formula $c$
\end_inset

 ופולט את 
\begin_inset Formula $x_{i}$
\end_inset

 
\end_layout

\begin_layout Itemize
לכל תהליך 
\begin_inset Formula $j\neq1$
\end_inset

 , קורא את 
\begin_inset Formula $c$
\end_inset

 עד שהוא רואה 
\begin_inset Formula $c\neq?$
\end_inset

 , ואז פולט את הערך שכתוב
\end_layout

\end_deeper
\begin_layout Itemize
האם פותר את הבעיה?
\end_layout

\begin_deeper
\begin_layout Itemize
כן, כל עוד אין תקלות - אם תהליך
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
נופל, הלולאה אינסופית.
\end_layout

\end_deeper
\begin_layout Standard
סוגי תקלות:
\end_layout

\begin_layout Itemize
\begin_inset Formula $Unexpected\ Delay$
\end_inset

- עיקוב בלתי צפוי
\end_layout

\begin_layout Itemize
\begin_inset Formula $Heterogeneous\ Architectures$
\end_inset

 - עומס
\end_layout

\begin_layout Itemize
\begin_inset Formula $Fault\text{‐}Tolerance$
\end_inset

 - תקול.
\end_layout

\begin_layout Standard
הגדרת ניתן לחישוב:בעיה נתנת לחישוב אם קיימת לה מכונת טיורניג שפותרת אותו
\end_layout

\begin_layout Standard
הגדרת חישוב 
\begin_inset Formula $shared-memory$
\end_inset

 : אם בנוסף יש 
\begin_inset Formula $wait-free$
\end_inset

 , כלומר אני לא צריך לחכות לאף אחד.
\end_layout

\begin_layout Subsubsection*
שיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
9
\numeric off
 
\end_layout

\begin_layout Subsection

\lang english
\begin_inset Formula $\text{Consensus 2: Wait‐free Shared Memory.}$
\end_inset


\end_layout

\begin_layout Standard
המודל:
\end_layout

\begin_layout Itemize
ישנם 
\begin_inset Formula $n\geq2$
\end_inset

 מעבדים
\end_layout

\begin_layout Itemize
תהליך יכול לקרוא או לכתוב לתא ב
\bar under
זכרון המשותף
\bar default
, וזו פעולה אטומית.
 
\end_layout

\begin_layout Itemize
תהליך יכול לקרוס )או להתעכב(
\end_layout

\begin_layout Itemize
דרישות למימוש:
\end_layout

\begin_deeper
\begin_layout Itemize
כל תהליך יסיים במספר סופי של צעדים
\end_layout

\begin_layout Itemize
אי אפשר להשתמש במנעולים )כמו במערכות הפעלה( - כי אם ת'רד קורס במצב נעול,
 הוא לא יכול להתקדם וגם כל מי שבא אחריו.
 ובכללי לא מחכים ל
\begin_inset Quotes erd
\end_inset

תשובה
\begin_inset Quotes erd
\end_inset

 מת'רד אחר.
\end_layout

\begin_layout Itemize
נניח שפעולת קריאה וכתיבה הן אטומיות במודל
\end_layout

\end_deeper
\begin_layout Subsubsection
הצעה לאלגוריתם:
\end_layout

\begin_layout Itemize
נאתחל את תא 
\begin_inset Formula $c=?$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
כל מעבד 
\begin_inset Formula $i$
\end_inset

 פועל כך:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $r=read(c)$
\end_inset


\end_layout

\begin_layout Itemize
אם 
\begin_inset Formula $r=?$
\end_inset

 
\begin_inset Formula $\Leftarrow$
\end_inset

 
\begin_inset Formula $\Leftarrow write\left(c,x\right)$
\end_inset

 פלוט 
\begin_inset Formula $x$
\end_inset

 
\end_layout

\begin_layout Itemize
אחרת 
\begin_inset Formula $\Leftarrow$
\end_inset

 פלוט 
\begin_inset Formula $r$
\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
האם פותר את הבעיה?
\end_layout

\begin_deeper
\begin_layout Itemize
לא, אמנם 
\begin_inset Formula $write$
\end_inset

 היא פעולה אטומית, אבל מהגדרת הבעיה 
\bar under
בין קריאה לכתיבה
\bar default
 יכול להכנס תהליכים אחרים, ולכן יכול להיות מצב שכמה יקראו 
\begin_inset Formula $"?"$
\end_inset

 , למשל:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less8_5.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
טכניקה נוספת לראות את הבעיה, הוא עץ שייצג את כל הריצות האפשריות )שימושי
 להוכחות(:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less8_6.png
	scale 70

\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
נרצה להראות שאין אלגוריתם שפותר את בעית הקונצנזוס האנסכרונית, 
\begin_inset Formula $wait-free$
\end_inset

 כאשר הפעולות האטומית הן קריאה/כתיבה
\end_layout

\begin_layout Standard
הכנות:
\end_layout

\begin_layout Itemize
לשם הפשטות, ניקח שני מעבדים 
\begin_inset Formula $A,B$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
)אחרת נוכל לומר שהשאר תקולים(, וא
\begin_inset Quotes erd
\end_inset

ב 
\begin_inset Formula $\left\{ 0,1\right\} $
\end_inset

 
\end_layout

\begin_layout Itemize
הגדרות: 
\end_layout

\begin_deeper
\begin_layout Itemize
נגדיר 
\begin_inset Quotes eld
\end_inset

צעד
\begin_inset Quotes erd
\end_inset

 ל 
\begin_inset Formula $A$
\end_inset

 או 
\begin_inset Formula $B$
\end_inset

 כך: קריאה או כתיבה לזכרון )הפעולות האטומיות(
\end_layout

\begin_layout Itemize
אז 
\series bold
עץ ההרצות
\series default
 יראה כך:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_1.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
נשים לב שישנם קודקודים עם צעד אחד )
\begin_inset Quotes erd
\end_inset

בלי פיצול
\begin_inset Quotes erd
\end_inset

( - כי כבר התקבלה החלטה לפלט באלגוריתם
\end_layout

\begin_layout Standard

\bar under
נגדיר:
\end_layout

\begin_layout Itemize
\begin_inset Formula $\boldsymbol{Bivalent}$
\end_inset

 : קודקוד שיכול לקבל ערכים שונים בהרצות שונות , אצלנו פעם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
פעם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
 
\end_layout

\begin_layout Itemize
\begin_inset Formula $\boldsymbol{Univalent}$
\end_inset

 : קודקוד שבכל ההרצות יקבל את אותו ערך, אצלנו נסמן : 
\begin_inset Formula $1/0-valent$
\end_inset


\end_layout

\begin_layout Itemize

\series bold
קודקוד קריטי:
\series default
 קודקוד שהוא 
\begin_inset Formula $Bivalent$
\end_inset

 וילדיו הם 
\begin_inset Formula $Univalent$
\end_inset

 ,
\end_layout

\begin_deeper
\begin_layout Itemize
מסקנה: בהכרח כל ילד הוא 
\begin_inset Formula $Univalent$
\end_inset

 אם ערך שונה.
\end_layout

\end_deeper
\end_deeper
\begin_layout Subsubsection
טענה: ישנו קלט שבעבורו הקודקוד ההתחלתי הוא 
\begin_inset Formula $Bivalent$
\end_inset

 
\end_layout

\begin_layout Itemize
נשים לב שבמחינת האדום ב
\begin_inset Quotes erd
\end_inset

ריצת סולו
\begin_inset Quotes erd
\end_inset

, אין הבדל אם הכחול תקין או לא - במילים אחרות בריצת סולו, הוא מחליט לבד
 לא משנה לו אם הכחול התקול או פשוט איטי מאוד.
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_3.png
	scale 70

\end_inset


\begin_inset Graphics
	filename distributed - pictures/less9_2.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
ולכן בגלל ה 
\begin_inset Formula $validity$
\end_inset

 ישנן
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
הרצות לא נתנות להבחנה מנקודת מבטו של האדום, ולכן התוצאה שלו חייבת להיות
 זהה - בציורים יפלוט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_4.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
כעת , נתבונן בהרצה שהאדום -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\numeric off
, והכחול
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 - 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_5.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
בענף השמאלי, כפי שהסברנו האדום 
\begin_inset Quotes eld
\end_inset

רץ סולו
\begin_inset Quotes erd
\end_inset

 ולכן לא משנה לו מצב הכחול, ולכן פולט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, מהסכמה הכחול פולט גם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
.
\end_layout

\begin_layout Itemize
בענץ הימני, נחיל את 
\begin_inset Quotes eld
\end_inset

ריצת הסולו
\begin_inset Quotes erd
\end_inset

 על הכחול, ולכן לא משנה לו מצב האדום, ולכן פולט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, מהסכמה האדום פולט גם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
 
\end_layout

\begin_layout Itemize
כלומר מצאנו שורש שהוא 
\begin_inset Formula $Bivalent$
\end_inset

 .
\end_layout

\end_deeper
\begin_layout Subsubsection
למה
\family roman
\series bold
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
: יש קודקוד קריטי
\end_layout

\begin_layout Itemize
מטענה קודמת יש קודקוד איבוואלנטי, ווניח בשלילה שאין קודקוד קריטי
\end_layout

\begin_layout Itemize
נניח שקודקוד זה אינו קודקוד קריטי, לכן בה
\begin_inset Quotes erd
\end_inset

כ יש לו בן שהוא
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, ובן שהוא גם איבוואלינטי
\end_layout

\begin_layout Itemize
נניח שגם קודקדו זה אינו קודקוד קריטי, לכן....
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_6.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
אם נמשיך כך עד אין סוף, נקבל סתירה לסופיות העץ, ואם הגענו לשכבת עלים, אז
 אביהם הוא קודקוד קריטי בסתירה להנחה
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_7.png
	scale 70

\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
נשים לב שעד כה לא השתמשנו בתכונות מודל הזכרון המשותף
\end_layout

\begin_layout Subsubsection
למה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
: אין קודקוד קריטי
\end_layout

\begin_layout Itemize
נניח בשלילה שיש קודקוד קריטי, ונפצל למקרים:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_8.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
אלו
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
16
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
הקומבינציות האפשריות של 
\begin_inset Formula $x,y$
\end_inset

 קריאה וכתיבה
\end_layout

\end_deeper
\begin_layout Itemize
נתבונן במקרים 
\bar under
שלפחות אחד קורא
\bar default
, בה
\begin_inset Quotes erd
\end_inset

כ נבחר את 
\begin_inset Formula $B$
\end_inset

 ואת 
\begin_inset Formula $A$
\end_inset

 כרצונו.
\end_layout

\begin_layout Itemize
מההנחה בשלילה נוכל לרדת ב
\begin_inset Quotes erd
\end_inset

עץ ההרצות
\begin_inset Quotes erd
\end_inset

 עד הקודקוד הנ
\begin_inset Quotes erd
\end_inset

ל ,נסמנו ב 
\begin_inset Formula $c$
\end_inset

 
\end_layout

\begin_layout Itemize
כיון ש
\begin_inset Formula $c$
\end_inset

 קודקוד קריטי אחד מבניו הוא 
\begin_inset Formula $0$
\end_inset

 והשני הוא 
\begin_inset Formula $1$
\end_inset

 כך שכל תת העץ הנפרש על ידי כל אחד מהבנים נותן את אותו פלט בהתאמה
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_9.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
נתבונן בתת העץ של 
\begin_inset Formula $0$
\end_inset

 , ומכך ש
\begin_inset Formula $A$
\end_inset

 רץ סולו, נקבל פלט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\end_layout

\begin_layout Itemize
נתבונן בתת של 
\begin_inset Formula $1$
\end_inset

 , שם 
\series bold

\begin_inset Formula $B$
\end_inset

 קורא 
\series default
ו
\begin_inset Formula $A$
\end_inset

 ממשיך את ריצת הסולו.
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
בעבור 
\begin_inset Formula $A$
\end_inset

 לא השתנה דבר
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
עד הקודקוד הקריטי הכל התנהל על אותו מסלול, 
\end_layout

\begin_layout Itemize
ומהפניה ל
\begin_inset Formula $1$
\end_inset

 כל ההבדל הוא ש
\begin_inset Formula $B$
\end_inset

 קרא, אבל ממבנה המודל 
\begin_inset Formula $A$
\end_inset

 לא מושפע מכך, ולכן ממשיך את ריצתו בדיוק אותו דבר
\end_layout

\begin_layout Itemize
לכן 
\begin_inset Formula $A$
\end_inset

 פולט 
\begin_inset Formula $0$
\end_inset

 
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
וקיבלנו סתירה לכך ש 
\begin_inset Formula $c$
\end_inset

 קודקוד קריטי.
\end_layout

\begin_layout Itemize
לכן הטבלה שלנו נראית כך - 
\begin_inset Formula $no$
\end_inset

 מסמן את המקומות שבהם אין קודקוד קריטי:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_10.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
נתבונן במקרים ש
\bar under
שניהם כותבים לתאים שונים
\end_layout

\begin_layout Itemize
בה
\begin_inset Quotes erd
\end_inset

כ 
\begin_inset Formula $B$
\end_inset

 כותב ל 
\begin_inset Formula $x$
\end_inset

 , ו 
\begin_inset Formula $A$
\end_inset

 כותב ל 
\begin_inset Formula $y$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_11.png

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
מההנחה בשלילה יש קודקוד קריטי נסמנו ב
\begin_inset Formula $c$
\end_inset

 
\end_layout

\begin_layout Itemize
מצד אחד:
\end_layout

\begin_deeper
\begin_layout Itemize
- הבן של ה
\numeric on
0
\end_layout

\begin_layout Itemize
נתבונן בענף של 
\begin_inset Formula $A$
\end_inset

 כתב ל
\begin_inset Formula $y$
\end_inset

 
\end_layout

\begin_layout Itemize
ניתן ל
\begin_inset Formula $B$
\end_inset

 להשלים את כתיבתו ל 
\begin_inset Formula $x$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
מצד שני - הבן של ה
\numeric on
1
\end_layout

\begin_deeper
\begin_layout Itemize
נתבונן בענף של 
\begin_inset Formula $B$
\end_inset

 כתב ל
\begin_inset Formula $x$
\end_inset

 -
\end_layout

\begin_layout Itemize
ניתן ל
\begin_inset Formula $A$
\end_inset

 להשלים את כתיבתו ל
\begin_inset Formula $y$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
כעת, בשני הצדדים תת העץ יהיה זהה, כיון שכל תהליך פועל את פעולתו באופן עצמאי,
 כלומר סדר קבלת ההחלטות של הקודקודים זהה עד כדי סדר הפעולות )שהצבענו עליהם(
 וממבנה המודל 
\begin_inset Formula $waiting-free$
\end_inset

 , נותן פלטים זהים
\end_layout

\begin_layout Itemize
אבל מההנחה בשלילה תת העץ של
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
נותן פלטים של
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\numeric off
, ושל
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
פלטים של
\numeric on
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, סתירה.
\end_layout

\begin_layout Itemize
לכן אין זה קודקוד קריטי, ולכן:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_12.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
נותר המקרה בו 
\series bold
שניהם כותבים לאותו רג'יסטר
\series default
, בה
\begin_inset Quotes erd
\end_inset

כ שניהם כותבים ל
\begin_inset Formula $x$
\end_inset

 
\end_layout

\begin_layout Itemize
מההנחה בשלילה, נוכל לרדת בעץ עד הקודקוד הקריטי 
\begin_inset Formula $c$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_13.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
מצד אחד כותב ל
\begin_inset Formula $x$
\end_inset

 בבן של 
\begin_inset Formula $0$
\end_inset

 , ורץ סולו לכן הפלט יהיה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\numeric off
 
\end_layout

\begin_layout Itemize
מצד שני 
\begin_inset Formula $B$
\end_inset

 כותב ל
\begin_inset Formula $x$
\end_inset

 בבן של ה
\begin_inset Formula $1$
\end_inset

 , 
\end_layout

\begin_deeper
\begin_layout Itemize
כעת 
\begin_inset Formula $A$
\end_inset

 כותב )מהגדרת המקרה( ורץ את אותו מסלול החלטות שגרם לו לפלוט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
- גם אין לו איך לדעת שמשהו שונה כי הוא דרס את פעולת 
\begin_inset Formula $B$
\end_inset

 
\end_layout

\begin_layout Itemize
לכן הפלט שלו הוא
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
בסתירה לכך שאנחנו בבן 
\begin_inset Formula $1-valent$
\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
סה
\begin_inset Quotes erd
\end_inset

כ:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_14.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection
נראה ברידוקציה - שהבעיה הזו לא פתירה לתור 
\begin_inset Formula $FIFO$
\end_inset

 
\end_layout

\begin_layout Standard
בעיה: נתון תור 
\begin_inset Formula $FIFO$
\end_inset

 מלא, איך מוציאים ממנו באופן מבוזר )לדוגמה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
תהליכים(
\end_layout

\begin_layout Itemize
נניח בשלילה שהצלחנו - כלומר יש לנו אלגוריתם כזה .
\end_layout

\begin_layout Itemize
נניח אם כן שיש לנו תור המכיל
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
כדורים, ונניח שיש לנו גם זיכרון של
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
רגיסטרים:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_15.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
ובעזרת האלגוריתם, נוכל לממש:
\end_layout

\begin_deeper
\begin_layout Itemize
כל אחד משני התהלכים ירשום את ה 
\begin_inset Formula $input$
\end_inset

 שלו בזיכרון
\end_layout

\begin_layout Itemize
לאחר שתהליך כתב לרגיסטר הוא הולך לתור )ומוציא את הראשון(
\end_layout

\begin_deeper
\begin_layout Itemize
אם הוציא אדום )את הראשון( - לכן אפלוט את ה
\begin_inset Formula $input$
\end_inset

 שלי
\end_layout

\begin_layout Itemize
אם הוציא שחור )את השני( - לכן אלך לתא של השני ואפלוט את מה שרשום
\end_layout

\end_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less9_16.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
למה זה פותר?
\end_layout

\begin_deeper
\begin_layout Itemize
אם תהליך אחד קיבל את הכדור האדום, אז השני יקבל את הכדור השחור
\end_layout

\begin_layout Itemize
הזוכה באדום, יפלוט את ערכו
\end_layout

\begin_layout Itemize
ה
\begin_inset Quotes erd
\end_inset

מפסיד
\begin_inset Quotes erd
\end_inset

 = קיבל שחור, בהכרח ימצא את הערך של המנצח בזיכרון, בגלל שהרישום קורה לפני
 קבלת כדור
\end_layout

\end_deeper
\begin_layout Itemize
מסקנה:
\end_layout

\begin_deeper
\begin_layout Itemize
הצלחנו לפתור את בעית הקונצנזוס , בעזרת האלגוריתם הנ
\begin_inset Quotes erd
\end_inset

ל, לפעולות קריאה/כתיבה אטומיות
\end_layout

\end_deeper
\begin_layout Itemize
מכאן נובע שפתרנו את בעיית הקונצנזוס, בסתירה למשפט שהראנו בכיתה, ומכאן נובע
 שאין אלגוריתם כזה לתור 
\begin_inset Formula $FIFO$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsection

\lang english
\begin_inset Formula $\text{Consensus 3: Read-Modify-Write Memory}$
\end_inset


\end_layout

\begin_layout Standard
המודל:
\end_layout

\begin_layout Itemize
ישנם 
\begin_inset Formula $n\geq2$
\end_inset

 מעבדים
\end_layout

\begin_layout Itemize
\begin_inset Formula $Wait-free$
\end_inset


\end_layout

\begin_layout Itemize
תהליך יכול 
\bar under
לקרוא ולכתוב
\bar default
 לתא בזכרון המשותף, וזו 
\bar under
פעולה אטומית
\bar default
.
 
\end_layout

\begin_layout Itemize
תהליך יכול לקרוס )או להתעכב(
\end_layout

\begin_layout Standard
נקרא לזה 
\begin_inset Formula $RMW=read-modify-write\ register$
\end_inset


\end_layout

\begin_layout Subsubsection
אלגוריתם:
\end_layout

\begin_layout Itemize
אתחול: יהיה תא 
\begin_inset Formula $c$
\end_inset

 בזיכרון, ונכתוב בו 
\begin_inset Formula $'?'$
\end_inset

 
\end_layout

\begin_layout Itemize
כל תהליך 
\begin_inset Formula $i$
\end_inset

 )מעבד( יבצע - 
\begin_inset Formula $i\in\left[1,m\right]$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $r=read(c)$
\end_inset

 
\end_layout

\begin_layout Itemize
אם 
\begin_inset Formula $r='?'$
\end_inset

 אז 
\begin_inset Formula $write\left(c,x\right)$
\end_inset

 ופלוט 
\begin_inset Formula $x$
\end_inset

 
\end_layout

\begin_layout Itemize
אחרת, פלוט 
\begin_inset Formula $r$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Standard
האלגוריתם עובד כראוי
\end_layout

\begin_layout Itemize
כאשר התהליך הראשון ניגש ל 
\begin_inset Formula $c$
\end_inset

 בפעם הראשונה, הוא יבצע החלטה שכל התהליכים יבצעו בעקבותיה
\end_layout

\begin_deeper
\begin_layout Itemize
הפרוטוקול הוא 
\begin_inset Formula $wait-free$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Formula $RMW$
\end_inset

 הוא בעל דרישות גבוהות מאוד, האם יש דרך לפתור זאת עם דרישות חלשות יותר?
\end_layout

\begin_layout Standard
פורמלית, האם אפשר?
\end_layout

\begin_layout Itemize
נגדיר 
\begin_inset Formula $method$
\end_inset

 שמקבלת:
\end_layout

\begin_deeper
\begin_layout Itemize
זיכרון 
\begin_inset Formula $c$
\end_inset

 , ופונקציה 
\begin_inset Formula $f$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
ומבצעת
\end_layout

\begin_deeper
\begin_layout Itemize
החלפת 
\begin_inset Formula $x$
\end_inset

 שבתא עם 
\begin_inset Formula $f(x)$
\end_inset

 
\end_layout

\begin_layout Itemize
מחזירה את ה 
\begin_inset Formula $x$
\end_inset

 )הישן(
\end_layout

\end_deeper
\begin_layout Standard
והשאלה היא , האם נצליח לפתח מודל שיעבוד אם הקבלות כלשהם על 
\begin_inset Formula $f$
\end_inset

 ?
\end_layout

\begin_layout Standard
בקוד זה יראה כך:
\end_layout

\begin_layout LyX-Code

\lang english
public class RMW {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
private int value;
\end_layout

\begin_layout LyX-Code

\lang english
public synchorinzed int rmw (function f) {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
int prior = this.value;
\end_layout

\begin_layout LyX-Code

\series bold
\color blue
\lang english
this.value = f(this.value)
\end_layout

\begin_layout LyX-Code

\lang english
return prior;
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\begin_layout Standard
נשים לב שזהו הכללה לפעולה 
\begin_inset Formula $read$
\end_inset

 כאשר 
\begin_inset Formula $f$
\end_inset

 היא פונקציית הזהות:
\end_layout

\begin_layout LyX-Code

\lang english
public class RMW {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
private int value;
\end_layout

\begin_layout LyX-Code

\lang english
public synchorinzed int read () {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
int prior = this.value;
\end_layout

\begin_layout LyX-Code

\series bold
\size small
\color blue
\lang english
this.value = this.value
\end_layout

\begin_layout LyX-Code

\lang english
return prior;
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\begin_layout Standard
לצורך ההדגמה, נראה כעת כמה פונקציות מוכרות, ואיך מנגנון הזה עובד בהם:
\end_layout

\begin_layout Subsubsection*
\begin_inset Formula $Test\&Set$
\end_inset


\end_layout

\begin_layout LyX-Code

\lang english
public class RMW {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
private int value;
\end_layout

\begin_layout LyX-Code

\lang english
public synchorinzed int TAS () {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
int prior = this.value;
\end_layout

\begin_layout LyX-Code

\series bold
\color blue
\lang english
this.value = 1
\end_layout

\begin_layout LyX-Code

\lang english
return prior;
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\begin_layout Subsubsection*
\begin_inset Formula $Fetch\&Inc$
\end_inset


\end_layout

\begin_layout LyX-Code

\lang english
public class RMW {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
private int value;
\end_layout

\begin_layout LyX-Code

\lang english
public synchorinzed int FAI () {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
int prior = this.value;
\end_layout

\begin_layout LyX-Code

\series bold
\color blue
\lang english
this.value = this.value + 1
\end_layout

\begin_layout LyX-Code

\lang english
return prior;
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\begin_layout Subsubsection*
\begin_inset Formula $Fetch\&Add$
\end_inset


\end_layout

\begin_layout LyX-Code

\lang english
public class RMW {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
private int value;
\end_layout

\begin_layout LyX-Code

\lang english
public synchorinzed int FAA (int x) {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
int prior = this.value;
\end_layout

\begin_layout LyX-Code

\series bold
\color blue
\lang english
this.value = this.value + x
\end_layout

\begin_layout LyX-Code

\lang english
return prior;
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\begin_layout Standard

\lang english
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection*
\begin_inset Formula $SWAP$
\end_inset


\end_layout

\begin_layout LyX-Code

\lang english
public class RMW {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
private int value;
\end_layout

\begin_layout LyX-Code

\lang english
public synchorinzed int swap (int x) {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
int prior = this.value;
\end_layout

\begin_layout LyX-Code

\series bold
\color blue
\lang english
this.value =  x
\end_layout

\begin_layout LyX-Code

\lang english
return prior;
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\begin_layout Subsubsection*
\begin_inset Formula $Compare\&swap$
\end_inset


\end_layout

\begin_layout LyX-Code

\lang english
public class RMW {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
private int value;
\end_layout

\begin_layout LyX-Code

\lang english
public synchorinzed int FAA (int old , int new) {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
int prior = this.value;
\end_layout

\begin_deeper
\begin_layout LyX-Code

\series bold
\color blue
\lang english
if (this.value == old)
\end_layout

\begin_deeper
\begin_layout LyX-Code

\series bold
\color blue
\lang english
this.value = this.value + x
\end_layout

\end_deeper
\end_deeper
\begin_layout LyX-Code

\lang english
return prior;
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\begin_layout Standard

\lang english
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
כעת, לאחר שהבנו מה 
\begin_inset Quotes eld
\end_inset

עובד
\begin_inset Quotes erd
\end_inset

 או מה 
\begin_inset Quotes eld
\end_inset

לא עובד
\begin_inset Quotes erd
\end_inset

 נרחיב את הדיון ל
\bar under
עד כמה
\bar default
 הוא עובד, כלומר באילו הגבלות נצליח שיעבוד
\end_layout

\begin_layout Standard
הגדרה: נאמר שלאובייקט מסוים 
\series bold
מספר הקונצנזוס הוא 
\begin_inset Formula $n$
\end_inset

 , 
\series default
אם הוא עובד עם 
\begin_inset Formula $read/write$
\end_inset

 ו
\begin_inset Formula $n$
\end_inset

 תהליכים אך עבור התהליך ה 
\begin_inset Formula $n+1$
\end_inset

 הוא לא עובד.
\end_layout

\begin_layout Standard
למשל: למשל 
\begin_inset Formula $read/write\ registers$
\end_inset

 מספר הקונצנזוס שלו הוא 
\begin_inset Formula $1$
\end_inset

 : ל
\numeric on
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
זה עובד, ול
\numeric on
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
הראנו שלא.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Subsubsection*
שיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
10
\end_layout

\begin_layout Subsubsection
משפט: יהיה אובייקט 
\begin_inset Formula $Y$
\end_inset

 שבנינו בעזרתו אובייקט 
\begin_inset Formula $x$
\end_inset

 , אם 
\begin_inset Formula $x$
\end_inset

 יש מספר קונצנוס בגודל 
\begin_inset Formula $m$
\end_inset

 , אז מספר קונצנזוס של 
\begin_inset Formula $Y$
\end_inset

 הוא לפחות 
\begin_inset Formula $m$
\end_inset

 
\end_layout

\begin_layout Standard
דוגמה: הדוגמה שהראנו לעיל , נקח את 
\begin_inset Formula $X$
\end_inset

 להיות תור 
\begin_inset Formula $FIFO$
\end_inset

 , ואת 
\begin_inset Formula $Y$
\end_inset

 להיות בעיית הקונצנזוס , ואכן זה לא מתקיים
\end_layout

\begin_layout Itemize
מספר הקונצנזוס הוא דרך נוחה לבדוק את כח הסנכרון 
\end_layout

\begin_layout Itemize
ניסוח אחר:
\end_layout

\begin_deeper
\begin_layout Itemize
אם מספר הקונצנזוס של 
\begin_inset Formula $X$
\end_inset

 הוא 
\begin_inset Formula $n$
\end_inset

 
\end_layout

\begin_layout Itemize
ו
\begin_inset Formula $Y$
\end_inset

 מספר הקונצנזוס של 
\begin_inset Formula $Y$
\end_inset

 הוא 
\begin_inset Formula $n<m$
\end_inset


\end_layout

\begin_layout Itemize
אז אין דרך לבנות ב 
\begin_inset Formula $wait-free$
\end_inset

 את 
\begin_inset Formula $x$
\end_inset

 מ 
\begin_inset Formula $Y$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Standard
הגדרה: נאמר ש
\begin_inset Formula $RMW$
\end_inset

 אינו טריוויאלי אם קיים ערך ל 
\begin_inset Formula $x$
\end_inset

 כך ש 
\begin_inset Formula $x\neq f\left(x\right)$
\end_inset

 
\end_layout

\begin_layout Standard
כל הפונקציות: 
\end_layout

\begin_layout Standard
\align center

\lang english
Test&Set, Fetch&Inc, Fetch&Add, Swap, Compare&Swap, general RMW… 
\end_layout

\begin_layout Standard
\align center
מקיימות זאת - חוץ מ
\begin_inset Formula $read$
\end_inset

 = הזהות.
\end_layout

\begin_layout Subsubsection
משפט: ל 
\begin_inset Formula $RMW$
\end_inset

 לא טריוויאלי יש מספר קונצנזוס של לפחות
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\end_layout

\begin_layout Standard
הוכחה:
\end_layout

\begin_layout Standard
מימוש
\end_layout

\begin_layout LyX-Code

\lang english
public class RMWConsensusFor2 implements Consensus {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
private RMW r;                   
\color brown
// initialized to v
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout LyX-Code

\lang english
public Object dedice() {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
int i = Thread.myIndex();
\end_layout

\begin_layout LyX-Code

\lang english
if(r.rmw(f) == v)            
\color brown
// Am i first?
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
return this.announce[i];  
\color brown
// Yes, return my input
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
else
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
return this.announce[1-i]  
\color brown
// No ,return other's input
\end_layout

\end_deeper
\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\begin_layout Standard

\lang english
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
הסבר:
\end_layout

\begin_layout Itemize
אתחול: הרג'יסטר 
\begin_inset Formula $r$
\end_inset

 מושם להיות הערך של 
\begin_inset Formula $v$
\end_inset

 
\end_layout

\begin_layout Itemize
הבהרה: 
\begin_inset Formula $r$
\end_inset

 הוא הרג'יסטר המיוחד, והוא קורא מתא בעזרת 
\begin_inset Formula $rmw$
\end_inset

 
\end_layout

\begin_layout Itemize
כעת בודקים אם 
\begin_inset Formula $r.rmw(f)==v$
\end_inset

 , אז אני 
\begin_inset Formula $thread$
\end_inset

 הראשון, 
\end_layout

\begin_deeper
\begin_layout Itemize
אז בתא המיוחד נכתב 
\begin_inset Formula $f(v)$
\end_inset

 )כפעולה אטומית(
\end_layout

\begin_layout Itemize
ואני פולט את ה
\series bold
ערך שלי
\series default
 )מתא בזיכרון רגיל שהוא שלי(
\end_layout

\end_deeper
\begin_layout Itemize
אם 
\begin_inset Formula $r.rmw(f)\neq v$
\end_inset

 אז בעבור כל 
\begin_inset Formula $thread$
\end_inset

 אחר:
\end_layout

\begin_deeper
\begin_layout Itemize
יפלוט את הערך 
\series bold
של הראשון
\end_layout

\begin_layout Itemize
מכך ש 
\begin_inset Formula $f$
\end_inset

 לא טרוויאלית , זה מתקיים.
\end_layout

\end_deeper
\begin_layout Standard
משפחות של פונקציות
\end_layout

\begin_layout Standard
תהיה 
\begin_inset Formula $F$
\end_inset

 משפחה של פונקציות כך שלכל 
\begin_inset Formula $f_{i},f_{j}\in F$
\end_inset

 ובנוסף הן מקיימות:
\end_layout

\begin_layout Itemize
)משפחת ה( קומטטיביות: 
\begin_inset Formula $f_{i}\left(f_{j}\left(x\right)\right)=f_{j}\left(f_{i}\left(x\right)\right)$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $Fetch\&Inc,Fetch\&Add,Read$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
)משפחת ה( דורסות: 
\begin_inset Formula $f_{i}\left(f_{j}\left(x\right)\right)=f_{i}\left(x\right)$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
לדוגמה: 
\begin_inset Formula $Test\&Set,Swap,Write$
\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection
טענה: לכל סט אובייקטים של 
\begin_inset Formula $RMW$
\end_inset

 יש מספר קונצנזוס הוא לכל היותר
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\numeric off
 
\end_layout

\begin_layout Standard
הוכחה - דומה להוכחה מ
\begin_inset Formula $\text{Wait‐free Shared Memory}$
\end_inset


\end_layout

\begin_layout Standard
וגם כאן נרצה להגיע לסתירה על קיימות הקודקוד הקריטי
\end_layout

\begin_layout Itemize
ההוכחה ש
\series bold
יש קודקוד קריטי
\series default
, היא כמעט אותה דבר, נראה ש
\series bold
אין קודקוד קריטי
\end_layout

\begin_deeper
\begin_layout Itemize
)ההוכחה שאין לא רלוונטית כי הסתמכנו על פעולת 
\begin_inset Formula $read,write$
\end_inset

 (
\end_layout

\end_deeper
\begin_layout Itemize
יהיו שלושה תהליכים 
\begin_inset Formula $A,B,C$
\end_inset

 , ונניח בשלילה שיש 
\begin_inset Formula $C$
\end_inset

 קודקוד קריטי
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_5.png
	scale 60

\end_inset


\end_layout

\begin_layout Standard
\align center
בדוגמה: 
\begin_inset Formula $C$
\end_inset

קריטי 
\begin_inset Formula $\Leftarrow$
\end_inset

 שמאלי הוא 
\begin_inset Formula $0-valent$
\end_inset

 , וימני 
\begin_inset Formula $1-valnet$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
בה
\begin_inset Quotes erd
\end_inset

כ נראה על מקרה מכל אפשרות:
\end_layout

\begin_layout Itemize
אם 
\begin_inset Formula $f$
\end_inset

 קומטטיבית אז:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_1.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
אז מהגדרת 
\begin_inset Formula $f$
\end_inset

:כקומטטיבית 
\begin_inset Formula $f_{A}\left(f_{B}\left(c\right)\right)=f_{B}\left(f_{A}\left(c\right)\right)$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_2.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
אבל 
\begin_inset Formula $C$
\end_inset

 מחליט כבר ערך אחר - כי מבחינתו אין הבדל - ומכאן שמצאנו ענף בעץ עם ערך שונה,
 ולכן 
\begin_inset Formula $C$
\end_inset

 אינו קריטי
\end_layout

\end_deeper
\begin_layout Itemize
אם 
\begin_inset Formula $f$
\end_inset

 דורסת אז:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_3.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
אז מהגדרת 
\begin_inset Formula $f$
\end_inset

 כדורסת: 
\begin_inset Formula $f_{A}(c)=f_{A}\left(f_{B}(c)\right)$
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_4.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
אבל 
\begin_inset Formula $C$
\end_inset

 מחליט כבר ערך אחר - כי מבחינתו אין הבדל - ומכאן שמצאנו ענף בעץ עם ערך שונה,
 ולכן 
\begin_inset Formula $C$
\end_inset

 אינו קריטי
\end_layout

\end_deeper
\begin_layout Standard
הערה: במחשבים בשנות ה
\numeric on
70
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
עבדנו עם הפונקציות 
\begin_inset Formula $Test\&Set,Fetch\$add,Swap$
\end_inset

 בשביל בעיית הקונצנזוס
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

נשים לב שהשמטנו מהרשימה את 
\begin_inset Formula $Compare\&Swap$
\end_inset

 , ונראה שהיא שמספר הקונצנזוס שלה הוא 
\begin_inset Formula $\infty$
\end_inset

 ,נראה כיצד:
\end_layout

\begin_layout LyX-Code

\lang english
public class RMWConsensus implements Consensus {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
private RMW r;                   
\color brown
// initialized to -1
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout LyX-Code

\lang english
public Object dedice() {
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
int i = Thread.myIndex();
\end_layout

\begin_layout LyX-Code

\lang english
int j = F.CAS(-1,j)
\end_layout

\begin_layout LyX-Code

\lang english
if(j == -1)            
\color brown
// Am i first?
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
return this.announce[i];  
\color brown
// Yes, return my input
\end_layout

\end_deeper
\begin_layout LyX-Code

\lang english
else
\end_layout

\begin_deeper
\begin_layout LyX-Code

\lang english
return this.announce[j]  
\color brown
// No ,return other's input
\end_layout

\end_deeper
\end_deeper
\begin_layout LyX-Code

\lang english
}
\end_layout

\end_deeper
\begin_layout Standard

\lang english
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Itemize
הסבר: 
\end_layout

\begin_deeper
\begin_layout Enumerate
\begin_inset Formula $thread$
\end_inset

 נכנס, בודק מה ה 
\begin_inset Formula $id$
\end_inset

 שלו
\end_layout

\begin_layout Enumerate
הולכים ל 
\begin_inset Formula $Compare\&Swap$
\end_inset

 , כאשר 
\begin_inset Formula $old=-1,new=id$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Enumerate
אם הוחזר 
\begin_inset Formula $-1$
\end_inset

 סימן שאני ראשון, ואפלוט את הערך שלי
\end_layout

\begin_layout Enumerate
אם הוחזר כל מספר אחר, סימן שאני לפחות שני ואחזיר את הערך בזיכרון במקום 
\begin_inset Formula $id$
\end_inset

 
\end_layout

\end_deeper
\end_deeper
\begin_layout Subsubsection*
היררכית מספר הקונצנזוס
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
\lang english
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\numeric on
\lang english
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
...
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
\begin_inset Formula $\infty$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
read/write registers
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Test&Set
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
CAS
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Fetch&Inc
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
LL/SC
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Tetch&add
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\lang english
Swap
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center
הערה: ניתן להגדיר גם מספר קןנצנזוס 
\begin_inset Formula $k$
\end_inset

 , ולממש אותו
\end_layout

\begin_layout Subsection

\lang english
\begin_inset Formula $\text{Consensus 4: Synchronous Systems }$
\end_inset


\end_layout

\begin_layout Itemize
נעבור להעברת הודעות במערכת סנכרונית )נזכיר שהראנו שזיכרון משותף והעברת הודעות
 שקולים(
\end_layout

\begin_layout Itemize
לשם הפשטות נניח שהגרפים מלאים
\end_layout

\begin_layout Itemize
במודל:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $Boardcast$
\end_inset

 :שליחת הודעה לכל הקודקודים בסיבוב אחד, ובכל סיבוב קודקוד יכול לבקש 
\begin_inset Formula $broadcast$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $Crash\ failer$
\end_inset

 : ה 
\begin_inset Formula $Broadcast$
\end_inset

 יכול להכשל אם קודקוד קרס
\end_layout

\begin_layout Itemize
בגלל שרק חלק מההודעות ישלחו:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_6.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
בדוגמה בסיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 קודקוד קרס ושלח רק חצי מההודעות שלו.
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
נגדיר את בעיית הקונצנזוס:
\end_layout

\begin_deeper
\begin_layout Itemize
קלט: לכולם יש ערך התחלתי כלשהו
\end_layout

\begin_layout Itemize
הסכמה: כולם צריך לפלוט את אותו ערך
\end_layout

\begin_layout Itemize
\begin_inset Formula $Validity$
\end_inset

: אם כולם התחילו עם אותו ערך, אז כולם יחליטו על אותו ערך
\end_layout

\begin_layout Itemize
\begin_inset Formula $Termination$
\end_inset

: כל תהליך מסיים לאחר מספר סופי של צעדים
\end_layout

\end_deeper
\begin_layout Standard
הצעה לאלגוריתם:
\end_layout

\begin_layout Itemize
כל תהליך יבצע:
\end_layout

\begin_deeper
\begin_layout Itemize
ישדר לכולם את ה
\begin_inset Formula $input$
\end_inset

 שלו
\end_layout

\begin_layout Itemize
מחליטים על המינימום
\end_layout

\end_deeper
\begin_layout Standard
נשים לב, שהאלגוריתם דורש סיבוב אחד, ובפרט מקיים 
\begin_inset Formula $termonation$
\end_inset

 
\end_layout

\begin_layout Standard
דוגמת הרצה )ללא קריסות(:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_7.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $validity$
\end_inset

 : גם אם כולם התחילו עם אותו ערך, הם לבסוף הם יחליטו עליו כערך מינימלי,
\end_layout

\begin_layout Standard
\align right
הבעיה, שהרשנו תקלות, ויכול להתרחש:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_8.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
הגדרה: אם אלגוריתם פותר קונצנזוס עם לכל היותר 
\begin_inset Formula $m$
\end_inset

 קודקודים תקולים, אז נאמר שהוא 
\begin_inset Formula $m-resillinet$
\end_inset


\end_layout

\begin_layout Standard
בציור - 
\begin_inset Formula $3-resillint$
\end_inset

 :
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_9.png

\end_inset


\end_layout

\begin_layout Subsubsection
\begin_inset Formula $m-resillient$
\end_inset

 אלוגריתם:
\end_layout

\begin_layout Standard
כל תהליך מבצע:
\end_layout

\begin_layout Itemize
בסיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
: משדר את הערך שלו
\end_layout

\begin_layout Itemize
בסיבובים
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
- עד 
\begin_inset Formula $m+1$
\end_inset

: משדר את המינימום שקיבל , אלא אם הוא כבר נשלח לפני
\end_layout

\begin_layout Itemize
סוף סיבוב 
\begin_inset Formula $m+1$
\end_inset

 : פולט את המינימום שקיבל
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
דוגמה: 
\begin_inset Formula $m=2$
\end_inset

 כלומר נרשה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
תקלות, ו לכן יהיו 
\begin_inset Formula $m+1=3$
\end_inset

 סיבובים:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_11.png
	scale 70

\end_inset


\begin_inset Graphics
	filename distributed - pictures/less10_10.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_13.png
	scale 70

\end_inset


\begin_inset Graphics
	filename distributed - pictures/less10_12.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
נשים לב , אם יש 
\begin_inset Formula $m$
\end_inset

 תקלות, ו 
\begin_inset Formula $m+1$
\end_inset

 סיבובים אז ישנו סיבוב אחד ללא תקלות:
\end_layout

\begin_layout Standard
\align center
לדוגמה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
5
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
נפילות,
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
6
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
סיבובים:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_14.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
בגלל שאנחנו לא יודעים מתי מתרחש הסיבוב הנ
\begin_inset Quotes erd
\end_inset

ל, יש להריץ 
\begin_inset Formula $m+1$
\end_inset

 הרצות
\end_layout

\begin_layout Subsubsection
משפט: במערכת סינכורנית עם העברת הודעות עם 
\begin_inset Formula $n\geq f+2$
\end_inset

 קודקודים, כל 
\begin_inset Formula $f-resillient$
\end_inset

 אלגוריתם דורש לפחות 
\begin_inset Formula $f+1$
\end_inset

 הרצות
\end_layout

\begin_layout Standard
הערה: נוכיח על ה 
\begin_inset Formula $worst-case$
\end_inset

 בו בכל סיבוב נפל קודקוד אחד
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

אינטואיציה:
\end_layout

\begin_layout Itemize
אם ישנם רק 
\begin_inset Formula $f$
\end_inset

 סיבובים, אז יכול להיות מקרה בו 
\begin_inset Formula $p_{i}$
\end_inset

 שלח את ערכו 
\begin_inset Formula $'a'$
\end_inset

 ל 
\begin_inset Formula $p_{k}$
\end_inset

 וקרס
\end_layout

\begin_layout Itemize
ובאותו אופן 
\begin_inset Formula $p_{k}$
\end_inset

 ל 
\begin_inset Formula $p_{m}$
\end_inset

 
\end_layout

\begin_layout Itemize
...
\end_layout

\begin_layout Itemize
עד ש 
\begin_inset Formula $p_{f}$
\end_inset

 שלח ל
\begin_inset Formula $p_{n}$
\end_inset

 וכעת רק 
\begin_inset Formula $p_{n}$
\end_inset

יודע את 
\begin_inset Formula $'a'$
\end_inset

 וכל השאר יודעים ערך אחר למשל 
\begin_inset Formula $b$
\end_inset

 
\end_layout

\begin_layout Itemize
ולכן צריך עוד סיבוב, שבו כולם ידעו את הערך הזה.
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_16.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
תזכורות:
\end_layout

\begin_layout Itemize
נאמר שהרצה 
\begin_inset Formula $E$
\end_inset

 היא 
\begin_inset Formula $indistinguishable$
\end_inset

 מהרצה 
\begin_inset Formula $E'$
\end_inset

 לקודקוד 
\begin_inset Formula $v$
\end_inset

 , אם 
\begin_inset Formula $v$
\end_inset

 רואה את אותו הקלט ואת אותם ההודעות ב
\begin_inset Formula $E$
\end_inset

 ו ב
\begin_inset Formula $E'$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
אם 
\begin_inset Formula $E$
\end_inset

 
\begin_inset Formula $\indis$
\end_inset

 מ 
\begin_inset Formula $E'$
\end_inset

 ל
\begin_inset Formula $v$
\end_inset

 ,אז 
\begin_inset Formula $v$
\end_inset

 יבצע את אותו רצף פעולות בשתי ההרצות
\end_layout

\begin_layout Itemize
נסמן זאת 
\begin_inset Formula $E|v=E'|v$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
באופן דומה, נאמר שההרצות 
\begin_inset Formula $E_{i},E_{j}$
\end_inset

 דומות אם 
\begin_inset Formula $E_{i}|v=E_{j}|v$
\end_inset

 , ו נסמן 
\begin_inset Formula $E_{i}\backsim_{v}E_{j}$
\end_inset

 
\end_layout

\begin_layout Standard

\bar under
רעיון ההוכחה )לא נוכיח לגמרי(:
\end_layout

\begin_layout Itemize
יהיו רצף ההרצות 
\begin_inset Formula $E_{0},E_{1},E_{2},....,E_{k}$
\end_inset

 כך ש 
\begin_inset Formula $E_{i-1},E_{i}$
\end_inset

 דומות לכל 
\begin_inset Formula $i\in\left\{ 1,..,k\right\} $
\end_inset

 ולכל 
\begin_inset Formula $i$
\end_inset

 כזה קיים קודקוד 
\begin_inset Formula $v_{j}$
\end_inset

 שבעבורו 
\begin_inset Formula $E_{i-1}\backsim_{v_{j}}E_{i}$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
הערה: קודקוד תקול, לא יכול לפלוט ולהרוס את ההסכמה )פלטת = תקין(
\end_layout

\end_deeper
\begin_layout Itemize
נשים לב שאם יש הסכמה על 
\begin_inset Formula $0$
\end_inset

 ונצליח שמבחינת קודקוד מסוים חלק מהפעמים הקלט יהיה 
\begin_inset Formula $0$
\end_inset

 וחלק יהיה 
\begin_inset Formula $1$
\end_inset

 ,אז נצליח לצור רצף הרצות דומות שהתחילה פולטות
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
ובסוף פולטות
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, וזו תהיה הסתירה )כמו בשני הגנרלים(
\end_layout

\begin_layout Itemize
ההוכחה היא באינדוקציה - ולא נראה אותה - נראה בדוגמה:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Formula $f=4$
\end_inset

 תקלות, ו 
\begin_inset Formula $n=6$
\end_inset

 קודקודים, ונניח בשלילה שיש רק
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
4
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
סיבובים
\end_layout

\begin_layout Standard
\align center
נתייחס לקודקוד העליון כקודקוד
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
ולתחתון כ
\numeric on
6
\end_layout

\begin_layout Standard
\align center
כחול - תקין, כתום - קורס, אפור - תקול
\end_layout

\end_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_17.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
נשים לב שאם נשנה ל
\begin_inset Formula $v_{6}$
\end_inset

 את הקלט בהרצה הראשונה ל
\numeric on
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, בסיבוב הבא כל הקודקודים ישימו לב לשינוי לכן נצטרך לבצע את השינויים בהדרגה
 מהסוף
\end_layout

\begin_layout Itemize
אז 
\begin_inset Formula $E_{0}$
\end_inset

 היא כמו בציור הכל תקין וכל ההודעות עוברות, ולכל הקודקודים הקלט הוא 
\begin_inset Formula $0$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Standard
נתבונן בסיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
:
\end_layout

\begin_layout Itemize
\begin_inset Formula $E_{1}$
\end_inset

: כעת נניח ש
\begin_inset Formula $v_{6}$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
שלח את כל ההודעות בסיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
ואז קרס
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_18.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $:E_{2}$
\end_inset

 
\begin_inset Formula $v_{6}$
\end_inset

 שלח הודעה רק ל 
\begin_inset Formula $v_{1}$
\end_inset

 אז ואז קרס 
\begin_inset Formula $E_{1}\backsim_{v_{1}}E_{2}$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $E_{3}$
\end_inset

 : נניח ש
\begin_inset Formula $v_{6}$
\end_inset

 קרס לפני ששלח ל
\begin_inset Formula $v_{1}$
\end_inset

 ובפרט מתקיים ש 
\begin_inset Formula $E_{2}\backsim_{\boldsymbol{v_{2}}}E_{3}$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $E_{4}$
\end_inset

 נניח פשוט ש 
\begin_inset Formula $v_{6}$
\end_inset

תקול לגמרי בסיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_19.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
עכשיו נרצה ש 
\begin_inset Formula $v_{5}$
\end_inset

 לא ישים לב להבדל, הבעיה היא שאם נוריד את החץ האדום, אז בסיבוב הבא הוא 
\begin_inset Quotes eld
\end_inset

יודיע לכולם
\begin_inset Quotes erd
\end_inset

 שיש בעיה, לכן נרצה להפוך אותו לתקול
\end_layout

\end_deeper
\begin_layout Itemize
לכן נפעיל את אותו טריק שעשינו ב
\begin_inset Formula $E_{2},E_{3}$
\end_inset

 ונהפוך את 
\begin_inset Formula $v_{5}$
\end_inset

 לתקול, ויתקיים ש: 
\begin_inset Formula $E_{5}\backsim E_{6}\backsim E_{7}$
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_20.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection*
שיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
11
\numeric off
 
\end_layout

\begin_layout Itemize
עכשיו נרצה להחזיר את ההודעות של 
\begin_inset Formula $v_{5}$
\end_inset

 :
\end_layout

\begin_deeper
\begin_layout Itemize
כי המטרה שלנו היא רק להגיע לשינוי ב
\begin_inset Formula $input$
\end_inset

 של 
\begin_inset Formula $v_{6}$
\end_inset

 ואם נוריד יותר מארבעה קודקדים לא נוכל לבצע , את הטריק שלנו לכך שלא ישימו
 לב להבדל בין ההרצות.
\end_layout

\begin_layout Itemize
לכן באופן סימטרי נחזיר את ההודעות של 
\begin_inset Formula $v_{5}$
\end_inset

 )
\begin_inset Quotes erd
\end_inset

יקום לתחיה
\begin_inset Quotes erd
\end_inset

( ונעבור לטפל בשליחת ההודעות בין של 
\begin_inset Formula $v_{6}$
\end_inset

 ל 
\begin_inset Formula $v_{4}$
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_22.png
	scale 70

\end_inset


\begin_inset Graphics
	filename distributed - pictures/less10_21.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
ובאופן דומה לשאר הקודקודים 
\begin_inset Formula $\Leftarrow$
\end_inset

 בסיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, 
\begin_inset Formula $v_{6}$
\end_inset

 לא שולח אף הודעה 
\begin_inset Formula $\Leftarrow$
\end_inset

 נוכל להפוך אותו לתקול, ולהסתכל עליו ממבט של סיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\end_layout

\end_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less10_23.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
כעת נתחיל בתהליך לבטל את 
\begin_inset Formula $v_{5}$
\end_inset

 בסיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_1.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
נדאג לבטל הודעה אחת מ
\begin_inset Formula $v_{5}$
\end_inset

 באיטרציה אחת, ואז לבטל את האחרות באיטרציה שניה
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_2.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
עכשיו נרצה להפוך אותו 
\begin_inset Formula $\left(v_{5}\right)$
\end_inset

 לתקול בסיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, אז שוב בשלבים: נבטל הודעה אחת, נבטל את השאר, נהפוך לתקול )בכך יתבטלו הודעות
 ההמשך( ונחזיר אותו לחיים )בשלבים( , וכך לכל קודקוד
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_4.png
	scale 70

\end_inset


\begin_inset Graphics
	filename distributed - pictures/less11_3.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\align center
עד שיתבטלו כל ההודעות מ
\begin_inset Formula $v_{5}$
\end_inset

 בסיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, ולכן 
\bar under
נוכל ולבטל את ההודעה מ
\begin_inset Formula $v_{6}$
\end_inset

 ל
\begin_inset Formula $v_{5}$
\end_inset

 בסיבוב 
\begin_inset Formula $2$
\end_inset


\bar default
 )נזכור שהחזרנו לחיים כל מי שהורדנו( ואף קודקוד 
\begin_inset Quotes eld
\end_inset

לא ישים לב
\begin_inset Quotes erd
\end_inset

 להבדל
\end_layout

\end_deeper
\begin_layout Itemize
כעת:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_5.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
ובאותו אופן נוכל לבטל את השאר ההודעות של 
\begin_inset Formula $\boldsymbol{v_{6}}$
\end_inset

 בסיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 .....
 עד ש:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_9.png

\end_inset


\begin_inset Graphics
	filename distributed - pictures/less11_6.png

\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
ושוב נרצה לבטל את ההודעות בסיבוב הראשון , ובאותו תהליך:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_8.png
	scale 70

\end_inset


\begin_inset Graphics
	filename distributed - pictures/less11_7.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
ובאותו אופן לשאר הקודקודים )נזכור שחלק מהתהליך הוא להחזיר את התקולים לחיים(:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_10.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
וכעת סוף סוף ונכל להחליף לו את ה 
\begin_inset Formula $input$
\end_inset

 ל
\numeric on
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series bold
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
ואף אחד
\series default
 לא ישים לב:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_11.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
עכשיו נרצה לשנות את את ה 
\begin_inset Formula $input$
\end_inset

 של 
\begin_inset Formula $v_{5}$
\end_inset

 ל
\numeric on
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, אבל בעיה - ישימו לב.
 לכן:
\end_layout

\begin_deeper
\begin_layout Itemize
צריך לעשות את כל התהליך בחזרה, ובו להחזיר את ההודעות של 
\begin_inset Formula $v_{6}$
\end_inset

 
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_12.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
לעשות תהליך דומה ל
\begin_inset Formula $v_{5}$
\end_inset

 עד שנוכל לשנות לו את ה
\begin_inset Formula $input$
\end_inset

 ל 
\begin_inset Formula $v_{5}$
\end_inset

 גם כן ל
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_14.png

\end_inset


\begin_inset Graphics
	filename distributed - pictures/less11_13.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
ושוב להחזיר גם לו את ההודעות:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_15.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
ובאותו אופן לשאר הקודקודים:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_16.png

\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
וסתרנו את ה 
\begin_inset Formula $validity$
\end_inset

 , ומכאן שעבור 
\begin_inset Formula $f-resilient$
\end_inset

 צריך לפחות 
\begin_inset Formula $f+1$
\end_inset

 סיבובים
\end_layout

\begin_layout Standard
סיכום ההוכחה:
\end_layout

\begin_layout Itemize
התחלנו מכך שכל ה
\begin_inset Formula $input$
\end_inset

 הם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, מתוך הנחה שבכל הרצה ניתן שקודקוד אחד יקרוס בסיבוב,
\end_layout

\begin_layout Itemize
יצרנו רצף הרצות דומות כך שמתקיים 
\begin_inset Formula $E_{i}\sim E_{i+1}$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
אבל מה
\begin_inset Formula $Validity$
\end_inset

 מתקיים שעבור 
\begin_inset Formula $input$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 תהיה הסכמה על 
\begin_inset Formula $0$
\end_inset

 , ועבור 
\begin_inset Formula $input$
\end_inset

 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
תהיה הסכמה על 
\begin_inset Formula $1$
\end_inset

 וזו סתירה
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsubsection*
תקלות אחרות
\end_layout

\begin_layout Itemize
קודקוד שקרס רגעית )אולי לסירוגין(
\end_layout

\begin_layout Itemize
קודקוד שמגיב שונה לכל קודקוד 
\begin_inset Formula $\text{Arbitrary Behaviour}$
\end_inset


\end_layout

\begin_layout Standard
אנחנו בעיקר נסתכל על 
\begin_inset Formula $\text{Arbitrary Behaviour }$
\end_inset

 , משתי סיבות:
\end_layout

\begin_layout Enumerate
אולי זו פעולה מכוונת נגדנו, ונרצה להתמודד איתה
\end_layout

\begin_layout Enumerate
אם נדע להתמודד עם החמור ביותר, נדע להתמודד עם כל סוג תקלה 
\begin_inset Formula $\left(worst-case\right)$
\end_inset


\end_layout

\begin_layout Subsection

\series bold
\lang english
\begin_inset Formula $\text{Consensus 5 :Byzantine Failures}$
\end_inset


\end_layout

\begin_layout Standard
הגדרה: תהליכים שונים מקבלים ערכים שונים, כמו כן קודקוד ביזנטי יכול להתנגהג
 כאילו קרס
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_17.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
נשים לב שהקודקוד הביזנטי יכול להתנהג כתקין/כתקול/כרמאי לפי רצונו , ולשנות
 דרך פעולה בכל סיבוב , ואנחנו נצטרך לדעת להתמודד עם זה.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_18.png
	scale 70

\end_inset


\end_layout

\begin_layout Subsubsection
בעיית הקונצנזוס עם קודקוד ביזנטי:
\end_layout

\begin_layout Standard
אם יש אלגוריתם שפותר קונצנזוס ל 
\begin_inset Formula $m$
\end_inset

 תהליכים, נאמר שהוא 
\begin_inset Formula $m-resilient-consensus-algorithm.$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Formula $validity$
\end_inset

 : אם כל התהליכים התקינים התחילו עם אותו ערך אז התהליכים התקינים יחליטו
 על הערך הזה.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
הערה: בד
\begin_inset Quotes erd
\end_inset

כ תנאי 
\begin_inset Formula $validity$
\end_inset

 דורש הסכמה מ
\series bold
כולם
\series default
 , אבל כאן אין טעם להסתכל על הביזנטי כי מבחינתנו הוא תקול לכל אורך הדרך.
 אבל נרשה גם שהם יסכימו על ערך שלא הם חשבו עליו )למשל הביזנטי דחף להם ערך
 כלשהו(
\end_layout

\begin_layout Standard
ברור ש: שכל אלגוריתם עם 
\begin_inset Formula $m-resilient-consensus$
\end_inset

 דרוש לפחות 
\begin_inset Formula $m+1$
\end_inset

 סיבוב )כפי שהראנו לעיל(.
 נשאל בעבור 
\begin_inset Formula $n$
\end_inset

 קודקודים מהו ה 
\begin_inset Formula $m$
\end_inset

 המקסימלי שיכול להיות?
\end_layout

\begin_layout Subsubsection
משפט: לא קיים אלגוריתם עם 
\begin_inset Formula $m-resilient-consensus$
\end_inset

 במערכת הודעות סינכרונית על 
\begin_inset Formula $n$
\end_inset

 קודקודים לכל 
\begin_inset Formula $m\geq\frac{n}{3}$
\end_inset

 
\end_layout

\begin_layout Standard
רעיון ההוכחה:
\end_layout

\begin_layout Standard
נוכיח שבמקרה 
\begin_inset Formula $n=3$
\end_inset

 
\begin_inset Formula $\Leftarrow$
\end_inset

 בלתי אפשרי ל 
\begin_inset Formula $m=1$
\end_inset

 , המקרה הכללי יוכח באמצעות רידוקציה לשלושה קודקודים.
 כלומר:
\end_layout

\begin_layout Standard
\align center
יהיה אלגוריתם ל
\begin_inset Formula $n$
\end_inset

 קודקודים ו 
\begin_inset Formula $m$
\end_inset

 תקולים ל
\begin_inset Formula $m\geq\frac{n}{3}$
\end_inset

 , נניח בשלילה שנוכל לבנות אלגוריתם 
\begin_inset Formula $1-resilient$
\end_inset

 עבור 
\begin_inset Formula $3$
\end_inset

 קודקודים
\end_layout

\begin_layout Subsubsection
למה: אין אלגוריתם 
\begin_inset Formula $1-resilient$
\end_inset

 ל
\numeric on
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
קודקודים
\end_layout

\begin_layout Standard
אינטואיציה:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_19.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
קודקוד 
\begin_inset Formula $A$
\end_inset

 אולי קיבל הודעה מ 
\begin_inset Formula $C$
\end_inset

 על ההודעה מ 
\begin_inset Formula $B$
\end_inset

 ל 
\begin_inset Formula $C$
\end_inset

 
\end_layout

\begin_layout Itemize
קודקוד 
\begin_inset Formula $A$
\end_inset

 אולי קיבל מידע סותר על 
\begin_inset Formula $B$
\end_inset

 מ 
\begin_inset Formula $C$
\end_inset

 
\series bold
וגם
\series default
 קיבל מ 
\begin_inset Formula $C$
\end_inset

 על 
\begin_inset Formula $B$
\end_inset

 
\end_layout

\begin_layout Itemize
וזה בלתי אפשרי ל 
\begin_inset Formula $A$
\end_inset

 ול 
\begin_inset Formula $C$
\end_inset

 להחליט על מי לסמוך ולהחליט
\end_layout

\begin_layout Standard
ההוכחה:
\end_layout

\begin_layout Standard
נצור רצף של
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
4
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
הרצות דומות:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_26.png
	scale 70

\end_inset


\end_layout

\begin_layout Itemize
הרצה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
: מ
\begin_inset Formula $validity$
\end_inset

 
\begin_inset Formula $A$
\end_inset

 יפלוט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\numeric off
 
\end_layout

\begin_layout Itemize
הרצה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
: מדמיון 
\begin_inset Formula $A$
\end_inset

 יפלוט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\end_layout

\begin_deeper
\begin_layout Itemize
כביזנטי אוכל לדאוג ש בהרצה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 ש
\begin_inset Formula $B$
\end_inset

 יתנהג כמו שמתנהג בהרצה 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
)למשל שולח
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
(
\end_layout

\begin_layout Itemize
ומצד שני ש
\begin_inset Formula $C$
\end_inset

 יתנהג ב
\numeric on
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
כמו שמתנהג ב
\numeric on
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
)למשל לשלוח
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
(
\end_layout

\begin_layout Itemize
מבחינת 
\begin_inset Formula $A$
\end_inset

 בהרצה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\numeric off
 אין הבדל, ומדמיון ל
\numeric on
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
יפלוט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\end_layout

\end_deeper
\begin_layout Itemize
הרצה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 : ה
\begin_inset Formula $validity$
\end_inset

 
\begin_inset Formula $C$
\end_inset

 יפלוט 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\end_layout

\begin_layout Itemize
הרצה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
4
\numeric off
: מדמיון 
\begin_inset Formula $V$
\end_inset

 יפלוט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\end_layout

\begin_layout Subsection
המקרה הכללי:
\end_layout

\begin_layout Itemize
נניח בשלילה שיש אלגוריתם 
\begin_inset Formula $A$
\end_inset

 שהוא 
\begin_inset Formula $m-resilient$
\end_inset

 ל
\begin_inset Formula $n$
\end_inset

 קודקודים , כאשר 
\begin_inset Formula $m\geq\frac{n}{3}$
\end_inset

 
\end_layout

\begin_layout Itemize
ננסה להשתמש באלגוריתם לפתור את הבעיה עם 
\begin_inset Formula $n=3$
\end_inset

 ו ביזנטי אחד 
\begin_inset Formula $\left(m=1\right)$
\end_inset


\end_layout

\begin_layout Itemize
לשם הפשטות נוכל להניח ש 
\begin_inset Formula $n$
\end_inset

 מתחלק ב 
\begin_inset Formula $3$
\end_inset

 
\end_layout

\begin_layout Itemize
ניתן לכל קודקוד להריץ 
\begin_inset Formula $\frac{n}{3}$
\end_inset

 מהתהליכים , כלומר נצור את תתי הקבוצות הבאות:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_22.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
אם אחד מהשלשה הוא ביזנטי 
\begin_inset Formula $\Leftarrow$
\end_inset

 
\begin_inset Formula $n/3$
\end_inset

 מהקודקודים מתנהגים כקודקוד ביזנטי
\end_layout

\begin_layout Itemize
לכן אלגוריתם 
\begin_inset Formula $A$
\end_inset

 יתמודד עם 
\begin_inset Formula $\frac{n}{3}$
\end_inset

 קודקודים ביזנטים, ועדיין להגיע להסכמה
\end_layout

\begin_layout Itemize
כלומר פתרנו את הקונצנזוס לשלושה תהלכים וזו סתירה
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_23.png
	scale 70

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection

\lang english
\begin_inset Formula $\text{Consensus 6: A Byzantine Agreement Algorithm}$
\end_inset


\end_layout

\begin_layout Standard
האם הקודקודים יכולים להגיע להסכמה עם 
\begin_inset Formula $n>3m$
\end_inset

 .
 נפשט: האם נצליח כאשר 
\begin_inset Formula $n=4$
\end_inset

 ו 
\begin_inset Formula $m=1$
\end_inset

 ?
\end_layout

\begin_layout Standard
תשובה: כן.
 נראה אלגוריתם:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_24.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
הסברים:
\end_layout

\begin_layout Itemize
סיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
: 
\end_layout

\begin_deeper
\begin_layout Itemize
לכל קודקוד יש 
\begin_inset Formula $id$
\end_inset

 ,כל קודקוד שולח את ה
\begin_inset Formula $id$
\end_inset

 שלו
\end_layout

\begin_layout Itemize
סימנו בנקודה את ההודעה של הקודקוד לעצמי, סימנו באדום את ההודעה שהביזנטי
 שלח )במקרה הזו הודעותיו שונות(
\end_layout

\begin_layout Itemize
כל אחד שומר וקטור של כל ההודעות שקיבל
\end_layout

\end_deeper
\begin_layout Itemize
סיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\numeric off
:
\end_layout

\begin_deeper
\begin_layout Itemize
כל אחד שולח את הוקטור שלו - יש טעות בשקף - והמטריצה שנקבל בקודקוד
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
- סימנו ב 
\begin_inset Formula $\tilde{x}$
\end_inset

 ערך מהביזנטי:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Formula $\left[\begin{matrix}\tilde{1} & \tilde{1} & \tilde{3} & \tilde{0}\\
1 & 1 & 2 & 3\\
\tilde{2} & 1 & 2 & 3\\
\tilde{0} & 1 & 2 & 3
\end{matrix}\right]$
\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
אחרי סיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, לקודקוד יש
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
12
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
ערכים:
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 ערכים לכל 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
4
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
ה 
\begin_inset Formula $input$
\end_inset

 )העמודות( .
 
\end_layout

\begin_deeper
\begin_layout Standard
האלגוריתם:
\end_layout

\begin_layout Enumerate
נתעלם מהאלכסון:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Formula $\left[\begin{matrix}\cancel{\tilde{1}} & \tilde{1} & \tilde{3} & \tilde{0}\\
1 & \cancel{1} & 2 & 3\\
\tilde{2} & 1 & \cancel{2} & 3\\
\tilde{0} & 1 & 2 & \cancel{3}
\end{matrix}\right]$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
בודק אם יש רוב לערך 
\end_layout

\begin_deeper
\begin_layout Enumerate
אם יש - לוקח את הערך
\end_layout

\begin_layout Enumerate
אם אין - מתעלם.
 
\end_layout

\begin_deeper
\begin_layout Standard
אצלנו - נקבל את הוקטור:
\end_layout

\end_deeper
\begin_layout Standard
\align center
\begin_inset Formula $\left[\begin{matrix}\cancel{\tilde{1}} & \tilde{1} & \tilde{3} & \tilde{0}\\
1 & \cancel{1} & 2 & 3\\
\tilde{2} & 1 & \cancel{2} & 3\\
\tilde{0} & 1 & 2 & \cancel{3}\\
\hline x & 1 & 2 & 3
\end{matrix}\right]\Rightarrow\left(\begin{matrix}x & 1 & 2 & 3\end{matrix}\right)$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
בודק בוקטור אם יש רוב:
\end_layout

\begin_deeper
\begin_layout Enumerate
אם יש - לוקח את הערך
\end_layout

\begin_layout Enumerate
אם אין, לוקח את המינימום )בחירה שרירותית המוסכמת על כולם(
\end_layout

\begin_deeper
\begin_layout Standard
אצלנו - נקבל את הוקטור:
\end_layout

\end_deeper
\begin_layout Standard
\align center
\begin_inset Formula $\left(\begin{matrix}x & 1 & 2 & 3\end{matrix}\right)\Rightarrow1$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
נפלוט ערך זה.
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
בדוגמה:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less11_25.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center

\series bold
חסרה שורה
\series default
.
 הנקודה היא שכולם מקבלים את אותו וקטור ויכולים להסכים על המינמלי.
\end_layout

\begin_layout Subsubsection
למה: מחיקת האלכסון מצדיקה את הפתרון
\end_layout

\begin_layout Standard
הוכחה 
\end_layout

\begin_layout Standard
יהיו ארבעה קודקודים עם ערכים 
\begin_inset Formula $a,b,c$
\end_inset

 וקודקוד רביעי ביזנטי אז המטריצות יראו כך:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\underbrace{\left[\begin{matrix}\tilde{?} & \tilde{?} & \tilde{?} & \tilde{?}\\
\tilde{?} & a & b & c\\
\tilde{?} & a & b & c\\
\tilde{?} & a & b & c
\end{matrix}\right]}_{a},\underbrace{\left[\begin{matrix}\tilde{?} & \tilde{?} & \tilde{?} & \tilde{?}\\
\tilde{?} & a & b & c\\
\tilde{?} & a & b & c\\
\tilde{?} & a & b & c
\end{matrix}\right]}_{b},\underbrace{\left[\begin{matrix}\tilde{?} & \tilde{?} & \tilde{?} & \tilde{?}\\
\tilde{?} & a & b & c\\
\tilde{?} & a & b & c\\
\tilde{?} & a & b & c
\end{matrix}\right]}_{c}$
\end_inset


\end_layout

\begin_layout Standard
נתבונן במטריצה 
\begin_inset Formula $a$
\end_inset

 , ונשים לב שלא משנה אם נמחק את האלכסון או לא נקבל את אותה תוצאה:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\underbrace{\left[\begin{matrix}\tilde{?} & \tilde{?} & \tilde{?} & \tilde{?}\\
\tilde{?} & a & b & c\\
\tilde{?} & a & b & c\\
\tilde{?} & a & b & c\\
\hline  & a & b & c
\end{matrix}\right]}_{a},\underbrace{\left[\begin{matrix}- & \tilde{?} & \tilde{?} & \tilde{?}\\
\tilde{?} & - & b & c\\
\tilde{?} & a & - & c\\
\tilde{?} & a & b & -\\
\hline  & a & b & c
\end{matrix}\right]}_{a'}$
\end_inset


\end_layout

\begin_layout Standard
\align center
ובאותו אופן למטריצות 
\begin_inset Formula $b,c$
\end_inset

 
\end_layout

\begin_layout Standard
כעת , ננסה להבין איך הביזנטי יכול לדפוק אותנו, נתבונן בעמודה שלו הביזנטי
\end_layout

\begin_layout Standard
אם אין בעמודה שלו רוב - העמודה תפסל, ולא תפריע לנו.
\end_layout

\begin_layout Standard
עכשיו נניח שהביזנטי שלח ל 
\begin_inset Formula $a$
\end_inset

 את ההודעה 
\begin_inset Formula $'e'$
\end_inset

 אז 
\begin_inset Formula $a$
\end_inset

 קיבל את הוקטור 
\begin_inset Formula $\left(\begin{matrix}e & \_ & \_ & \_\end{matrix}\right)$
\end_inset

 ושולח אותו לכולם, ולכן:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\underbrace{\left[\begin{matrix}\tilde{?} & \tilde{?} & \tilde{?} & \tilde{?}\\
\tilde{e} & a & b & c\\
\tilde{?} & a & b & c\\
\tilde{?} & a & b & c
\end{matrix}\right]}_{a},\underbrace{\left[\begin{matrix}\tilde{?} & \tilde{?} & \tilde{?} & \tilde{?}\\
\tilde{e} & a & b & c\\
\tilde{?} & a & b & c\\
\tilde{?} & a & b & c
\end{matrix}\right]}_{b},\underbrace{\left[\begin{matrix}\tilde{?} & \tilde{?} & \tilde{?} & \tilde{?}\\
\tilde{e} & a & b & c\\
\tilde{?} & a & b & c\\
\tilde{?} & a & b & c
\end{matrix}\right]}_{c}$
\end_inset


\end_layout

\begin_layout Standard
ונניח שהביזנטי שיקר ושלח ל 
\begin_inset Formula $b$
\end_inset

 ,הודעה 
\begin_inset Formula $'g'$
\end_inset

 ול
\begin_inset Formula $c$
\end_inset

 הודעה 
\begin_inset Formula $'f'$
\end_inset

 , לכן:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\underbrace{\left[\begin{matrix}\tilde{?} & \tilde{?} & \tilde{?} & \tilde{?}\\
\tilde{e} & a & b & c\\
\tilde{f} & a & b & c\\
\tilde{g} & a & b & c\\
\hline  & a & b & c
\end{matrix}\right]}_{a},\underbrace{\left[\begin{matrix}\tilde{?} & \tilde{?} & \tilde{?} & \tilde{?}\\
\tilde{e} & a & b & c\\
\tilde{f} & a & b & c\\
\tilde{g} & a & b & c\\
\hline  & a & b & c
\end{matrix}\right]}_{b},\underbrace{\left[\begin{matrix}\tilde{?} & \tilde{?} & \tilde{?} & \tilde{?}\\
\tilde{e} & a & b & c\\
\tilde{f} & a & b & c\\
\tilde{g} & a & b & c\\
\hline  & a & b & c
\end{matrix}\right]}_{c}$
\end_inset


\end_layout

\begin_layout Standard
נשים לב שהעמודה של הביזנטי לא תצליח להטעות אותנו , כי כל אחד מהקודקודים
 חי עם המידע ששלחתי לו, ולכן המקום היחיד שהביזנטי יכול להשפיע זו בערך שלו,
 כלומר לשנות את הערך שלו בוקטור שהוא שולח באיטרציה השניה 
\end_layout

\begin_layout Standard
נדגים איך השקר הכפול יכול להשפיע:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\underbrace{\begin{matrix}\tilde{e} & \tilde{?} & \tilde{?} & \tilde{?}\\
\tilde{e} & a & b & c\\
\tilde{f} & a & b & c\\
\tilde{g} & a & b & c\\
\hline e & a & b & c
\end{matrix}}_{a},\underbrace{\begin{matrix}\tilde{f} & \tilde{?} & \tilde{?} & \tilde{?}\\
\tilde{e} & a & b & c\\
\tilde{f} & a & b & c\\
\tilde{g} & a & b & c\\
\hline f & a & b & c
\end{matrix}}_{b},\underbrace{\begin{matrix}\tilde{g} & \tilde{?} & \tilde{?} & \tilde{?}\\
\tilde{e} & a & b & c\\
\tilde{f} & a & b & c\\
\tilde{g} & a & b & c\\
\hline g & a & b & c
\end{matrix}}_{c}$
\end_inset


\end_layout

\begin_layout Standard
במילים אחרות, במחיקת האלכסון מנענו מהביזנטי לשקר לנו פעמיים
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 - או יותר נכון, התעלמנו מהאמירה השניה שלו ובכך ביטלנו את השקר שלו.
 ולכן נוכל לסמוך על הרוב.
\end_layout

\begin_layout Standard
לכן ע
\begin_inset Quotes erd
\end_inset

י מחיקת האלכסון, מנענו מהביזנטי להשפיע עלינו.
\end_layout

\begin_layout Subsubsection*
שיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
12
\numeric off
 
\end_layout

\begin_layout Standard
נעבור למקרה כללי
\end_layout

\begin_layout Standard
האם האלגוריתם עובד עובד לכל 
\begin_inset Formula $m$
\end_inset

 המקיים 
\begin_inset Formula $n>3n$
\end_inset

 ? התשובה: לא
\end_layout

\begin_layout Standard
נראה דוגמה של 
\begin_inset Formula $n=7,m=2$
\end_inset

 .
 הסיבה ע
\begin_inset Quotes erd
\end_inset

פ המשפט: שאם יש 
\begin_inset Formula $crash-failure$
\end_inset

 צריך להגיע להסכמה בלפחות 
\begin_inset Formula $m+1$
\end_inset

 סיבובים, ולכן
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
סיבובים לא יספיקו.
\end_layout

\begin_layout Standard
דוגמה ) הוצגה בשיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
13
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
דקה
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
32
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
(:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less13_1.png
	scale 75

\end_inset


\end_layout

\begin_layout Standard
\align center
בתוך העיגול הקלטים, עיגול מלא )ירוק( -בזינטי.
 נדלג על שלב הראשון ונניח שכבר יש וקטור על הקלטים.
 כיון שאנו מראים אי-הסכמה מספיק לבנות
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
מטריצות שונות:
\end_layout

\begin_layout Standard
\align center
\begin_inset Formula 
\[
\underbrace{\left[\begin{matrix}0 & 0 & 1 & 1 & 1 & \tilde{1} & \tilde{1}\\
0 & 0 & 1 & 1 & 1 & \tilde{1} & \tilde{1}\\
0 & 0 & 1 & 1 & 1 & \tilde{0} & \tilde{0}\\
0 & 0 & 1 & 1 & 1 & \tilde{0} & \tilde{0}\\
0 & 0 & 1 & 1 & 1 & \tilde{0} & \tilde{0}\\
\tilde{0} & \tilde{0} & \tilde{1} & \tilde{1} & \tilde{1} & \tilde{0} & \tilde{0}\\
\tilde{0} & \tilde{0} & \tilde{1} & \tilde{1} & \tilde{1} & \tilde{0} & \tilde{0}
\end{matrix}\right]}_{\text{vertex 1}}\Rightarrow\underbrace{\left[\begin{matrix}- & 0 & 1 & 1 & 1 & \tilde{1} & \tilde{1}\\
0 & - & 1 & 1 & 1 & \tilde{1} & \tilde{1}\\
0 & 0 & - & 1 & 1 & \tilde{0} & \tilde{0}\\
0 & 0 & 1 & - & 1 & \tilde{0} & \tilde{0}\\
0 & 0 & 1 & 1 & - & \tilde{0} & \tilde{0}\\
\tilde{0} & \tilde{0} & \tilde{1} & \tilde{1} & \tilde{1} & - & \tilde{0}\\
\tilde{0} & \tilde{0} & \tilde{1} & \tilde{1} & \tilde{1} & \tilde{0} & -\\
\hline 0 & 0 & 1 & 1 & 1 & \tilde{0} & \tilde{0}
\end{matrix}\right]}_{\text{vertex 1}}\Rightarrow\left(\begin{matrix}0 & 0 & 1 & 1 & 1 & \tilde{0} & \tilde{0}\end{matrix}\right)\Rightarrow out_{1}=0
\]

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Formula $\underbrace{\left[\begin{matrix}0 & 0 & 1 & 1 & 1 & \tilde{1} & \tilde{1}\\
0 & 0 & 1 & 1 & 1 & \tilde{1} & \tilde{1}\\
0 & 0 & 1 & 1 & 1 & \tilde{0} & \tilde{0}\\
0 & 0 & 1 & 1 & 1 & \tilde{0} & \tilde{0}\\
0 & 0 & 1 & 1 & 1 & \tilde{0} & \tilde{0}\\
\tilde{0} & \tilde{0} & \tilde{1} & \tilde{1} & \tilde{1} & \tilde{1} & \tilde{1}\\
\tilde{0} & \tilde{0} & \tilde{1} & \tilde{1} & \tilde{1} & \tilde{1} & \tilde{1}
\end{matrix}\right]}_{\text{vertex 5}}\Rightarrow\underbrace{\left[\begin{matrix}- & 0 & 1 & 1 & 1 & \tilde{1} & \tilde{1}\\
0 & - & 1 & 1 & 1 & \tilde{1} & \tilde{1}\\
0 & 0 & - & 1 & 1 & \tilde{0} & \tilde{0}\\
0 & 0 & 1 & - & 1 & \tilde{0} & \tilde{0}\\
0 & 0 & 1 & 1 & - & \tilde{0} & \tilde{0}\\
\tilde{0} & \tilde{0} & \tilde{1} & \tilde{1} & \tilde{1} & - & \tilde{1}\\
\tilde{0} & \tilde{0} & \tilde{1} & \tilde{1} & \tilde{1} & \tilde{1} & -\\
\hline 0 & 0 & 1 & 1 & 1 & x & x
\end{matrix}\right]}_{\text{vertex 5}}\Rightarrow\left(\begin{matrix}0 & 0 & 1 & 1 & 1 & x & x\end{matrix}\right)\Rightarrow out_{5}=1$
\end_inset


\end_layout

\begin_layout Standard
כלומר עבור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 סיבובים לא מספיק )לא עומד בתנאי המשפט( , ולכן:
\end_layout

\begin_layout Standard
נשדרג את האלגוריתם שירוץ יותר סיבובים , ונגדיר שבסיבוב הבא: כל קודקוד שולח
 את המטריצה שלו.
\end_layout

\begin_layout Standard
וכל קודקוד יקבל החלטה על פי המטריצה התלת-מימדית שלו.
\end_layout

\begin_layout Standard
)כלומר ל
\begin_inset Formula $m$
\end_inset

 נוסיף שליחה של המידע ונגיע למטריצות 
\begin_inset Formula $m$
\end_inset

-מימדיות(
\end_layout

\begin_layout Standard
לדוגמה: עבור 
\begin_inset Formula $m=2$
\end_inset

 ו 
\begin_inset Formula $n>6$
\end_inset

 נוכל להגיע להסכמה בשלושה סיבובים ומטריצה תלת-מימדית.
\end_layout

\begin_layout Standard
יתרונות האלגוריתם:
\end_layout

\begin_layout Itemize
עובד לכל 
\begin_inset Formula $m$
\end_inset

 כך ש 
\begin_inset Formula $n>3m$
\end_inset

 
\begin_inset Formula $\Leftarrow$
\end_inset

 וזה היחס 
\bar under
האופטימלי
\end_layout

\begin_layout Itemize
לוקח 
\begin_inset Formula $m+1$
\end_inset

 סיבובים 
\begin_inset Formula $\Leftarrow$
\end_inset

 
\bar under
אופטימלי
\bar default
 עבור 
\begin_inset Formula $crash-failure$
\end_inset


\end_layout

\begin_layout Itemize
עובד לכל 
\begin_inset Formula $input$
\end_inset

 ולאו דוקא לבינארי
\end_layout

\begin_layout Standard
חסרון:
\end_layout

\begin_layout Itemize
האמירה 
\begin_inset Quotes eld
\end_inset

תכריע מי הערך בעל הרב
\begin_inset Quotes erd
\end_inset

 קשה לפרמול
\end_layout

\begin_layout Itemize

\bar under
העיקרי:
\bar default
 קשה לחישוב 
\begin_inset Formula $\Leftarrow$
\end_inset

 בקלות נגיע לחישובים אקספונניציאלים
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Subsection

\lang english
\begin_inset Formula $\text{Consensus 7: The Queen Algorithm}$
\end_inset


\end_layout

\begin_layout Itemize
האלגוריתם פותר את בעית ההסכמה עם קודקוד ביזנטי והודעות קטנות )המודל שלנו(
\end_layout

\begin_layout Itemize
פותר קונצנזוס עבור 
\begin_inset Formula $n$
\end_inset

 קודקודים, ו 
\begin_inset Formula $f$
\end_inset

 תקולים, על ידי 
\begin_inset Formula $f+1$
\end_inset

 שלבים, עבור 
\begin_inset Formula $n>4f$
\end_inset

 
\end_layout

\begin_layout Itemize
הרעיון:
\end_layout

\begin_deeper
\begin_layout Itemize
תהיה מלכה שונה בכל סיבוב
\end_layout

\begin_layout Itemize
בגלל שיש 
\begin_inset Formula $f+1$
\end_inset

 שלבים, קיים שלב שמלכה אינה ביזנטית
\end_layout

\begin_layout Itemize
נוודא שבשלב זה , קל הקודקדים בוחרים את אותו הערך, ושבשלבים הבאים הקודקודים
 לא משנים את הבחירה
\end_layout

\end_deeper
\begin_layout Subsubsection
האלגוריתם:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less12_1.png
	scale 85

\end_inset


\end_layout

\begin_layout Standard
הערות:
\end_layout

\begin_layout Itemize
נתבונן בשלב ה 
\begin_inset Formula $i$
\end_inset

 - מכיל
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
סיבובים
\end_layout

\begin_layout Itemize
מה שמסומן כ
\begin_inset Formula $broadcast$
\end_inset

 בהתחלה יהיה ה
\begin_inset Formula $input$
\end_inset

 ובסוף יהיה הערך שנפלוט
\end_layout

\begin_deeper
\begin_layout Itemize
כמו קודם נוכל להחליט שהבחירה היא לפי הרוב, ואם אין רוב לפי המינימלי
\end_layout

\end_deeper
\begin_layout Itemize
בסיבוב השני:
\end_layout

\begin_deeper
\begin_layout Itemize
אם כבר בחרתי מתעלם, אם לא- בוחר בערך של המלכה.
\end_layout

\end_deeper
\begin_layout Standard
דוגמה:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less12_2.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
לאחר שלב ראשון-סיבוב ראשון לכל אחד יש וקטור עם כל הערכים, וכ
\begin_inset Quotes erd
\end_inset

א מקבל החלטה לפי 
\bar under
רוב
\bar default
.
 שלב הבא צריך לבדוק עם נתמוך 
\bar under
בערך שלנו
\bar default
 או לא:
\end_layout

\begin_layout Standard
\align center
ע
\begin_inset Quotes erd
\end_inset

פ האלגוריתם צריכה להתקיים ש 
\begin_inset Formula $\iff\text{value apreas >}\frac{6}{2}+1=4\iff\text{value apreas >}\frac{n}{2}+f$
\end_inset

 שאף אחד לא יחליט את הערך שלו )=
\bar under
הערך
\bar default
 עם הרוב( 
\begin_inset Formula $\iff$
\end_inset

 יקבל את הערך של המלכה
\end_layout

\begin_layout Standard
\align center
סיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
- ונניח שהמלכה ביזנטית, ושאלו הערכים ששלחה:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less12_3.png

\end_inset


\end_layout

\begin_layout Standard
\align center
כעת, כולם תומכים בערך של המלכה , והגענו לסוף שלב ראשון - אין הסכמה.
 
\end_layout

\begin_layout Standard
\align center
שלב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
- סיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
:
\end_layout

\begin_layout Standard
\align center
אותו תהליך, ואין קודקוד שתומך בערך שלו 
\begin_inset Formula $\iff$
\end_inset

 יתמוך במלכה כשתגיע
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less12_4.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\align center
וכעת:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less12_5.png
	scale 70

\end_inset


\end_layout

\begin_layout Subsubsection
אלגוריתם המלכה - נכונות:
\end_layout

\begin_layout Itemize
הזכרנו שבגלל שיש 
\begin_inset Formula $f+1$
\end_inset

 שלבים, יש שלב בו המלכה אינה ביזנטית, כעת צריך להראות שני דברים:
\end_layout

\begin_deeper
\begin_layout Enumerate

\bar under
אחרי השלב בו המלכה תקינה, כל הקודקודים התקינים בעלי אותו ערך
\end_layout

\begin_deeper
\begin_layout Standard
בשלב הראשון כל קודקוד מקבל החלטה האם להקשיב למלכה או לא
\end_layout

\begin_layout Itemize
)המקרה הקל( 
\bar under
אם כל הקודקודים החליטו להקשיב למלכה:
\end_layout

\begin_deeper
\begin_layout Itemize
נניח שהערך ששלחה הוא 
\begin_inset Formula $x$
\end_inset

 ,ובברור כולם יפלטו את אותו ערך 
\begin_inset Formula $x$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Itemize
לכן נתבונן במקרה בו 
\bar under
ישנם הקודקודים שהחליטו לא להקשיב למלכה
\bar default
:
\end_layout

\begin_deeper
\begin_layout Itemize
)מהגדרת האלגוריתם נובע ש( 
\begin_inset Formula $\Leftarrow$
\end_inset

 הם קיבלו ערך שמופיע יותר מ 
\begin_inset Formula $\frac{n}{2}+f$
\end_inset

 פעמים
\end_layout

\begin_layout Itemize
בפרט כל קודקוד תקין קיבל ערך 
\begin_inset Formula $x$
\end_inset

 
\series bold
לפחות
\series default
 
\begin_inset Formula $\frac{n}{2}$
\end_inset

 קודקודים תקינים 
\begin_inset Formula $\Leftarrow$
\end_inset

 ולכן בוחר בו כי הוא 
\series bold
הרוב
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula $\Leftarrow$
\end_inset

 לכן כל קודקוד תקין 
\series bold
)כולל המלכה( 
\series default
קיבל את הערך 
\begin_inset Formula $x$
\end_inset

 יותר מ
\begin_inset Formula $\frac{n}{2}$
\end_inset

 פעמים 
\begin_inset Formula $\Leftarrow$
\end_inset

 בוחר ב
\begin_inset Formula $x$
\end_inset

 כי הוא הרוב.
\end_layout

\end_deeper
\begin_layout Itemize
כעת, חלק מהתקינים בוחרים בערך 
\begin_inset Formula $x$
\end_inset

 פשוט כי הוא הרוב .
 וחלק מקשיבים למלכה שגם היא בחרה 
\begin_inset Formula $x$
\end_inset

 
\end_layout

\begin_layout Itemize
בכל מקרה בחרנו 
\begin_inset Formula $x$
\end_inset

 , כנדרש
\end_layout

\end_deeper
\end_deeper
\begin_layout Enumerate

\bar under
בכל שאר השלבים לא צריך לשנות את הערך
\end_layout

\begin_deeper
\begin_layout Itemize
כעת לכל התקינים יש אותו ערך 
\begin_inset Formula $x$
\end_inset

 , לכן כל קודקוד תקין מקבל אותו - בסיבוב הראשון של כל שלב -לפחות 
\begin_inset Formula $n-f$
\end_inset

 פעמים.
 ומתקיים ש 
\begin_inset Formula $f<\frac{n}{4}$
\end_inset

 ולכן:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Formula $n-f>\frac{n}{2}+f$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
לכן כולם ישארו עם אותו ערך 
\begin_inset Formula $x$
\end_inset

 , ולא יקשיבו למלכה.
\end_layout

\begin_layout Standard
הערה: מ
\numeric on
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
נובע מיידית ה 
\begin_inset Formula $validity$
\end_inset

 כי אם כולם התחילו עם 
\begin_inset Formula $0$
\end_inset

 , מיידית מתקיים מה שתיארנו, וזה ימשיך לכל הסיבובים, ויפלט
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
)באופן סימטרי לכל מספר(
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
סיכום:
\end_layout

\begin_layout Itemize

\bar under
יתרונות:
\end_layout

\begin_deeper
\begin_layout Itemize
ההודעות קטנות )ולא מטריצות 
\begin_inset Formula $m$
\end_inset

-מימדיות( , ההודעות מכילות רק את הערך עצמי
\end_layout

\begin_layout Itemize
עובד לכל קלט, ולא תלוי בערכים בינארים
\end_layout

\end_deeper
\begin_layout Itemize

\bar under
חסרונות:
\end_layout

\begin_deeper
\begin_layout Itemize
האלגוריתם דורש 
\begin_inset Formula $f+1$
\end_inset

 שלבים שכ
\begin_inset Quotes erd
\end_inset

א מכיל שני שלבים 
\begin_inset Formula $\Leftarrow$
\end_inset

 ולכן מספר הסיבובים כפול מהמפסר האופטימלי
\end_layout

\begin_layout Itemize
עובד רק ל 
\begin_inset Formula $f<\frac{n}{4}$
\end_inset

 ביזנטים
\end_layout

\end_deeper
\begin_layout Standard
האם אפשרי לפתח אלגוריתם שעובד ל 
\begin_inset Formula $f<\frac{n}{3}$
\end_inset

)היחס האופטימלי( עם הודעות קטנות?
\end_layout

\begin_layout Subsection

\lang english
\begin_inset Formula $\text{Consensus 8: The King Algorithm}$
\end_inset


\end_layout

\begin_layout Itemize
האלגוריתם פותר את בעית ההסכמה עם 
\begin_inset Formula $f<\frac{n}{3}$
\end_inset

 קודקודים ביזנטים והודעות קטנות )המודל שלנו(
\end_layout

\begin_layout Itemize
דורש 
\begin_inset Formula $f+1$
\end_inset

 שלבים )כל שלב =
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
סיבובים(
\end_layout

\begin_layout Itemize
הרעיון:
\end_layout

\begin_deeper
\begin_layout Itemize
הרעיון דומה לאלגוריתם המלכה
\end_layout

\begin_layout Itemize
יהיה מלך שונה בכל שלב
\end_layout

\begin_layout Itemize
בכל שיש 
\begin_inset Formula $f+1$
\end_inset

 שלבים קיים שלב הוא המלך אינו ביזנטי
\end_layout

\begin_layout Itemize
ההבדל העיקרי מאלגוריתם המלכה , הוא שלב ביניים שכל קודקוד מציע ערך אם קיבל
 אותו הרבה פעמים.
\end_layout

\begin_deeper
\begin_layout Itemize
הערך המוצע מתקבל אם הרבה הציעו אותו
\end_layout

\end_deeper
\end_deeper
\begin_layout Subsubsection
האלגוריתם:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less12_6.png
	scale 85

\end_inset


\end_layout

\begin_layout Standard
הערות:
\end_layout

\begin_layout Itemize
נתבונן בשלב 
\begin_inset Formula $i$
\end_inset

 , בסוף 
\begin_inset Formula $f+1$
\end_inset

 שלבים מחליטים
\end_layout

\begin_deeper
\begin_layout Standard
סיבוב:
\end_layout

\begin_layout Enumerate
שולחים ערך לכולם
\end_layout

\begin_layout Enumerate
מחולק לשתי בדיקות:
\end_layout

\begin_deeper
\begin_layout Enumerate
אם ערך התקבל הרבה פעמים כלומר יותר מ 
\begin_inset Formula $n-f$
\end_inset

 פעמים, משדר את ההצעה 
\end_layout

\begin_layout Enumerate
אם הציעו לי הרבה פעמים ערך כלומר יותר מ
\begin_inset Formula $f$
\end_inset

, בוחר בהצעה כערכי
\end_layout

\end_deeper
\begin_layout Enumerate
המלך משדר את ערכו, 
\end_layout

\begin_deeper
\begin_layout Enumerate
בודקים אם הערך שבחרתי )כי הופיע יותר מ
\begin_inset Formula $f$
\end_inset

 פעמים(הופיע פחות פעמיםמ
\begin_inset Formula $n-f$
\end_inset

 - מקשיב למלך
\end_layout

\begin_layout Enumerate
אחרת )הופיע יותר מ
\begin_inset Formula $n-f$
\end_inset

 פעמים( נשאר עם ערכי מ
\numeric on
2
\numeric off
.ב
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
לסיכום:
\end_layout

\begin_deeper
\begin_layout Itemize
אם הערך שהציעו לי מופיע:
\end_layout

\begin_deeper
\begin_layout Itemize
פחות מ
\begin_inset Formula $f$
\end_inset

 אשאר עם הערך שלי
\end_layout

\begin_layout Itemize
יותר מ
\begin_inset Formula $n-f$
\end_inset

 אשאר עם הערך שהציעו לי
\end_layout

\begin_layout Itemize
בין 
\begin_inset Formula $f$
\end_inset

 ל 
\begin_inset Formula $n-f$
\end_inset

 אבחר במלך
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
דוגמה:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less12_7.png
	scale 70

\end_inset


\end_layout

\begin_layout Enumerate
סיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
:
\end_layout

\begin_deeper
\begin_layout Itemize
כולם שולחים את הערך שלהם, הביזנטי החליט 
\begin_inset Formula $0,0,1$
\end_inset

 
\begin_inset Formula $\Leftarrow$
\end_inset

 לכל קודקוד יש וקטור עם הערכים 
\end_layout

\end_deeper
\begin_layout Enumerate
סיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\numeric off
:
\end_layout

\begin_deeper
\begin_layout Itemize
רק לקודקוד אחד )עליון ימני( מתקיים ש
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
מופיע 
\begin_inset Formula $n-f=4-1=3\leq$
\end_inset

, ולכן הוא מציע את
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 .
\end_layout

\begin_layout Itemize
הביזנטי החליט גם להציע ובחר להציע 
\begin_inset Formula $0,1,1$
\end_inset


\end_layout

\begin_layout Itemize
עליון ימני: קיבל
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit

\begin_inset Formula $2>1=2$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
הצעות ל
\numeric on
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
)כולל של עצמו(, ולכן משנה את ערכו ל
\numeric on
1
\numeric off
 
\end_layout

\begin_layout Itemize
עליון שמאלי: אותו חישוב
\end_layout

\begin_layout Itemize
תחתון שמאלי: קיבל פעם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
0
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
פעם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
, ולכן לא קיבל הצעה יותר מ 
\begin_inset Formula $f=1$
\end_inset

 פעמים, ולכן נשאר עם ערכו
\end_layout

\end_deeper
\begin_layout Enumerate
סיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\numeric off
:
\end_layout

\begin_deeper
\begin_layout Itemize
כולם יקשיבו למלך כי ערכם הופיע
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit

\begin_inset Formula $n-f=4-1=3>1$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename distributed - pictures/less12_8.png
	scale 85

\end_inset


\end_layout

\begin_layout Enumerate
סיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
:
\end_layout

\begin_deeper
\begin_layout Itemize
כולם שולחים את הערך שלהם, הביזנטי החליט 
\begin_inset Formula $1,0,1$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Enumerate
סיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\numeric off
:
\end_layout

\begin_deeper
\begin_layout Itemize
תחתון שמאלי 
\begin_inset Formula $\left(0,1,1,1\right)$
\end_inset

 
\begin_inset Formula $\Leftarrow$
\end_inset

 מציע
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
 
\end_layout

\begin_layout Itemize
עליון ימני 
\begin_inset Formula $\left(0,1,1,1\right)$
\end_inset

 
\begin_inset Formula $\Leftarrow$
\end_inset

 מציע
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\numeric off
 
\end_layout

\begin_layout Itemize
עליון שמאלי 
\begin_inset Formula $\left(0,0,1,1\right)$
\end_inset

 
\begin_inset Formula $\Leftarrow$
\end_inset

 לא מציע
\end_layout

\begin_layout Itemize
ביזנטי: החליט להציע רק לתחתון שמאלי
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, ולשאר כלום.
\end_layout

\end_deeper
\begin_layout Enumerate
סיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\numeric off
:
\end_layout

\begin_deeper
\begin_layout Itemize
תחתון שמאלי: קיבל 
\begin_inset Formula $1$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, 
\begin_inset Formula $3$
\end_inset

 פעמים = 
\begin_inset Formula $n-f=4-1$
\end_inset

 , ולכן משנה את ערכו ל
\numeric on
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
ולא מקשיב למלך
\end_layout

\begin_layout Itemize
עליון שמאלי: קיבל
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
,
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
פעמים 
\begin_inset Formula $f<$
\end_inset

 ולכן ישנה את ערכו, אבל ישנה את ערכו למלך כי 
\begin_inset Formula $2<3=n-f$
\end_inset

 
\end_layout

\begin_layout Itemize
עליון ימני: קיבל
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
,
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
פעמים ולכן גם הוא יקשיב למלך.
\end_layout

\begin_layout Standard
לסיכום: עליון שמאלי בוחר אחד )זה ערכו( וזה מה שיציע, כיון שהוא המלך וכולם
 מקשיבים לו , כולם יבחרו
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
1
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
, ולכן תהיה הסכמה.
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
אלגוריתם המלך
\end_layout

\begin_layout Subsubsection
למה: אם קודקוד תקין הציע 
\begin_inset Formula $x$
\end_inset

 אז לא קיים קודקוד תקין שהציע 
\begin_inset Formula $y\neq x$
\end_inset

 
\end_layout

\begin_layout Itemize
נניח בשלילה שקיימים שני קודקודים 
\begin_inset Formula $u,v$
\end_inset

 שהציעו ערכים שונים 
\begin_inset Formula $x,y$
\end_inset

 ומתקיים ש 
\begin_inset Formula $x\neq y$
\end_inset

 
\end_layout

\begin_layout Itemize
ע
\begin_inset Quotes erd
\end_inset

פ פעולת האלוגריתם 
\begin_inset Formula $u$
\end_inset

 הציע 
\begin_inset Formula $x$
\end_inset

 
\begin_inset Formula $\Leftarrow$
\end_inset

 הוא קיבל את הערך לפחות 
\begin_inset Formula $n-f$
\end_inset

 פעמים )בסיבוב הראשון( 
\end_layout

\begin_layout Itemize
ישנם 
\begin_inset Formula $f$
\end_inset

 קודקודים ביזנטים 
\begin_inset Formula $\Leftarrow$
\end_inset

 
\begin_inset Formula $u$
\end_inset

 קיבל את 
\begin_inset Formula $x$
\end_inset

 
\bar under
מלפחות
\bar default
 
\begin_inset Formula $n-f-f=n-2f$
\end_inset

 קודקודים 
\bar under
תקינים
\end_layout

\begin_layout Itemize
באותו אופן עבור 
\begin_inset Formula $v$
\end_inset

 
\begin_inset Formula $\Leftarrow$
\end_inset

 קיבל את 
\begin_inset Formula $y$
\end_inset

 מלפחות 
\begin_inset Formula $n-2f$
\end_inset

 קודקודים 
\bar under
תקינים
\end_layout

\begin_layout Itemize
כיון ש
\begin_inset Formula $y\neq x$
\end_inset

 אלו קבוצות זרות של קודקודים ולכן:
\end_layout

\begin_layout Itemize
)נזכר ש 
\begin_inset Formula $f<\frac{n}{3}$
\end_inset

( סה
\begin_inset Quotes erd
\end_inset

כ חייב להיות 
\begin_inset Formula $2\left(n-2f\right)+f>2\left(n-2\cdot\frac{n}{3}\right)+\frac{n}{3}=n$
\end_inset

 קודקודים , וזו סתירה.
\end_layout

\begin_layout Subsubsection
הוכחת נכונות
\end_layout

\begin_layout Standard
\begin_inset Formula $validity$
\end_inset

 :
\end_layout

\begin_layout Itemize
נניח לכל התקינים את אותו קלט 
\begin_inset Formula $x$
\end_inset

 
\begin_inset Formula $\Leftarrow$
\end_inset

 בסיבוב הראשון כל קודקדו תקין קיבל את 
\begin_inset Formula $x$
\end_inset

 לפחות 
\begin_inset Formula $n-f$
\end_inset

 פעמים 
\begin_inset Formula $\Leftarrow$
\end_inset

 ע
\begin_inset Quotes erd
\end_inset

פ האלגוריתם 
\begin_inset Formula $\Leftarrow$
\end_inset

 כולם יציעו את 
\begin_inset Formula $x$
\end_inset

 בסיבוב השני 
\begin_inset Formula $\Leftarrow$
\end_inset

 
\begin_inset Formula $x$
\end_inset

 יתקבל כהצעה לפחות 
\begin_inset Formula $n-f$
\end_inset

 פעמים 
\begin_inset Formula $\Leftarrow$
\end_inset

 אף קודקוד לא יקשיב למלך 
\begin_inset Formula $\Leftarrow$
\end_inset

 ימשיך כך עד סוף ריצת האלגוריתם 
\begin_inset Formula $\Leftarrow$
\end_inset

 יפלטו 
\begin_inset Formula $x$
\end_inset

 ,כנדרש
\end_layout

\begin_layout Subsubsection*
שיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
13
\numeric off
 
\end_layout

\begin_layout Itemize
הזכרנו שבגלל שיש 
\begin_inset Formula $f+1$
\end_inset

 שלבים, יש שלב בו המלך אינו ביזנטי, כעת צריך להראות שני דברים:
\end_layout

\begin_deeper
\begin_layout Enumerate

\bar under
אחרי השלב בו המלך תקין, כל הקודקודים התקינים בעלי אותו ערך
\end_layout

\begin_deeper
\begin_layout Standard
בשלב הראשון כל קודקוד מקבל החלטה האם להקשיב למלך או לא
\end_layout

\begin_layout Itemize
)המקרה הקל( 
\bar under
אם כל הקודקודים החליטו להקשיב למלך:
\end_layout

\begin_deeper
\begin_layout Itemize
נניח שהערך ששלח הוא 
\begin_inset Formula $x$
\end_inset

 ,אז בברור שכולם יפלטו את אותו ערך 
\begin_inset Formula $x$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Itemize
לכן נתבונן במקרה בו 
\bar under
ישנם הקודקודים שהחליטו לא להקשיב למלך
\bar default
:
\end_layout

\begin_deeper
\begin_layout Itemize
)מהגדרת האלגוריתם נובע ש( 
\begin_inset Formula $\Leftarrow$
\end_inset

 הם קיבלו את 
\begin_inset Formula $x$
\end_inset

 יותר מ 
\begin_inset Formula $n-f$
\end_inset

 פעמים 
\end_layout

\begin_layout Itemize
היות ויש 
\begin_inset Formula $f$
\end_inset

 ביזנטים 
\begin_inset Formula $\Leftarrow$
\end_inset

 הם קיבלו את הערך 
\begin_inset Formula $x$
\end_inset

 מלפחות 
\begin_inset Formula $>f$
\end_inset

 
\bar under

\begin_inset Formula $n-2f$
\end_inset

 קודקודים תקינים )כולל המלך(
\end_layout

\begin_layout Itemize
)מהלמה בשיעור שעבר ערך זה הוא יחיד בכל הקודקודים(
\end_layout

\begin_layout Itemize
ולכן בסיבוב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
יבחרו בערך שהציעו להם = 
\begin_inset Formula $x$
\end_inset


\end_layout

\begin_layout Itemize
המלך ישלח 
\begin_inset Formula $x$
\end_inset

 לכולם, חלק מהתקינים וישנו את ערכם ל 
\begin_inset Formula $x$
\end_inset

 וחלק יתעלמו וישארו עם 
\begin_inset Formula $x$
\end_inset

 
\end_layout

\begin_layout Itemize
בכל מקרה נשארנו עם אותו ערך.
\end_layout

\end_deeper
\end_deeper
\begin_layout Enumerate

\bar under
בכל שאר השלבים לא צריך לשנות את הערך
\end_layout

\begin_deeper
\begin_layout Itemize
הוכחת ה 
\begin_inset Formula $validity$
\end_inset

 משיעור שעבר
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
סיכום:
\end_layout

\begin_layout Itemize

\bar under
יתרונות:
\end_layout

\begin_deeper
\begin_layout Itemize
עובד ל 
\begin_inset Formula $f$
\end_inset

 עם 
\begin_inset Formula $n>3f$
\end_inset

 וזה אופטימלי
\end_layout

\begin_layout Itemize
ההודעות קטנות , הקודקודים שולחים רק ערכם העצמי
\end_layout

\begin_layout Itemize
עובד לכל קלט ולא רק לבינארי
\end_layout

\end_deeper
\begin_layout Itemize

\bar under
חסרונות:
\end_layout

\begin_deeper
\begin_layout Itemize
דורש 
\begin_inset Formula $f+1$
\end_inset

 שלבים , בכל שלב
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
3
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
סיבובים סה
\begin_inset Quotes erd
\end_inset

כ פי 
\series bold
שלוש
\series default
 מהזמן ריצה האופטימלי.
\end_layout

\end_deeper
\begin_layout Standard
חלק
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
2
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
של השיעור:
\end_layout

\begin_layout Itemize
השלמת דוגמת אי הסכמה לאלגוריתם הפשוט משיעור
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\numeric on
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
12
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\xout default
\uuline default
\uwave default
\noun default
\color inherit
)עיין שם(
\end_layout

\begin_layout Itemize
שאלה ממבחן - בעיית שני הגנרלים עם דגשים למבחן
\end_layout

\end_body
\end_document
